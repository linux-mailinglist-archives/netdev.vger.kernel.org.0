Return-Path: <netdev-owner@vger.kernel.org>
X-Original-To: lists+netdev@lfdr.de
Delivered-To: lists+netdev@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 9BD3C40FBAC
	for <lists+netdev@lfdr.de>; Fri, 17 Sep 2021 17:15:55 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1344064AbhIQPRJ (ORCPT <rfc822;lists+netdev@lfdr.de>);
        Fri, 17 Sep 2021 11:17:09 -0400
Received: from mail-mw2nam12on2045.outbound.protection.outlook.com ([40.107.244.45]:4192
        "EHLO NAM12-MW2-obe.outbound.protection.outlook.com"
        rhost-flags-OK-OK-OK-FAIL) by vger.kernel.org with ESMTP
        id S1343602AbhIQPQd (ORCPT <rfc822;netdev@vger.kernel.org>);
        Fri, 17 Sep 2021 11:16:33 -0400
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=FoXvcoyIYSL1vfX1nn3K2UbaMcxpZIgbs/4EGi15kyAIvY/IswY5r5lifk6dhtEaFBSHQfQjMM/MEEfetR4u0Y31gW0zEmy48YuJE9RGiBSqBv+wVR1ZiWurTgjA/X4DcaSn4YwBJtJr1a6tjIaEzJtCVIlLVW6aHt4Vk7VgDelfbk0gdRSx47vjUbtTHGuHBIEejLXa8yaLjeLAlfXRtfzlFXrpOQDD2u5ZQMeGCv51Dwyfqoc+aqnqYtQ9D+KHkmSc3uLFzm5yeI+pimGWo9DXovulBjdwLwcGzpmArTjn/z4qb6KmfgfZWES2hLUiZkDhNgfyYhM7yBL6owzq2Q==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com;
 s=arcselector9901; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version;
 bh=fcEwwc3i6agT46bOKiI8eUhDKxo9lKyrYIMHtt/BQts=;
 b=Yjq8hj1P3R477KcdiMpEHDaY5K45ZW5DlLUOLoRPO4RGwY2OaojjHA9yV8Ud3LZD0kXj8fE1F1HAKtpGIpObIcdf87ghn8uaFXLHPq6ewZqmBo6qIJKjT4YyNAe4VEEdlpl+KMBCAbcITOFyi88VGlkwqlgG/M9dyBhseZFrOu77MBFnbZp+U14l1kyYm0Ckrmk+Tde73bKdK6N88Jjs1AZ9K9vt/a94pTWcZwSFXsdK7RjyRA+02Cu/pebXZgBukDuUQXO7vRT+tYu9aFBnoY+VfC5JqmdzculcZoVU7LYJa7N8OJDlMzn2UqC+hB+U5FBJQgIduuni3moZOw0BXA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=silabs.com; dmarc=pass action=none header.from=silabs.com;
 dkim=pass header.d=silabs.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=silabs.onmicrosoft.com; s=selector2-silabs-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=fcEwwc3i6agT46bOKiI8eUhDKxo9lKyrYIMHtt/BQts=;
 b=GQm0BxHCUYyEzUrCp+lSJnWQ2LlQHNhVk8tEBNVx0wdb3mwJM95/AFPl3OwTXh2a986oPOqrBfaaZwXJ9eaxIFrYA8AcQuAtm8m81lSneyVDXwzuMZ9p6dFK/NsBzYh3HG45FbnKIASfS1cWjdRQcGoLzsoJMDIBZL+4O0x3KUI=
Authentication-Results: vger.kernel.org; dkim=none (message not signed)
 header.d=none;vger.kernel.org; dmarc=none action=none header.from=silabs.com;
Received: from SN6PR11MB2718.namprd11.prod.outlook.com (2603:10b6:805:63::18)
 by SA2PR11MB4876.namprd11.prod.outlook.com (2603:10b6:806:119::13) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.4523.14; Fri, 17 Sep
 2021 15:14:44 +0000
Received: from SN6PR11MB2718.namprd11.prod.outlook.com
 ([fe80::7050:a0a:415:2ccd]) by SN6PR11MB2718.namprd11.prod.outlook.com
 ([fe80::7050:a0a:415:2ccd%7]) with mapi id 15.20.4500.017; Fri, 17 Sep 2021
 15:14:44 +0000
From:   Jerome Pouiller <Jerome.Pouiller@silabs.com>
To:     linux-wireless@vger.kernel.org, netdev@vger.kernel.org,
        Kalle Valo <kvalo@codeaurora.org>
Cc:     devel@driverdev.osuosl.org, linux-kernel@vger.kernel.org,
        Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
        "David S . Miller" <davem@davemloft.net>,
        devicetree@vger.kernel.org, Rob Herring <robh+dt@kernel.org>,
        linux-mmc@vger.kernel.org,
        =?UTF-8?q?Pali=20Roh=C3=A1r?= <pali@kernel.org>,
        Ulf Hansson <ulf.hansson@linaro.org>,
        =?UTF-8?q?J=C3=A9r=C3=B4me=20Pouiller?= 
        <jerome.pouiller@silabs.com>
Subject: [PATCH v6 10/24] wfx: add fwio.c/fwio.h
Date:   Fri, 17 Sep 2021 17:13:46 +0200
Message-Id: <20210917151401.2274772-11-Jerome.Pouiller@silabs.com>
X-Mailer: git-send-email 2.33.0
In-Reply-To: <20210917151401.2274772-1-Jerome.Pouiller@silabs.com>
References: <20210917151401.2274772-1-Jerome.Pouiller@silabs.com>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
X-ClientProxiedBy: SA9PR03CA0029.namprd03.prod.outlook.com
 (2603:10b6:806:20::34) To SN6PR11MB2718.namprd11.prod.outlook.com
 (2603:10b6:805:63::18)
MIME-Version: 1.0
Received: from pc-42.silabs.com (2a01:e34:ecb5:66a0:9876:e1d7:65be:d294) by SA9PR03CA0029.namprd03.prod.outlook.com (2603:10b6:806:20::34) with Microsoft SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.4523.14 via Frontend Transport; Fri, 17 Sep 2021 15:14:42 +0000
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-Correlation-Id: 5dd78961-87e0-44e1-c199-08d979ede11d
X-MS-TrafficTypeDiagnostic: SA2PR11MB4876:
X-MS-Exchange-Transport-Forked: True
X-Microsoft-Antispam-PRVS: <SA2PR11MB4876D6987BD84469950AFA5393DD9@SA2PR11MB4876.namprd11.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:1122;
X-MS-Exchange-SenderADCheck: 1
X-MS-Exchange-AntiSpam-Relay: 0
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: Nua9Esdbbjb1GDUqaV+D71OEvsT13hjtDVbQldBhsxLXjwqnD1kHlOo26/i6UPyP6QcKr3ryraPAzzLFuZEzcHt4P3yiEoyfi7ipFPdVHtAuwS4hEeiZ7TnjemWa3yYZRH652N0Ii5fgdBMbngED8fqCD1uWYr60CFj3rhlygosxLQF7lRqXTNRyzicnw51JPNiAJJI2+zM4AXQCTelABgfQ3emsiWt5qg5m9L5sy74OJMvHztKEWWu19wCh09/THbg9OFz6Gt762D9PSaWcHJ31fmTe1LHdeT4AW3+iN+IwuvR91oEPgeKgGUJ4L6WouF+zrRLtuWBleZcbcP6OsvUf+USA4lxl+ONxbzYH0OJjpqECUvDGEJOaPu5F6MZRcuPLaJVK/3BiJafE0aVlfqQnL2Fi1p6/493ttLPkRYMkH301w1J+WJX998KFCMflWWBBrFBkqF1SDEmJFTJx58JDIu3U97S52C1zzCe/S2507ChtbbHyx19F6b67XE4G6VqidHLc2HVRSL8anYMbvf84N0ums2Y/v5HQwyZRjkZAlm20i0FTV62dLwnte+Gx2HBpcd9ZwbVow+bFBh/quUbHsWWWxpK2UsXYTFm835ltmz1T/FSVTSNvrZm8702KeHMQFRixj34XxLFi3/8LFA==
X-Forefront-Antispam-Report: CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:SN6PR11MB2718.namprd11.prod.outlook.com;PTR:;CAT:NONE;SFS:(366004)(66556008)(66946007)(508600001)(52116002)(7696005)(6916009)(66476007)(30864003)(4326008)(316002)(86362001)(2616005)(6486002)(1076003)(107886003)(38100700002)(83380400001)(7416002)(2906002)(54906003)(5660300002)(186003)(8676002)(8936002)(66574015)(36756003);DIR:OUT;SFP:1101;
X-MS-Exchange-AntiSpam-MessageData-ChunkCount: 1
X-MS-Exchange-AntiSpam-MessageData-0: =?utf-8?B?VE9SRE1ONWovTHdXbzNVR1pmSkNxMHl5UXJibTc2R01sL0pkQkdLT1h3MCtH?=
 =?utf-8?B?TjlrZC9UTnVZdC8zUUgyTlNWcjNNUU1OanViQXZaRUtqOFlIdlZacHpiWXJn?=
 =?utf-8?B?YW5tY0gvRlVJY1ZpODg2MVBLZCtncWdWTFo2NlR2MUpWem9kRzAxeUxGU040?=
 =?utf-8?B?UTU2eDM3Q2ZuS1FNd21YbkVtMDNVMmY3ZDdWRFI4MDJ1d2hFdGdGcWFLZHlU?=
 =?utf-8?B?Ni9SNjhudWJzbGhzSUhmaWV5bGkrcWgxYzVlRE9VM1dzRmR2UGhldjdGdGUv?=
 =?utf-8?B?eE9ZbzdLaEtaZ2tNRm1aaHUrMWw4OU1iMGdpVU5FcDB0RVpNK05WMHBrQmx2?=
 =?utf-8?B?L2JBN0dVcTgzWlZOdis3Q0ZCZSttWDNkYWF5QzhHWG9MVk1ucnorOGtGTGk2?=
 =?utf-8?B?Y3JJYXdWSmw0ZUhzdWprekVNSDRUWFRhZWdwUTNVbytBTlJvOGU3Zi96V3hF?=
 =?utf-8?B?blF4aDlCUGF3NmJBeDJJeXR2OEhydWUwc2V2STN6ZVZubDNBd3E3M0FCNEMr?=
 =?utf-8?B?TlhqKzJyUm81eFg4ZlJlT2VtOXN0Y2RncFM3Q0p4bnQ0cDJqMW12bGNnNjZU?=
 =?utf-8?B?YythSjhKeWtxbjh6NmFkckZqcGV4d2FzTlAzTWlCRGZHY3Jqa0ZyVytxVmhz?=
 =?utf-8?B?K1JCQm1oUTNhckhiN3hMTUtoQ3RQQVNuTm85djZkQTlMY051cWlad2Q5NWJK?=
 =?utf-8?B?NVlKd25ocXZYWU00bHhObXFsKzBOSzNIZFhxUXh4UXBDNktlWjV1algrcDF6?=
 =?utf-8?B?dGNCMjJlR3YxMC84K2MrdHp1NGFXOW1OZ1VBellqUm00a2ZGWEpjQjNQMDg4?=
 =?utf-8?B?MTZ6TWhnMndpUFpySXlaR0lJWG5IQlBhRk9YV2pGcWVtampkdmtiU1VYTzE1?=
 =?utf-8?B?c21tclpVVEFYMG8vZmZROU5UaXAyYml4OGZ6S0Y0MXREQnVXUzZJSUphYVl4?=
 =?utf-8?B?S1FGUFhHaDdyZC9VaEpVTk9WZkYvYUpBREs5ekdVb3RsL2I2NDcvLzJHTjV2?=
 =?utf-8?B?YjhqcEplZDNwZlA1MTdxRlRLVHZLWHcxVG5uT2d2ZFZRTDlUZnF2OUNWaGQ2?=
 =?utf-8?B?RlFZSk9uV0UxWHVYdnZhM1NhZjBUYXFTSXFNYXNGandaOTQrY0g0aGtDM09z?=
 =?utf-8?B?Z0RNc05FRDA3Tk92M3EvTDJLQTgrOXVxNFdNVFFMTUsvNmhhSnMrVEZiMDM3?=
 =?utf-8?B?NjkyZGRmYnlPTTBHdGtCdVdjZzRaLzE2NmdlM1N5Y2FpdERpZnFkRlZ5NmpW?=
 =?utf-8?B?di9kcjdkNWRsc3laSEJNTUNtZ3cvSU5kcXdsM1UzQit6RDJVMUxCQmdSSFNR?=
 =?utf-8?B?YXB4NndKZUp2ZjVDR0dJYnkwSkNmS3FBK0EycUxFaHRZVk1LYytHY2phVVhW?=
 =?utf-8?B?dU1oQTBrdTRib21NV0RteThxM3Z4cHBwVWZ3SlIwdm5sWTBWdU05R0lCWHdZ?=
 =?utf-8?B?ZGtaTVkwY2xlclBaUVYvbWxnNnFQTEZJSTk2VFVPSC9UcEFINlI0TXlXNUdZ?=
 =?utf-8?B?ZlV2ZWI5aXFtaUo1aUR2VGJJUHdyQUpqcUp0ZHVONERTZlJZRkZlTFRnVW1n?=
 =?utf-8?B?VkVIVXdJbDI3NFlKSGZRT2xUODlzd2RCM1phRm9QaHl5RGJyUnVGWXFkRlpi?=
 =?utf-8?B?QmtrYXd5cjNxUEt3U3F1RWFIK0xvdlRrbzV4elhRODVZOXlQSjBQU0IwOEpM?=
 =?utf-8?B?U09LRkJ4clRETFgzVnJLTmNOZTdLa3UxK1RYTEtvUE9XZDR0b2NYT1hmMXlV?=
 =?utf-8?B?Zmh5ZWVPaFJxaGFXVXBYTWRzTDZoVHFjL2swSXkxNHArUTJJWmhwMmljdnB3?=
 =?utf-8?B?S3NLV2N4M1laNDhnc3p1U1BEOFJGVExDb05qeTdPSnFaOEdsUWlMc3JvT0xW?=
 =?utf-8?Q?FMZQZsso/0Brn?=
X-OriginatorOrg: silabs.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 5dd78961-87e0-44e1-c199-08d979ede11d
X-MS-Exchange-CrossTenant-AuthSource: SN6PR11MB2718.namprd11.prod.outlook.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 17 Sep 2021 15:14:44.2808
 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: 54dbd822-5231-4b20-944d-6f4abcd541fb
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: KKm4dsWuoJcaSKuRaEnApj6+LptlX8FfgO6h6QeIFPkfIyP7kkVlczKSSjwKwFrY86I5/oDOmBxbR4Gr2+2Vzg==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: SA2PR11MB4876
Precedence: bulk
List-ID: <netdev.vger.kernel.org>
X-Mailing-List: netdev@vger.kernel.org

RnJvbTogSsOpcsO0bWUgUG91aWxsZXIgPGplcm9tZS5wb3VpbGxlckBzaWxhYnMuY29tPgoKU2ln
bmVkLW9mZi1ieTogSsOpcsO0bWUgUG91aWxsZXIgPGplcm9tZS5wb3VpbGxlckBzaWxhYnMuY29t
PgotLS0KIGRyaXZlcnMvbmV0L3dpcmVsZXNzL3NpbGFicy93ZngvZndpby5jIHwgNDA1ICsrKysr
KysrKysrKysrKysrKysrKysrKysKIGRyaXZlcnMvbmV0L3dpcmVsZXNzL3NpbGFicy93ZngvZndp
by5oIHwgIDE1ICsKIDIgZmlsZXMgY2hhbmdlZCwgNDIwIGluc2VydGlvbnMoKykKIGNyZWF0ZSBt
b2RlIDEwMDY0NCBkcml2ZXJzL25ldC93aXJlbGVzcy9zaWxhYnMvd2Z4L2Z3aW8uYwogY3JlYXRl
IG1vZGUgMTAwNjQ0IGRyaXZlcnMvbmV0L3dpcmVsZXNzL3NpbGFicy93ZngvZndpby5oCgpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9uZXQvd2lyZWxlc3Mvc2lsYWJzL3dmeC9md2lvLmMgYi9kcml2ZXJz
L25ldC93aXJlbGVzcy9zaWxhYnMvd2Z4L2Z3aW8uYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRl
eCAwMDAwMDAwMDAwMDAuLjk4YTkzOTFiMmJlZQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMv
bmV0L3dpcmVsZXNzL3NpbGFicy93ZngvZndpby5jCkBAIC0wLDAgKzEsNDA1IEBACisvLyBTUERY
LUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1vbmx5CisvKgorICogRmlybXdhcmUgbG9hZGlu
Zy4KKyAqCisgKiBDb3B5cmlnaHQgKGMpIDIwMTctMjAyMCwgU2lsaWNvbiBMYWJvcmF0b3JpZXMs
IEluYy4KKyAqIENvcHlyaWdodCAoYykgMjAxMCwgU1QtRXJpY3Nzb24KKyAqLworI2luY2x1ZGUg
PGxpbnV4L2Zpcm13YXJlLmg+CisjaW5jbHVkZSA8bGludXgvc2xhYi5oPgorI2luY2x1ZGUgPGxp
bnV4L21tLmg+CisjaW5jbHVkZSA8bGludXgvYml0ZmllbGQuaD4KKworI2luY2x1ZGUgImZ3aW8u
aCIKKyNpbmNsdWRlICJ3ZnguaCIKKyNpbmNsdWRlICJod2lvLmgiCisKKy8qIEFkZHJlc3NlcyBi
ZWxvdyBhcmUgaW4gU1JBTSBhcmVhICovCisjZGVmaW5lIFdGWF9ETkxEX0ZJRk8gICAgICAgICAg
ICAgMHgwOTAwNDAwMAorI2RlZmluZSAgICAgRE5MRF9CTE9DS19TSVpFICAgICAgICAgICAweDA0
MDAKKyNkZWZpbmUgICAgIEROTERfRklGT19TSVpFICAgICAgICAgICAgMHg4MDAwIC8qICgzMiAq
IEROTERfQkxPQ0tfU0laRSkgKi8KKy8qIERvd25sb2FkIENvbnRyb2wgQXJlYSAoRENBKSAqLwor
I2RlZmluZSBXRlhfRENBX0lNQUdFX1NJWkUgICAgICAgIDB4MDkwMEMwMDAKKyNkZWZpbmUgV0ZY
X0RDQV9QVVQgICAgICAgICAgICAgICAweDA5MDBDMDA0CisjZGVmaW5lIFdGWF9EQ0FfR0VUICAg
ICAgICAgICAgICAgMHgwOTAwQzAwOAorI2RlZmluZSBXRlhfRENBX0hPU1RfU1RBVFVTICAgICAg
IDB4MDkwMEMwMEMKKyNkZWZpbmUgICAgIEhPU1RfUkVBRFkgICAgICAgICAgICAgICAgMHg4NzY1
NDMyMQorI2RlZmluZSAgICAgSE9TVF9JTkZPX1JFQUQgICAgICAgICAgICAweEE3NTNCRDk5Cisj
ZGVmaW5lICAgICBIT1NUX1VQTE9BRF9QRU5ESU5HICAgICAgIDB4QUJDRERDQkEKKyNkZWZpbmUg
ICAgIEhPU1RfVVBMT0FEX0NPTVBMRVRFICAgICAgMHhENEM2NEE5OQorI2RlZmluZSAgICAgSE9T
VF9PS19UT19KVU1QICAgICAgICAgICAweDE3NEZDODgyCisjZGVmaW5lIFdGWF9EQ0FfTkNQX1NU
QVRVUyAgICAgICAgMHgwOTAwQzAxMAorI2RlZmluZSAgICAgTkNQX05PVF9SRUFEWSAgICAgICAg
ICAgICAweDEyMzQ1Njc4CisjZGVmaW5lICAgICBOQ1BfUkVBRFkgICAgICAgICAgICAgICAgIDB4
ODc2NTQzMjEKKyNkZWZpbmUgICAgIE5DUF9JTkZPX1JFQURZICAgICAgICAgICAgMHhCRDUzRUY5
OQorI2RlZmluZSAgICAgTkNQX0RPV05MT0FEX1BFTkRJTkcgICAgICAweEFCQ0REQ0JBCisjZGVm
aW5lICAgICBOQ1BfRE9XTkxPQURfQ09NUExFVEUgICAgIDB4Q0FGRUZFQ0EKKyNkZWZpbmUgICAg
IE5DUF9BVVRIX09LICAgICAgICAgICAgICAgMHhENEM2NEE5OQorI2RlZmluZSAgICAgTkNQX0FV
VEhfRkFJTCAgICAgICAgICAgICAweDE3NEZDODgyCisjZGVmaW5lICAgICBOQ1BfUFVCX0tFWV9S
RFkgICAgICAgICAgIDB4N0FCNDFEMTkKKyNkZWZpbmUgV0ZYX0RDQV9GV19TSUdOQVRVUkUgICAg
ICAweDA5MDBDMDE0CisjZGVmaW5lICAgICBGV19TSUdOQVRVUkVfU0laRSAgICAgICAgIDB4NDAK
KyNkZWZpbmUgV0ZYX0RDQV9GV19IQVNIICAgICAgICAgICAweDA5MDBDMDU0CisjZGVmaW5lICAg
ICBGV19IQVNIX1NJWkUgICAgICAgICAgICAgIDB4MDgKKyNkZWZpbmUgV0ZYX0RDQV9GV19WRVJT
SU9OICAgICAgICAweDA5MDBDMDVDCisjZGVmaW5lICAgICBGV19WRVJTSU9OX1NJWkUgICAgICAg
ICAgIDB4MDQKKyNkZWZpbmUgV0ZYX0RDQV9SRVNFUlZFRCAgICAgICAgICAweDA5MDBDMDYwCisj
ZGVmaW5lICAgICBEQ0FfUkVTRVJWRURfU0laRSAgICAgICAgIDB4MjAKKyNkZWZpbmUgV0ZYX1NU
QVRVU19JTkZPICAgICAgICAgICAweDA5MDBDMDgwCisjZGVmaW5lIFdGWF9CT09UTE9BREVSX0xB
QkVMICAgICAgMHgwOTAwQzA4NAorI2RlZmluZSAgICAgQk9PVExPQURFUl9MQUJFTF9TSVpFICAg
ICAweDNDCisjZGVmaW5lIFdGWF9QVEVfSU5GTyAgICAgICAgICAgICAgMHgwOTAwQzBDMAorI2Rl
ZmluZSAgICAgUFRFX0lORk9fS0VZU0VUX0lEWCAgICAgICAweDBECisjZGVmaW5lICAgICBQVEVf
SU5GT19TSVpFICAgICAgICAgICAgIDB4MTAKKyNkZWZpbmUgV0ZYX0VSUl9JTkZPICAgICAgICAg
ICAgICAweDA5MDBDMEQwCisjZGVmaW5lICAgICBFUlJfSU5WQUxJRF9TRUNfVFlQRSAgICAgIDB4
MDUKKyNkZWZpbmUgICAgIEVSUl9TSUdfVkVSSUZfRkFJTEVEICAgICAgMHgwRgorI2RlZmluZSAg
ICAgRVJSX0FFU19DVFJMX0tFWSAgICAgICAgICAweDEwCisjZGVmaW5lICAgICBFUlJfRUNDX1BV
Ql9LRVkgICAgICAgICAgIDB4MTEKKyNkZWZpbmUgICAgIEVSUl9NQUNfS0VZICAgICAgICAgICAg
ICAgMHgxOAorCisjZGVmaW5lIERDQV9USU1FT1VUICA1MCAvKiBtaWxsaXNlY29uZHMgKi8KKyNk
ZWZpbmUgV0FLRVVQX1RJTUVPVVQgMjAwIC8qIG1pbGxpc2Vjb25kcyAqLworCitzdGF0aWMgY29u
c3QgY2hhciAqIGNvbnN0IGZ3aW9fZXJyb3JzW10gPSB7CisJW0VSUl9JTlZBTElEX1NFQ19UWVBF
XSA9ICJJbnZhbGlkIHNlY3Rpb24gdHlwZSBvciB3cm9uZyBlbmNyeXB0aW9uIiwKKwlbRVJSX1NJ
R19WRVJJRl9GQUlMRURdID0gIlNpZ25hdHVyZSB2ZXJpZmljYXRpb24gZmFpbGVkIiwKKwlbRVJS
X0FFU19DVFJMX0tFWV0gPSAiQUVTIGNvbnRyb2wga2V5IG5vdCBpbml0aWFsaXplZCIsCisJW0VS
Ul9FQ0NfUFVCX0tFWV0gPSAiRUNDIHB1YmxpYyBrZXkgbm90IGluaXRpYWxpemVkIiwKKwlbRVJS
X01BQ19LRVldID0gIk1BQyBrZXkgbm90IGluaXRpYWxpemVkIiwKK307CisKKy8qIHJlcXVlc3Rf
ZmlybXdhcmUoKSBhbGxvY2F0ZSBkYXRhIHVzaW5nIHZtYWxsb2MoKS4gSXQgaXMgbm90IGNvbXBh
dGlibGUgd2l0aAorICogdW5kZXJseWluZyBoYXJkd2FyZSB0aGF0IHVzZSBETUEuIEZ1bmN0aW9u
IGJlbG93IGRldGVjdCB0aGlzIGNhc2UgYW5kCisgKiBhbGxvY2F0ZSBhIGJvdW5jZSBidWZmZXIg
aWYgbmVjZXNzYXJ5LgorICoKKyAqIE5vdGljZSB0aGF0LCBpbiBkb3VidCwgeW91IGNhbiBlbmFi
bGUgQ09ORklHX0RFQlVHX1NHIHRvIGFzayBrZXJuZWwgdG8KKyAqIGRldGVjdCB0aGlzIHByb2Js
ZW0gYXQgcnVudGltZSAgKGVsc2UsIGtlcm5lbCBzaWxlbnRseSBmYWlsKS4KKyAqCisgKiBOT1RF
OiBpdCBtYXkgYWxzbyBiZSBwb3NzaWJsZSB0byB1c2UgJ3BhZ2VzJyBmcm9tIHN0cnVjdCBmaXJt
d2FyZSBhbmQgYXZvaWQKKyAqIGJvdW5jZSBidWZmZXIKKyAqLworc3RhdGljIGludCBzcmFtX3dy
aXRlX2RtYV9zYWZlKHN0cnVjdCB3ZnhfZGV2ICp3ZGV2LCB1MzIgYWRkciwgY29uc3QgdTggKmJ1
ZiwKKwkJCSAgICAgICBzaXplX3QgbGVuKQoreworCWludCByZXQ7CisJY29uc3QgdTggKnRtcDsK
KworCWlmICghdmlydF9hZGRyX3ZhbGlkKGJ1ZikpIHsKKwkJdG1wID0ga21lbWR1cChidWYsIGxl
biwgR0ZQX0tFUk5FTCk7CisJCWlmICghdG1wKQorCQkJcmV0dXJuIC1FTk9NRU07CisJfSBlbHNl
IHsKKwkJdG1wID0gYnVmOworCX0KKwlyZXQgPSBzcmFtX2J1Zl93cml0ZSh3ZGV2LCBhZGRyLCB0
bXAsIGxlbik7CisJaWYgKHRtcCAhPSBidWYpCisJCWtmcmVlKHRtcCk7CisJcmV0dXJuIHJldDsK
K30KKworc3RhdGljIGludCBnZXRfZmlybXdhcmUoc3RydWN0IHdmeF9kZXYgKndkZXYsIHUzMiBr
ZXlzZXRfY2hpcCwKKwkJCWNvbnN0IHN0cnVjdCBmaXJtd2FyZSAqKmZ3LCBpbnQgKmZpbGVfb2Zm
c2V0KQoreworCWludCBrZXlzZXRfZmlsZTsKKwljaGFyIGZpbGVuYW1lWzI1Nl07CisJY29uc3Qg
Y2hhciAqZGF0YTsKKwlpbnQgcmV0OworCisJc25wcmludGYoZmlsZW5hbWUsIHNpemVvZihmaWxl
bmFtZSksICIlc18lMDJYLnNlYyIsCisJCSB3ZGV2LT5wZGF0YS5maWxlX2Z3LCBrZXlzZXRfY2hp
cCk7CisJcmV0ID0gZmlybXdhcmVfcmVxdWVzdF9ub3dhcm4oZncsIGZpbGVuYW1lLCB3ZGV2LT5k
ZXYpOworCWlmIChyZXQpIHsKKwkJZGV2X2luZm8od2Rldi0+ZGV2LCAiY2FuJ3QgbG9hZCAlcywg
ZmFsbGluZyBiYWNrIHRvICVzLnNlY1xuIiwKKwkJCSBmaWxlbmFtZSwgd2Rldi0+cGRhdGEuZmls
ZV9mdyk7CisJCXNucHJpbnRmKGZpbGVuYW1lLCBzaXplb2YoZmlsZW5hbWUpLCAiJXMuc2VjIiwK
KwkJCSB3ZGV2LT5wZGF0YS5maWxlX2Z3KTsKKwkJcmV0ID0gcmVxdWVzdF9maXJtd2FyZShmdywg
ZmlsZW5hbWUsIHdkZXYtPmRldik7CisJCWlmIChyZXQpIHsKKwkJCWRldl9lcnIod2Rldi0+ZGV2
LCAiY2FuJ3QgbG9hZCAlc1xuIiwgZmlsZW5hbWUpOworCQkJKmZ3ID0gTlVMTDsKKwkJCXJldHVy
biByZXQ7CisJCX0KKwl9CisKKwlkYXRhID0gKCpmdyktPmRhdGE7CisJaWYgKG1lbWNtcChkYXRh
LCAiS0VZU0VUIiwgNikgIT0gMCkgeworCQkvKiBMZWdhY3kgZmlybXdhcmUgZm9ybWF0ICovCisJ
CSpmaWxlX29mZnNldCA9IDA7CisJCWtleXNldF9maWxlID0gMHg5MDsKKwl9IGVsc2UgeworCQkq
ZmlsZV9vZmZzZXQgPSA4OworCQlrZXlzZXRfZmlsZSA9IChoZXhfdG9fYmluKGRhdGFbNl0pICog
MTYpIHwgaGV4X3RvX2JpbihkYXRhWzddKTsKKwkJaWYgKGtleXNldF9maWxlIDwgMCkgeworCQkJ
ZGV2X2Vycih3ZGV2LT5kZXYsICIlcyBjb3JydXB0ZWRcbiIsIGZpbGVuYW1lKTsKKwkJCXJlbGVh
c2VfZmlybXdhcmUoKmZ3KTsKKwkJCSpmdyA9IE5VTEw7CisJCQlyZXR1cm4gLUVJTlZBTDsKKwkJ
fQorCX0KKwlpZiAoa2V5c2V0X2ZpbGUgIT0ga2V5c2V0X2NoaXApIHsKKwkJZGV2X2Vycih3ZGV2
LT5kZXYsICJmaXJtd2FyZSBrZXlzZXQgaXMgaW5jb21wYXRpYmxlIHdpdGggY2hpcCAoZmlsZTog
MHglMDJYLCBjaGlwOiAweCUwMlgpXG4iLAorCQkJa2V5c2V0X2ZpbGUsIGtleXNldF9jaGlwKTsK
KwkJcmVsZWFzZV9maXJtd2FyZSgqZncpOworCQkqZncgPSBOVUxMOworCQlyZXR1cm4gLUVOT0RF
VjsKKwl9CisJd2Rldi0+a2V5c2V0ID0ga2V5c2V0X2ZpbGU7CisJcmV0dXJuIDA7Cit9CisKK3N0
YXRpYyBpbnQgd2FpdF9uY3Bfc3RhdHVzKHN0cnVjdCB3ZnhfZGV2ICp3ZGV2LCB1MzIgc3RhdHVz
KQoreworCWt0aW1lX3Qgbm93LCBzdGFydDsKKwl1MzIgcmVnOworCWludCByZXQ7CisKKwlzdGFy
dCA9IGt0aW1lX2dldCgpOworCWZvciAoOzspIHsKKwkJcmV0ID0gc3JhbV9yZWdfcmVhZCh3ZGV2
LCBXRlhfRENBX05DUF9TVEFUVVMsICZyZWcpOworCQlpZiAocmV0IDwgMCkKKwkJCXJldHVybiAt
RUlPOworCQlub3cgPSBrdGltZV9nZXQoKTsKKwkJaWYgKHJlZyA9PSBzdGF0dXMpCisJCQlicmVh
azsKKwkJaWYgKGt0aW1lX2FmdGVyKG5vdywga3RpbWVfYWRkX21zKHN0YXJ0LCBEQ0FfVElNRU9V
VCkpKQorCQkJcmV0dXJuIC1FVElNRURPVVQ7CisJfQorCWlmIChrdGltZV9jb21wYXJlKG5vdywg
c3RhcnQpKQorCQlkZXZfZGJnKHdkZXYtPmRldiwgImNoaXAgYW5zd2VyIGFmdGVyICVsbGR1c1xu
IiwKKwkJCWt0aW1lX3VzX2RlbHRhKG5vdywgc3RhcnQpKTsKKwllbHNlCisJCWRldl9kYmcod2Rl
di0+ZGV2LCAiY2hpcCBhbnN3ZXIgaW1tZWRpYXRlbHlcbiIpOworCXJldHVybiAwOworfQorCitz
dGF0aWMgaW50IHVwbG9hZF9maXJtd2FyZShzdHJ1Y3Qgd2Z4X2RldiAqd2RldiwgY29uc3QgdTgg
KmRhdGEsIHNpemVfdCBsZW4pCit7CisJaW50IHJldDsKKwl1MzIgb2ZmcywgYnl0ZXNfZG9uZSA9
IDA7CisJa3RpbWVfdCBub3csIHN0YXJ0OworCisJaWYgKGxlbiAlIEROTERfQkxPQ0tfU0laRSkg
eworCQlkZXZfZXJyKHdkZXYtPmRldiwgImZpcm13YXJlIHNpemUgaXMgbm90IGFsaWduZWQuIEJ1
ZmZlciBvdmVycnVuIHdpbGwgb2NjdXJcbiIpOworCQlyZXR1cm4gLUVJTzsKKwl9CisJb2ZmcyA9
IDA7CisJd2hpbGUgKG9mZnMgPCBsZW4pIHsKKwkJc3RhcnQgPSBrdGltZV9nZXQoKTsKKwkJZm9y
ICg7OykgeworCQkJbm93ID0ga3RpbWVfZ2V0KCk7CisJCQlpZiAob2ZmcyArIEROTERfQkxPQ0tf
U0laRSAtIGJ5dGVzX2RvbmUgPCBETkxEX0ZJRk9fU0laRSkKKwkJCQlicmVhazsKKwkJCWlmIChr
dGltZV9hZnRlcihub3csIGt0aW1lX2FkZF9tcyhzdGFydCwgRENBX1RJTUVPVVQpKSkKKwkJCQly
ZXR1cm4gLUVUSU1FRE9VVDsKKwkJCXJldCA9IHNyYW1fcmVnX3JlYWQod2RldiwgV0ZYX0RDQV9H
RVQsICZieXRlc19kb25lKTsKKwkJCWlmIChyZXQgPCAwKQorCQkJCXJldHVybiByZXQ7CisJCX0K
KwkJaWYgKGt0aW1lX2NvbXBhcmUobm93LCBzdGFydCkpCisJCQlkZXZfZGJnKHdkZXYtPmRldiwg
ImFuc3dlciBhZnRlciAlbGxkdXNcbiIsCisJCQkJa3RpbWVfdXNfZGVsdGEobm93LCBzdGFydCkp
OworCisJCXJldCA9IHNyYW1fd3JpdGVfZG1hX3NhZmUod2RldiwgV0ZYX0ROTERfRklGTyArCisJ
CQkJCSAgKG9mZnMgJSBETkxEX0ZJRk9fU0laRSksCisJCQkJCSAgZGF0YSArIG9mZnMsIEROTERf
QkxPQ0tfU0laRSk7CisJCWlmIChyZXQgPCAwKQorCQkJcmV0dXJuIHJldDsKKworCQkvKiBUaGUg
ZGV2aWNlIHNlZW1zIHRvIG5vdCBzdXBwb3J0IHdyaXRpbmcgMCBpbiB0aGlzIHJlZ2lzdGVyCisJ
CSAqIGR1cmluZyBmaXJzdCBsb29wCisJCSAqLworCQlvZmZzICs9IEROTERfQkxPQ0tfU0laRTsK
KwkJcmV0ID0gc3JhbV9yZWdfd3JpdGUod2RldiwgV0ZYX0RDQV9QVVQsIG9mZnMpOworCQlpZiAo
cmV0IDwgMCkKKwkJCXJldHVybiByZXQ7CisJfQorCXJldHVybiAwOworfQorCitzdGF0aWMgdm9p
ZCBwcmludF9ib290X3N0YXR1cyhzdHJ1Y3Qgd2Z4X2RldiAqd2RldikKK3sKKwl1MzIgcmVnOwor
CisJc3JhbV9yZWdfcmVhZCh3ZGV2LCBXRlhfU1RBVFVTX0lORk8sICZyZWcpOworCWlmIChyZWcg
PT0gMHgxMjM0NTY3OCkKKwkJcmV0dXJuOworCXNyYW1fcmVnX3JlYWQod2RldiwgV0ZYX0VSUl9J
TkZPLCAmcmVnKTsKKwlpZiAocmVnIDwgQVJSQVlfU0laRShmd2lvX2Vycm9ycykgJiYgZndpb19l
cnJvcnNbcmVnXSkKKwkJZGV2X2luZm8od2Rldi0+ZGV2LCAic2VjdXJlIGJvb3Q6ICVzXG4iLCBm
d2lvX2Vycm9yc1tyZWddKTsKKwllbHNlCisJCWRldl9pbmZvKHdkZXYtPmRldiwgInNlY3VyZSBi
b290OiBFcnJvciAlIzAyeFxuIiwgcmVnKTsKK30KKworc3RhdGljIGludCBsb2FkX2Zpcm13YXJl
X3NlY3VyZShzdHJ1Y3Qgd2Z4X2RldiAqd2RldikKK3sKKwljb25zdCBzdHJ1Y3QgZmlybXdhcmUg
KmZ3ID0gTlVMTDsKKwlpbnQgaGVhZGVyX3NpemU7CisJaW50IGZ3X29mZnNldDsKKwlrdGltZV90
IHN0YXJ0OworCXU4ICpidWY7CisJaW50IHJldDsKKworCUJVSUxEX0JVR19PTihQVEVfSU5GT19T
SVpFID4gQk9PVExPQURFUl9MQUJFTF9TSVpFKTsKKwlidWYgPSBrbWFsbG9jKEJPT1RMT0FERVJf
TEFCRUxfU0laRSArIDEsIEdGUF9LRVJORUwpOworCWlmICghYnVmKQorCQlyZXR1cm4gLUVOT01F
TTsKKworCXNyYW1fcmVnX3dyaXRlKHdkZXYsIFdGWF9EQ0FfSE9TVF9TVEFUVVMsIEhPU1RfUkVB
RFkpOworCXJldCA9IHdhaXRfbmNwX3N0YXR1cyh3ZGV2LCBOQ1BfSU5GT19SRUFEWSk7CisJaWYg
KHJldCkKKwkJZ290byBlcnJvcjsKKworCXNyYW1fYnVmX3JlYWQod2RldiwgV0ZYX0JPT1RMT0FE
RVJfTEFCRUwsIGJ1ZiwgQk9PVExPQURFUl9MQUJFTF9TSVpFKTsKKwlidWZbQk9PVExPQURFUl9M
QUJFTF9TSVpFXSA9IDA7CisJZGV2X2RiZyh3ZGV2LT5kZXYsICJib290bG9hZGVyOiBcIiVzXCJc
biIsIGJ1Zik7CisKKwlzcmFtX2J1Zl9yZWFkKHdkZXYsIFdGWF9QVEVfSU5GTywgYnVmLCBQVEVf
SU5GT19TSVpFKTsKKwlyZXQgPSBnZXRfZmlybXdhcmUod2RldiwgYnVmW1BURV9JTkZPX0tFWVNF
VF9JRFhdLCAmZncsICZmd19vZmZzZXQpOworCWlmIChyZXQpCisJCWdvdG8gZXJyb3I7CisJaGVh
ZGVyX3NpemUgPSBmd19vZmZzZXQgKyBGV19TSUdOQVRVUkVfU0laRSArIEZXX0hBU0hfU0laRTsK
KworCXNyYW1fcmVnX3dyaXRlKHdkZXYsIFdGWF9EQ0FfSE9TVF9TVEFUVVMsIEhPU1RfSU5GT19S
RUFEKTsKKwlyZXQgPSB3YWl0X25jcF9zdGF0dXMod2RldiwgTkNQX1JFQURZKTsKKwlpZiAocmV0
KQorCQlnb3RvIGVycm9yOworCisJc3JhbV9yZWdfd3JpdGUod2RldiwgV0ZYX0ROTERfRklGTywg
MHhGRkZGRkZGRik7IC8qIEZpZm8gaW5pdCAqLworCXNyYW1fd3JpdGVfZG1hX3NhZmUod2Rldiwg
V0ZYX0RDQV9GV19WRVJTSU9OLCAiXHgwMVx4MDBceDAwXHgwMCIsCisJCQkgICAgRldfVkVSU0lP
Tl9TSVpFKTsKKwlzcmFtX3dyaXRlX2RtYV9zYWZlKHdkZXYsIFdGWF9EQ0FfRldfU0lHTkFUVVJF
LCBmdy0+ZGF0YSArIGZ3X29mZnNldCwKKwkJCSAgICBGV19TSUdOQVRVUkVfU0laRSk7CisJc3Jh
bV93cml0ZV9kbWFfc2FmZSh3ZGV2LCBXRlhfRENBX0ZXX0hBU0gsCisJCQkgICAgZnctPmRhdGEg
KyBmd19vZmZzZXQgKyBGV19TSUdOQVRVUkVfU0laRSwKKwkJCSAgICBGV19IQVNIX1NJWkUpOwor
CXNyYW1fcmVnX3dyaXRlKHdkZXYsIFdGWF9EQ0FfSU1BR0VfU0laRSwgZnctPnNpemUgLSBoZWFk
ZXJfc2l6ZSk7CisJc3JhbV9yZWdfd3JpdGUod2RldiwgV0ZYX0RDQV9IT1NUX1NUQVRVUywgSE9T
VF9VUExPQURfUEVORElORyk7CisJcmV0ID0gd2FpdF9uY3Bfc3RhdHVzKHdkZXYsIE5DUF9ET1dO
TE9BRF9QRU5ESU5HKTsKKwlpZiAocmV0KQorCQlnb3RvIGVycm9yOworCisJc3RhcnQgPSBrdGlt
ZV9nZXQoKTsKKwlyZXQgPSB1cGxvYWRfZmlybXdhcmUod2RldiwgZnctPmRhdGEgKyBoZWFkZXJf
c2l6ZSwKKwkJCSAgICAgIGZ3LT5zaXplIC0gaGVhZGVyX3NpemUpOworCWlmIChyZXQpCisJCWdv
dG8gZXJyb3I7CisJZGV2X2RiZyh3ZGV2LT5kZXYsICJmaXJtd2FyZSBsb2FkIGFmdGVyICVsbGR1
c1xuIiwKKwkJa3RpbWVfdXNfZGVsdGEoa3RpbWVfZ2V0KCksIHN0YXJ0KSk7CisKKwlzcmFtX3Jl
Z193cml0ZSh3ZGV2LCBXRlhfRENBX0hPU1RfU1RBVFVTLCBIT1NUX1VQTE9BRF9DT01QTEVURSk7
CisJcmV0ID0gd2FpdF9uY3Bfc3RhdHVzKHdkZXYsIE5DUF9BVVRIX09LKTsKKwkvKiBMZWdhY3kg
Uk9NIHN1cHBvcnQgKi8KKwlpZiAocmV0IDwgMCkKKwkJcmV0ID0gd2FpdF9uY3Bfc3RhdHVzKHdk
ZXYsIE5DUF9QVUJfS0VZX1JEWSk7CisJaWYgKHJldCA8IDApCisJCWdvdG8gZXJyb3I7CisJc3Jh
bV9yZWdfd3JpdGUod2RldiwgV0ZYX0RDQV9IT1NUX1NUQVRVUywgSE9TVF9PS19UT19KVU1QKTsK
KworZXJyb3I6CisJa2ZyZWUoYnVmKTsKKwlpZiAoZncpCisJCXJlbGVhc2VfZmlybXdhcmUoZncp
OworCWlmIChyZXQpCisJCXByaW50X2Jvb3Rfc3RhdHVzKHdkZXYpOworCXJldHVybiByZXQ7Cit9
CisKK3N0YXRpYyBpbnQgaW5pdF9ncHIoc3RydWN0IHdmeF9kZXYgKndkZXYpCit7CisJaW50IHJl
dCwgaTsKKwlzdGF0aWMgY29uc3Qgc3RydWN0IHsKKwkJaW50IGluZGV4OworCQl1MzIgdmFsdWU7
CisJfSBncHJfaW5pdFtdID0geworCQl7IDB4MDcsIDB4MjA4Nzc1IH0sCisJCXsgMHgwOCwgMHgy
RUMwMjAgfSwKKwkJeyAweDA5LCAweDNDM0MzQyB9LAorCQl7IDB4MEIsIDB4MzIyQzQ0IH0sCisJ
CXsgMHgwQywgMHhBMDY0OTcgfSwKKwl9OworCisJZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUo
Z3ByX2luaXQpOyBpKyspIHsKKwkJcmV0ID0gaWdwcl9yZWdfd3JpdGUod2RldiwgZ3ByX2luaXRb
aV0uaW5kZXgsCisJCQkJICAgICBncHJfaW5pdFtpXS52YWx1ZSk7CisJCWlmIChyZXQgPCAwKQor
CQkJcmV0dXJuIHJldDsKKwkJZGV2X2RiZyh3ZGV2LT5kZXYsICIgIGluZGV4ICUwMng6ICUwOHhc
biIsCisJCQlncHJfaW5pdFtpXS5pbmRleCwgZ3ByX2luaXRbaV0udmFsdWUpOworCX0KKwlyZXR1
cm4gMDsKK30KKworaW50IHdmeF9pbml0X2RldmljZShzdHJ1Y3Qgd2Z4X2RldiAqd2RldikKK3sK
KwlpbnQgcmV0OworCWludCBod19yZXZpc2lvbiwgaHdfdHlwZTsKKwlpbnQgd2FrZXVwX3RpbWVv
dXQgPSA1MDsgLyogbXMgKi8KKwlrdGltZV90IG5vdywgc3RhcnQ7CisJdTMyIHJlZzsKKworCXJl
ZyA9IENGR19ESVJFQ1RfQUNDRVNTX01PREUgfCBDRkdfQ1BVX1JFU0VUIHwgQ0ZHX0JZVEVfT1JE
RVJfQUJDRDsKKwlpZiAod2Rldi0+cGRhdGEudXNlX3Jpc2luZ19jbGspCisJCXJlZyB8PSBDRkdf
Q0xLX1JJU0VfRURHRTsKKwlyZXQgPSBjb25maWdfcmVnX3dyaXRlKHdkZXYsIHJlZyk7CisJaWYg
KHJldCA8IDApIHsKKwkJZGV2X2Vycih3ZGV2LT5kZXYsICJidXMgcmV0dXJuZWQgYW4gZXJyb3Ig
ZHVyaW5nIGZpcnN0IHdyaXRlIGFjY2Vzcy4gSG9zdCBjb25maWd1cmF0aW9uIGVycm9yP1xuIik7
CisJCXJldHVybiAtRUlPOworCX0KKworCXJldCA9IGNvbmZpZ19yZWdfcmVhZCh3ZGV2LCAmcmVn
KTsKKwlpZiAocmV0IDwgMCkgeworCQlkZXZfZXJyKHdkZXYtPmRldiwgImJ1cyByZXR1cm5lZCBh
biBlcnJvciBkdXJpbmcgZmlyc3QgcmVhZCBhY2Nlc3MuIEJ1cyBjb25maWd1cmF0aW9uIGVycm9y
P1xuIik7CisJCXJldHVybiAtRUlPOworCX0KKwlpZiAocmVnID09IDAgfHwgcmVnID09IH4wKSB7
CisJCWRldl9lcnIod2Rldi0+ZGV2LCAiY2hpcCBtdXRlLiBCdXMgY29uZmlndXJhdGlvbiBlcnJv
ciBvciBjaGlwIHdhc24ndCByZXNldD9cbiIpOworCQlyZXR1cm4gLUVJTzsKKwl9CisJZGV2X2Ri
Zyh3ZGV2LT5kZXYsICJpbml0aWFsIGNvbmZpZyByZWdpc3RlciB2YWx1ZTogJTA4eFxuIiwgcmVn
KTsKKworCWh3X3JldmlzaW9uID0gRklFTERfR0VUKENGR19ERVZJQ0VfSURfTUFKT1IsIHJlZyk7
CisJaWYgKGh3X3JldmlzaW9uID09IDApIHsKKwkJZGV2X2Vycih3ZGV2LT5kZXYsICJiYWQgaGFy
ZHdhcmUgcmV2aXNpb24gbnVtYmVyOiAlZFxuIiwKKwkJCWh3X3JldmlzaW9uKTsKKwkJcmV0dXJu
IC1FTk9ERVY7CisJfQorCWh3X3R5cGUgPSBGSUVMRF9HRVQoQ0ZHX0RFVklDRV9JRF9UWVBFLCBy
ZWcpOworCWlmIChod190eXBlID09IDEpIHsKKwkJZGV2X25vdGljZSh3ZGV2LT5kZXYsICJkZXZl
bG9wbWVudCBoYXJkd2FyZSBkZXRlY3RlZFxuIik7CisJCXdha2V1cF90aW1lb3V0ID0gMjAwMDsK
Kwl9CisKKwlyZXQgPSBpbml0X2dwcih3ZGV2KTsKKwlpZiAocmV0IDwgMCkKKwkJcmV0dXJuIHJl
dDsKKworCXJldCA9IGNvbnRyb2xfcmVnX3dyaXRlKHdkZXYsIENUUkxfV0xBTl9XQUtFVVApOwor
CWlmIChyZXQgPCAwKQorCQlyZXR1cm4gLUVJTzsKKwlzdGFydCA9IGt0aW1lX2dldCgpOworCWZv
ciAoOzspIHsKKwkJcmV0ID0gY29udHJvbF9yZWdfcmVhZCh3ZGV2LCAmcmVnKTsKKwkJbm93ID0g
a3RpbWVfZ2V0KCk7CisJCWlmIChyZWcgJiBDVFJMX1dMQU5fUkVBRFkpCisJCQlicmVhazsKKwkJ
aWYgKGt0aW1lX2FmdGVyKG5vdywga3RpbWVfYWRkX21zKHN0YXJ0LCB3YWtldXBfdGltZW91dCkp
KSB7CisJCQlkZXZfZXJyKHdkZXYtPmRldiwgImNoaXAgZGlkbid0IHdha2UgdXAuIENoaXAgd2Fz
bid0IHJlc2V0P1xuIik7CisJCQlyZXR1cm4gLUVUSU1FRE9VVDsKKwkJfQorCX0KKwlkZXZfZGJn
KHdkZXYtPmRldiwgImNoaXAgd2FrZSB1cCBhZnRlciAlbGxkdXNcbiIsCisJCWt0aW1lX3VzX2Rl
bHRhKG5vdywgc3RhcnQpKTsKKworCXJldCA9IGNvbmZpZ19yZWdfd3JpdGVfYml0cyh3ZGV2LCBD
RkdfQ1BVX1JFU0VULCAwKTsKKwlpZiAocmV0IDwgMCkKKwkJcmV0dXJuIHJldDsKKwlyZXQgPSBs
b2FkX2Zpcm13YXJlX3NlY3VyZSh3ZGV2KTsKKwlpZiAocmV0IDwgMCkKKwkJcmV0dXJuIHJldDsK
KwlyZXR1cm4gY29uZmlnX3JlZ193cml0ZV9iaXRzKHdkZXYsCisJCQkJICAgICBDRkdfRElSRUNU
X0FDQ0VTU19NT0RFIHwKKwkJCQkgICAgIENGR19JUlFfRU5BQkxFX0RBVEEgfAorCQkJCSAgICAg
Q0ZHX0lSUV9FTkFCTEVfV1JEWSwKKwkJCQkgICAgIENGR19JUlFfRU5BQkxFX0RBVEEpOworfQpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvd2lyZWxlc3Mvc2lsYWJzL3dmeC9md2lvLmggYi9kcml2
ZXJzL25ldC93aXJlbGVzcy9zaWxhYnMvd2Z4L2Z3aW8uaApuZXcgZmlsZSBtb2RlIDEwMDY0NApp
bmRleCAwMDAwMDAwMDAwMDAuLmVlZWE2MTIxMGVjYQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZl
cnMvbmV0L3dpcmVsZXNzL3NpbGFicy93ZngvZndpby5oCkBAIC0wLDAgKzEsMTUgQEAKKy8qIFNQ
RFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9ubHkgKi8KKy8qCisgKiBGaXJtd2FyZSBs
b2FkaW5nLgorICoKKyAqIENvcHlyaWdodCAoYykgMjAxNy0yMDE5LCBTaWxpY29uIExhYm9yYXRv
cmllcywgSW5jLgorICogQ29weXJpZ2h0IChjKSAyMDEwLCBTVC1Fcmljc3NvbgorICovCisjaWZu
ZGVmIFdGWF9GV0lPX0gKKyNkZWZpbmUgV0ZYX0ZXSU9fSAorCitzdHJ1Y3Qgd2Z4X2RldjsKKwor
aW50IHdmeF9pbml0X2RldmljZShzdHJ1Y3Qgd2Z4X2RldiAqd2Rldik7CisKKyNlbmRpZgotLSAK
Mi4zMy4wCgo=
