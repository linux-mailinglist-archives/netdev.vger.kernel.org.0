Return-Path: <netdev-owner@vger.kernel.org>
X-Original-To: lists+netdev@lfdr.de
Delivered-To: lists+netdev@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id A14BC19BE6
	for <lists+netdev@lfdr.de>; Fri, 10 May 2019 12:50:21 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1727254AbfEJKuO (ORCPT <rfc822;lists+netdev@lfdr.de>);
        Fri, 10 May 2019 06:50:14 -0400
Received: from mail-eopbgr20060.outbound.protection.outlook.com ([40.107.2.60]:55334
        "EHLO EUR02-VE1-obe.outbound.protection.outlook.com"
        rhost-flags-OK-OK-OK-FAIL) by vger.kernel.org with ESMTP
        id S1727147AbfEJKuN (ORCPT <rfc822;netdev@vger.kernel.org>);
        Fri, 10 May 2019 06:50:13 -0400
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=nxp.com; s=selector2;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=Anhh3Kz0kgLVVE/zACb3otdK2OzHFdmH+jIpFl5sQTo=;
 b=bsqjhMkKlCRanf52nUnNq6BRIMmSKWIQZD8z7iL6TMFTOeiG1lyk6mVvwW3n5w0s/zngiavgi3Otdg31hiblShldIUAEC4sCK2HmhsI+AOd35D9OfvHBAADQaPMzTxDN/FsiZtYfZP2QNuic+K8Yu7RVW7LkekitiWiw9l01S+k=
Received: from DB7PR04MB4618.eurprd04.prod.outlook.com (52.135.138.152) by
 DB7PR04MB5994.eurprd04.prod.outlook.com (20.178.107.83) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.1878.21; Fri, 10 May 2019 10:50:05 +0000
Received: from DB7PR04MB4618.eurprd04.prod.outlook.com
 ([fe80::dcff:11e1:ab70:bb81]) by DB7PR04MB4618.eurprd04.prod.outlook.com
 ([fe80::dcff:11e1:ab70:bb81%5]) with mapi id 15.20.1878.022; Fri, 10 May 2019
 10:50:05 +0000
From:   Joakim Zhang <qiangqing.zhang@nxp.com>
To:     "mkl@pengutronix.de" <mkl@pengutronix.de>,
        "linux-can@vger.kernel.org" <linux-can@vger.kernel.org>
CC:     dl-linux-imx <linux-imx@nxp.com>,
        "wg@grandegger.com" <wg@grandegger.com>,
        "netdev@vger.kernel.org" <netdev@vger.kernel.org>,
        Stefan-gabriel Mirea <stefan-gabriel.mirea@nxp.com>,
        Aisheng Dong <aisheng.dong@nxp.com>,
        Joakim Zhang <qiangqing.zhang@nxp.com>
Subject: [PATCH V3 4/7] can: flexcan: improve bittiming setting for fd mode
Thread-Topic: [PATCH V3 4/7] can: flexcan: improve bittiming setting for fd
 mode
Thread-Index: AQHVBx4gCY2Wf0uNNkiWe42zotJ/LA==
Date:   Fri, 10 May 2019 10:50:04 +0000
Message-ID: <20190510104639.15170-5-qiangqing.zhang@nxp.com>
References: <20190510104639.15170-1-qiangqing.zhang@nxp.com>
In-Reply-To: <20190510104639.15170-1-qiangqing.zhang@nxp.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-mailer: git-send-email 2.17.1
x-clientproxiedby: SG2PR01CA0105.apcprd01.prod.exchangelabs.com
 (2603:1096:3:15::31) To DB7PR04MB4618.eurprd04.prod.outlook.com
 (2603:10a6:5:36::24)
authentication-results: spf=none (sender IP is )
 smtp.mailfrom=qiangqing.zhang@nxp.com; 
x-ms-exchange-messagesentrepresentingtype: 1
x-originating-ip: [119.31.174.71]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: c0cb80c5-33ad-4c52-39de-08d6d5354296
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0;PCL:0;RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600141)(711020)(4605104)(4618075)(2017052603328)(7193020);SRVR:DB7PR04MB5994;
x-ms-traffictypediagnostic: DB7PR04MB5994:
x-microsoft-antispam-prvs: <DB7PR04MB5994BEBC2FAF96C823824DD3E60C0@DB7PR04MB5994.eurprd04.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:605;
x-forefront-prvs: 0033AAD26D
x-forefront-antispam-report: SFV:NSPM;SFS:(10009020)(346002)(39860400002)(396003)(136003)(376002)(366004)(189003)(199004)(54534003)(14454004)(11346002)(478600001)(66066001)(4326008)(66556008)(64756008)(66446008)(53936002)(66476007)(8936002)(81166006)(6436002)(81156014)(25786009)(8676002)(1076003)(6486002)(2501003)(6116002)(3846002)(186003)(2906002)(50226002)(305945005)(73956011)(14444005)(71190400001)(6512007)(71200400001)(446003)(66946007)(5660300002)(54906003)(2616005)(476003)(36756003)(86362001)(26005)(110136005)(7736002)(76176011)(102836004)(386003)(68736007)(99286004)(52116002)(6506007)(486006)(256004)(316002);DIR:OUT;SFP:1101;SCL:1;SRVR:DB7PR04MB5994;H:DB7PR04MB4618.eurprd04.prod.outlook.com;FPR:;SPF:None;LANG:en;PTR:InfoNoRecords;MX:1;A:1;
received-spf: None (protection.outlook.com: nxp.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: zXgn7p+T8Gwgcn1xW353oDgORGLDgEJjjDzmGKylP7LSlPiM3bGxjTXrP/1vpxOT700jHzqI9agMFoTvirplk6BsYivka54onVy3Q8IwkbYWFWaR54zeHTqAI5m4Otbq08490RUd3abJtl0ActYpu9AvNwgtmhnhg3+B10iO+Lab3lg5kjcW+5BkvBBpCIVSIE2m2Oa8xgv+k2JDwsuP9E07+XwwTaJERTglFapMbjct8HnchcwwNwOddeE4r+M9XBkX9nF08fQi+aR4wLuMQsHxwTDndWsP2mTsueY4Ff+bWWW2VwBweI/8x5Ic6vGa0NliAkxYCmNqsGZeYe4efVQyKn1tza59FqIOjQu5eSqoOBCPycmfqLEi5SGeOzxke92wEr8e0ar8a/PSveqnuyL1kct+U3GPRRDdUDocyLQ=
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: nxp.com
X-MS-Exchange-CrossTenant-Network-Message-Id: c0cb80c5-33ad-4c52-39de-08d6d5354296
X-MS-Exchange-CrossTenant-originalarrivaltime: 10 May 2019 10:50:04.9740
 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 686ea1d3-bc2b-4c6f-a92c-d99c5c301635
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DB7PR04MB5994
Sender: netdev-owner@vger.kernel.org
Precedence: bulk
List-ID: <netdev.vger.kernel.org>
X-Mailing-List: netdev@vger.kernel.org

RnJvbTogRG9uZyBBaXNoZW5nIDxhaXNoZW5nLmRvbmdAbnhwLmNvbT4NCg0KQml0IHRpbWluZyBh
bHdheXMgc2V0IGluIENCVCByZWdpc3RlciBvdGhlciB0aGFuIENUUkwxIHJlZ2lzdGVyIHdoZW4g
Q0FORkQNCnN1cHBvcnRzIEJSUywgaXQgd2lsbCBleHRlbmQgdGhlIHJhbmdlIG9mIGFsbCBDQU4g
Yml0IHRpbWluZyB2YXJpYWJsZXMNCihQUkVTRElWLCBQUk9QU0VHLCBQU0VHMSwgUFNFRzIgYW5k
IFJKVyksIHdoaWNoIHdpbGwgaW1wcm92ZSB0aGUgYml0DQp0aW1pbmcgYWNjdXJhY3kuDQoNClNp
Z25lZC1vZmYtYnk6IERvbmcgQWlzaGVuZyA8YWlzaGVuZy5kb25nQG54cC5jb20+DQpTaWduZWQt
b2ZmLWJ5OiBKb2FraW0gWmhhbmcgPHFpYW5ncWluZy56aGFuZ0BueHAuY29tPg0KDQpDaGFuZ2VM
b2c6DQotLS0tLS0tLS0tDQpWMS0+VjI6DQoJKk5vbmUNClYyLT5WMzoNCgkqY29ycmVjdCB0aGUg
cmFuZ2Ugb2YgZmxleGNhbl9mZF9iaXR0aW1pbmdfY29uc3QgdmFyaWFibGUNCi0tLQ0KIGRyaXZl
cnMvbmV0L2Nhbi9mbGV4Y2FuLmMgfCAxMzEgKysrKysrKysrKysrKysrKysrKysrKysrKysrKy0t
LS0tLS0tLS0NCiAxIGZpbGUgY2hhbmdlZCwgOTYgaW5zZXJ0aW9ucygrKSwgMzUgZGVsZXRpb25z
KC0pDQoNCmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9jYW4vZmxleGNhbi5jIGIvZHJpdmVycy9u
ZXQvY2FuL2ZsZXhjYW4uYw0KaW5kZXggNjYyYzhjOGYxOTFiLi5jNDVjOTI5NDgxOTUgMTAwNjQ0
DQotLS0gYS9kcml2ZXJzL25ldC9jYW4vZmxleGNhbi5jDQorKysgYi9kcml2ZXJzL25ldC9jYW4v
ZmxleGNhbi5jDQpAQCAtMTM4LDYgKzEzOCwxNCBAQA0KIAkgRkxFWENBTl9FU1JfQk9GRl9JTlQg
fCBGTEVYQ0FOX0VTUl9FUlJfSU5UIHwgXA0KIAkgRkxFWENBTl9FU1JfV0FLX0lOVCkNCiANCisv
KiBGTEVYQ0FOIEJpdCBUaW1pbmcgcmVnaXN0ZXIgKENCVCkgYml0cyAqLw0KKyNkZWZpbmUgRkxF
WENBTl9DQlRfQlRGCQkgICAgICAgIEJJVCgzMSkNCisjZGVmaW5lIEZMRVhDQU5fQ0JUX0VQUkVT
RElWKHgpCSAgICAgICAgKCgoeCkgJiAweDNmZikgPDwgMjEpDQorI2RlZmluZSBGTEVYQ0FOX0NC
VF9FUkpXKHgpCQkoKCh4KSAmIDB4MWYpIDw8IDE2KQ0KKyNkZWZpbmUgRkxFWENBTl9DQlRfRVBS
T1BTRUcoeCkJICAgICAgICAoKCh4KSAmIDB4M2YpIDw8IDEwKQ0KKyNkZWZpbmUgRkxFWENBTl9D
QlRfRVBTRUcxKHgpCQkoKCh4KSAmIDB4MWYpIDw8IDUpDQorI2RlZmluZSBGTEVYQ0FOX0NCVF9F
UFNFRzIoeCkJCSgoeCkgJiAweDFmKQ0KKw0KIC8qIEZMRVhDQU4gRkQgY29udHJvbCByZWdpc3Rl
ciAoRkRDVFJMKSBiaXRzICovDQogI2RlZmluZSBGTEVYQ0FOX0ZEQ1RSTF9GRFJBVEUJCUJJVCgz
MSkNCiAjZGVmaW5lIEZMRVhDQU5fRkRDVFJMX01CRFNSMyh4KQkoKCh4KSAmIDB4MykgPDwgMjUp
DQpAQCAtMjQ1LDcgKzI1Myw4IEBAIHN0cnVjdCBmbGV4Y2FuX3JlZ3Mgew0KIAl1MzIgY3JjcjsJ
CS8qIDB4NDQgKi8NCiAJdTMyIHJ4ZmdtYXNrOwkJLyogMHg0OCAqLw0KIAl1MzIgcnhmaXI7CQkv
KiAweDRjICovDQotCXUzMiBfcmVzZXJ2ZWQzWzEyXTsJLyogMHg1MCAqLw0KKwl1MzIgY2J0OyAg
ICAgICAgICAgICAgICAvKiAweDUwICovDQorCXUzMiBfcmVzZXJ2ZWQzWzExXTsgICAgIC8qIDB4
NTQgKi8NCiAJdTggbWJbMl1bNTEyXTsJCS8qIDB4ODAgKi8NCiAJLyogRklGTy1tb2RlOg0KIAkg
KgkJCU1CDQpAQCAtMzYwLDYgKzM2OSwxOCBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGNhbl9iaXR0
aW1pbmdfY29uc3QgZmxleGNhbl9iaXR0aW1pbmdfY29uc3QgPSB7DQogCS5icnBfaW5jID0gMSwN
CiB9Ow0KIA0KK3N0YXRpYyBjb25zdCBzdHJ1Y3QgY2FuX2JpdHRpbWluZ19jb25zdCBmbGV4Y2Fu
X2ZkX2JpdHRpbWluZ19jb25zdCA9IHsNCisJLm5hbWUgPSBEUlZfTkFNRSwNCisJLnRzZWcxX21p
biA9IDIsDQorCS50c2VnMV9tYXggPSA2NCwNCisJLnRzZWcyX21pbiA9IDIsDQorCS50c2VnMl9t
YXggPSAzMiwNCisJLnNqd19tYXggPSAzMiwNCisJLmJycF9taW4gPSAxLA0KKwkuYnJwX21heCA9
IDEwMjQsDQorCS5icnBfaW5jID0gMSwNCit9Ow0KKw0KIHN0YXRpYyBjb25zdCBzdHJ1Y3QgY2Fu
X2JpdHRpbWluZ19jb25zdCBmbGV4Y2FuX2ZkX2RhdGFfYml0dGltaW5nX2NvbnN0ID0gew0KIAku
bmFtZSA9IERSVl9OQU1FLA0KIAkudHNlZzFfbWluID0gMiwNCkBAIC0xMDQ4LDI0ICsxMDY5LDEw
IEBAIHN0YXRpYyB2b2lkIGZsZXhjYW5fc2V0X2JpdHRpbWluZyhzdHJ1Y3QgbmV0X2RldmljZSAq
ZGV2KQ0KIAljb25zdCBzdHJ1Y3QgY2FuX2JpdHRpbWluZyAqYnQgPSAmcHJpdi0+Y2FuLmJpdHRp
bWluZzsNCiAJY29uc3Qgc3RydWN0IGNhbl9iaXR0aW1pbmcgKmRidCA9ICZwcml2LT5jYW4uZGF0
YV9iaXR0aW1pbmc7DQogCXN0cnVjdCBmbGV4Y2FuX3JlZ3MgX19pb21lbSAqcmVncyA9IHByaXYt
PnJlZ3M7DQotCXUzMiByZWcsIHJlZ19mZGNidDsNCisJdTMyIHJlZywgcmVnX2NidCwgcmVnX2Zk
Y2J0Ow0KIA0KIAlyZWcgPSBwcml2LT5yZWFkKCZyZWdzLT5jdHJsKTsNCi0JcmVnICY9IH4oRkxF
WENBTl9DVFJMX1BSRVNESVYoMHhmZikgfA0KLQkJIEZMRVhDQU5fQ1RSTF9SSlcoMHgzKSB8DQot
CQkgRkxFWENBTl9DVFJMX1BTRUcxKDB4NykgfA0KLQkJIEZMRVhDQU5fQ1RSTF9QU0VHMigweDcp
IHwNCi0JCSBGTEVYQ0FOX0NUUkxfUFJPUFNFRygweDcpIHwNCi0JCSBGTEVYQ0FOX0NUUkxfTFBC
IHwNCi0JCSBGTEVYQ0FOX0NUUkxfU01QIHwNCi0JCSBGTEVYQ0FOX0NUUkxfTE9NKTsNCi0NCi0J
cmVnIHw9IEZMRVhDQU5fQ1RSTF9QUkVTRElWKGJ0LT5icnAgLSAxKSB8DQotCQlGTEVYQ0FOX0NU
UkxfUFNFRzEoYnQtPnBoYXNlX3NlZzEgLSAxKSB8DQotCQlGTEVYQ0FOX0NUUkxfUFNFRzIoYnQt
PnBoYXNlX3NlZzIgLSAxKSB8DQotCQlGTEVYQ0FOX0NUUkxfUkpXKGJ0LT5zancgLSAxKSB8DQot
CQlGTEVYQ0FOX0NUUkxfUFJPUFNFRyhidC0+cHJvcF9zZWcgLSAxKTsNCi0NCisJcmVnICY9IH4o
RkxFWENBTl9DVFJMX0xQQiB8IEZMRVhDQU5fQ1RSTF9TTVAgfCBGTEVYQ0FOX0NUUkxfTE9NKTsN
CiAJaWYgKHByaXYtPmNhbi5jdHJsbW9kZSAmIENBTl9DVFJMTU9ERV9MT09QQkFDSykNCiAJCXJl
ZyB8PSBGTEVYQ0FOX0NUUkxfTFBCOw0KIAlpZiAocHJpdi0+Y2FuLmN0cmxtb2RlICYgQ0FOX0NU
UkxNT0RFX0xJU1RFTk9OTFkpDQpAQCAtMTA3NiwyNSArMTA4Myw3OCBAQCBzdGF0aWMgdm9pZCBm
bGV4Y2FuX3NldF9iaXR0aW1pbmcoc3RydWN0IG5ldF9kZXZpY2UgKmRldikNCiAJbmV0ZGV2X2Ri
ZyhkZXYsICJ3cml0aW5nIGN0cmw9MHglMDh4XG4iLCByZWcpOw0KIAlwcml2LT53cml0ZShyZWcs
ICZyZWdzLT5jdHJsKTsNCiANCi0JaWYgKHByaXYtPmNhbi5jdHJsbW9kZSAmIENBTl9DVFJMTU9E
RV9GRCkgew0KLQkJcmVnX2ZkY2J0ID0gcHJpdi0+cmVhZCgmcmVncy0+ZmRjYnQpOw0KLQkJcmVn
X2ZkY2J0ICY9IH4oRkxFWENBTl9GRENCVF9GUFJFU0RJVigweDNmZikgfA0KLQkJCSAgICAgICBG
TEVYQ0FOX0ZEQ0JUX0ZQU0VHMSgweDA3KSB8DQotCQkJICAgICAgIEZMRVhDQU5fRkRDQlRfRlBT
RUcyKDB4MDcpIHwNCi0JCQkgICAgICAgRkxFWENBTl9GRENCVF9GUkpXKDB4MDcpIHwNCi0JCQkg
ICAgICAgRkxFWENBTl9GRENCVF9GUFJPUFNFRygweDFmKSk7DQotDQotCQlyZWdfZmRjYnQgPSBG
TEVYQ0FOX0ZEQ0JUX0ZQUkVTRElWKGRidC0+YnJwIC0gMSkgfA0KLQkJCQlGTEVYQ0FOX0ZEQ0JU
X0ZQU0VHMShkYnQtPnBoYXNlX3NlZzEgLSAxKSB8DQotCQkJCUZMRVhDQU5fRkRDQlRfRlBTRUcy
KGRidC0+cGhhc2Vfc2VnMiAtIDEpIHwNCi0JCQkJRkxFWENBTl9GRENCVF9GUkpXKGRidC0+c2p3
IC0gMSkgfA0KLQkJCQlGTEVYQ0FOX0ZEQ0JUX0ZQUk9QU0VHKGRidC0+cHJvcF9zZWcpOw0KLQkJ
cHJpdi0+d3JpdGUocmVnX2ZkY2J0LCAmcmVncy0+ZmRjYnQpOw0KLQl9DQorCWlmIChwcml2LT5j
YW4uY3RybG1vZGVfc3VwcG9ydGVkICYgQ0FOX0NUUkxNT0RFX0ZEKSB7DQorCQlyZWdfY2J0ID0g
cHJpdi0+cmVhZCgmcmVncy0+Y2J0KTsNCisJCXJlZ19jYnQgJj0gfihGTEVYQ0FOX0NCVF9FUFJF
U0RJVigweDNmZikgfA0KKwkJCSAgICAgRkxFWENBTl9DQlRfRVBTRUcxKDB4MWYpIHwNCisJCQkg
ICAgIEZMRVhDQU5fQ0JUX0VQU0VHMigweDFmKSB8DQorCQkJICAgICBGTEVYQ0FOX0NCVF9FUkpX
KDB4MWYpIHwNCisJCQkgICAgIEZMRVhDQU5fQ0JUX0VQUk9QU0VHKDB4M2YpIHwNCisJCQkgICAg
IEZMRVhDQU5fQ0JUX0JURik7DQorDQorCQlyZWdfY2J0ID0gRkxFWENBTl9DQlRfRVBSRVNESVYo
YnQtPmJycCAtIDEpIHwNCisJCQkJRkxFWENBTl9DQlRfRVBTRUcxKGJ0LT5waGFzZV9zZWcxIC0g
MSkgfA0KKwkJCQlGTEVYQ0FOX0NCVF9FUFNFRzIoYnQtPnBoYXNlX3NlZzIgLSAxKSB8DQorCQkJ
CUZMRVhDQU5fQ0JUX0VSSlcoYnQtPnNqdyAtIDEpIHwNCisJCQkJRkxFWENBTl9DQlRfRVBST1BT
RUcoYnQtPnByb3Bfc2VnIC0gMSkgfA0KKwkJCQlGTEVYQ0FOX0NCVF9CVEY7DQorCQlwcml2LT53
cml0ZShyZWdfY2J0LCAmcmVncy0+Y2J0KTsNCisNCisJCW5ldGRldl9kYmcoZGV2LCAiYnQ6IHBy
ZWRpdiAlZCBzZWcxICVkIHNlZzIgJWQgcmp3ICVkIHByb3BzZWcgJWRcbiIsDQorCQkJICAgYnQt
PmJycCAtIDEsIGJ0LT5waGFzZV9zZWcxIC0gMSwgYnQtPnBoYXNlX3NlZzIgLSAxLA0KKwkJCSAg
IGJ0LT5zancgLSAxLCBidC0+cHJvcF9zZWcgLSAxKTsNCiANCi0JLyogcHJpbnQgY2hpcCBzdGF0
dXMgKi8NCi0JbmV0ZGV2X2RiZyhkZXYsICIlczogbWNyPTB4JTA4eCBjdHJsPTB4JTA4eFxuIiwg
X19mdW5jX18sDQotCQkgICBwcml2LT5yZWFkKCZyZWdzLT5tY3IpLCBwcml2LT5yZWFkKCZyZWdz
LT5jdHJsKSk7DQorCQlpZiAocHJpdi0+Y2FuLmN0cmxtb2RlICYgQ0FOX0NUUkxNT0RFX0ZEKSB7
DQorCQkJcmVnX2ZkY2J0ID0gcHJpdi0+cmVhZCgmcmVncy0+ZmRjYnQpOw0KKwkJCXJlZ19mZGNi
dCAmPSB+KEZMRVhDQU5fRkRDQlRfRlBSRVNESVYoMHgzZmYpIHwNCisJCQkJICAgICAgIEZMRVhD
QU5fRkRDQlRfRlBTRUcxKDB4MDcpIHwNCisJCQkJICAgICAgIEZMRVhDQU5fRkRDQlRfRlBTRUcy
KDB4MDcpIHwNCisJCQkJICAgICAgIEZMRVhDQU5fRkRDQlRfRlJKVygweDA3KSB8DQorCQkJCSAg
ICAgICBGTEVYQ0FOX0ZEQ0JUX0ZQUk9QU0VHKDB4MWYpKTsNCisNCisJCQlyZWdfZmRjYnQgPSBG
TEVYQ0FOX0ZEQ0JUX0ZQUkVTRElWKGRidC0+YnJwIC0gMSkgfA0KKwkJCQkJRkxFWENBTl9GRENC
VF9GUFNFRzEoZGJ0LT5waGFzZV9zZWcxIC0gMSkgfA0KKwkJCQkJRkxFWENBTl9GRENCVF9GUFNF
RzIoZGJ0LT5waGFzZV9zZWcyIC0gMSkgfA0KKwkJCQkJRkxFWENBTl9GRENCVF9GUkpXKGRidC0+
c2p3IC0gMSkgfA0KKwkJCQkJRkxFWENBTl9GRENCVF9GUFJPUFNFRyhkYnQtPnByb3Bfc2VnKTsN
CisJCQlwcml2LT53cml0ZShyZWdfZmRjYnQsICZyZWdzLT5mZGNidCk7DQorDQorCQkJaWYgKGJ0
LT5icnAgIT0gZGJ0LT5icnApDQorCQkJCW5ldGRldl93YXJuKGRldiwgInByZXNjYWxlciBvZiBi
aXRyYXRlIGFuZCBkYml0cmF0ZSBub3QgdGhlIHNhbWUsIG1heSByaXNrIGVycm9ycyB3aGVuIHRy
YW5zZmVyIENBTiBGRCBmb3JtYXQgZnJhbWVzIHdpdGggQml0IFJhdGUgU3dpdGNoXG4iKTsNCisN
CisJCQluZXRkZXZfZGJnKGRldiwgImZkYnQ6IHByZWRpdiAlZCBzZWcxICVkIHNlZzIgJWQgcmp3
ICVkIHByb3BzZWcgJWRcbiIsDQorCQkJCSAgIGRidC0+YnJwIC0gMSwgZGJ0LT5waGFzZV9zZWcx
IC0gMSwgZGJ0LT5waGFzZV9zZWcyIC0gMSwNCisJCQkJICAgZGJ0LT5zancgLSAxLCBkYnQtPnBy
b3Bfc2VnKTsNCisNCisJCQluZXRkZXZfZGJnKGRldiwgIiVzOiBtY3I9MHglMDh4IGN0cmw9MHgl
MDh4IGNidD0weCUwOHggZmRjYnQ9MHglMDh4XG4iLA0KKwkJCQkgICBfX2Z1bmNfXywgcHJpdi0+
cmVhZCgmcmVncy0+bWNyKSwNCisJCQkJICAgcHJpdi0+cmVhZCgmcmVncy0+Y3RybCksDQorCQkJ
CSAgIHByaXYtPnJlYWQoJnJlZ3MtPmNidCksDQorCQkJCSAgIHByaXYtPnJlYWQoJnJlZ3MtPmZk
Y2J0KSk7DQorCQl9DQorCX0gZWxzZSB7DQorCQlyZWcgPSBwcml2LT5yZWFkKCZyZWdzLT5jdHJs
KTsNCisJCXJlZyAmPSB+KEZMRVhDQU5fQ1RSTF9QUkVTRElWKDB4ZmYpIHwNCisJCQkgRkxFWENB
Tl9DVFJMX1JKVygweDMpIHwNCisJCQkgRkxFWENBTl9DVFJMX1BTRUcxKDB4NykgfA0KKwkJCSBG
TEVYQ0FOX0NUUkxfUFNFRzIoMHg3KSB8DQorCQkJIEZMRVhDQU5fQ1RSTF9QUk9QU0VHKDB4Nykp
Ow0KKw0KKwkJcmVnIHw9IEZMRVhDQU5fQ1RSTF9QUkVTRElWKGJ0LT5icnAgLSAxKSB8DQorCQkJ
RkxFWENBTl9DVFJMX1BTRUcxKGJ0LT5waGFzZV9zZWcxIC0gMSkgfA0KKwkJCUZMRVhDQU5fQ1RS
TF9QU0VHMihidC0+cGhhc2Vfc2VnMiAtIDEpIHwNCisJCQlGTEVYQ0FOX0NUUkxfUkpXKGJ0LT5z
ancgLSAxKSB8DQorCQkJRkxFWENBTl9DVFJMX1BST1BTRUcoYnQtPnByb3Bfc2VnIC0gMSk7DQor
CQlwcml2LT53cml0ZShyZWcsICZyZWdzLT5jdHJsKTsNCisNCisJCW5ldGRldl9kYmcoZGV2LCAi
YnQ6IHByZWRpdiAlZCBzZWcxICVkIHNlZzIgJWQgcmp3ICVkIHByb3BzZWcgJWRcbiIsDQorCQkJ
ICAgYnQtPmJycCAtIDEsIGJ0LT5waGFzZV9zZWcxIC0gMSwgYnQtPnBoYXNlX3NlZzIgLSAxLA0K
KwkJCSAgIGJ0LT5zancgLSAxLCBidC0+cHJvcF9zZWcgLSAxKTsNCisNCisJCS8qIHByaW50IGNo
aXAgc3RhdHVzICovDQorCQluZXRkZXZfZGJnKGRldiwgIiVzOiBtY3I9MHglMDh4IGN0cmw9MHgl
MDh4XG4iLCBfX2Z1bmNfXywNCisJCQkgICBwcml2LT5yZWFkKCZyZWdzLT5tY3IpLCBwcml2LT5y
ZWFkKCZyZWdzLT5jdHJsKSk7DQorCX0NCiB9DQogDQogLyogZmxleGNhbl9jaGlwX3N0YXJ0DQpA
QCAtMTcxMyw2ICsxNzczLDcgQEAgc3RhdGljIGludCBmbGV4Y2FuX3Byb2JlKHN0cnVjdCBwbGF0
Zm9ybV9kZXZpY2UgKnBkZXYpDQogCWlmIChwcml2LT5kZXZ0eXBlX2RhdGEtPnF1aXJrcyAmIEZM
RVhDQU5fUVVJUktfVElNRVNUQU1QX1NVUFBPUlRfRkQpIHsNCiAJCWlmIChwcml2LT5kZXZ0eXBl
X2RhdGEtPnF1aXJrcyAmIEZMRVhDQU5fUVVJUktfVVNFX09GRl9USU1FU1RBTVApIHsNCiAJCQlw
cml2LT5jYW4uY3RybG1vZGVfc3VwcG9ydGVkIHw9IENBTl9DVFJMTU9ERV9GRDsNCisJCQlwcml2
LT5jYW4uYml0dGltaW5nX2NvbnN0ID0gJmZsZXhjYW5fZmRfYml0dGltaW5nX2NvbnN0Ow0KIAkJ
CXByaXYtPmNhbi5kYXRhX2JpdHRpbWluZ19jb25zdCA9ICZmbGV4Y2FuX2ZkX2RhdGFfYml0dGlt
aW5nX2NvbnN0Ow0KIAkJfSBlbHNlIHsNCiAJCQlkZXZfZXJyKCZwZGV2LT5kZXYsICJjYW4gZmQg
bW9kZSBjYW4ndCB3b3JrIG9uIGZpZm8gbW9kZVxuIik7DQotLSANCjIuMTcuMQ0KDQo=
