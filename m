Return-Path: <netdev-owner@vger.kernel.org>
X-Original-To: lists+netdev@lfdr.de
Delivered-To: lists+netdev@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id E0D0C376423
	for <lists+netdev@lfdr.de>; Fri,  7 May 2021 12:59:19 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S234960AbhEGLAQ (ORCPT <rfc822;lists+netdev@lfdr.de>);
        Fri, 7 May 2021 07:00:16 -0400
Received: from mail-vi1eur05on2078.outbound.protection.outlook.com ([40.107.21.78]:63232
        "EHLO EUR05-VI1-obe.outbound.protection.outlook.com"
        rhost-flags-OK-OK-OK-FAIL) by vger.kernel.org with ESMTP
        id S230311AbhEGLAP (ORCPT <rfc822;netdev@vger.kernel.org>);
        Fri, 7 May 2021 07:00:15 -0400
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=URKA9CvAu76QiKMXr9NI8vG+D13tx7w+TWP0em0+/uHe3tQbejVIgX75zoydVpLakUBi18cFTaPxpf/fnbC1bi8BeAxL/j/2jWNmUETQOgjEjVxcHRZy5uVJgJXO2Xc5QQSdKJIldhoJUrGzW5K/OKDivYgE8UHO1Z7qiRLonevZ5KjsiY+LMnnkQbJiKPEtLagIkMOUKBmUnR6BDEbIHu1SylbdsZgB8n+3tcPiKd+BMA7Emz5rFjtTVsZYV2fHI/96Pca6Fq2+Kgoe2s0YkIDlN2vJCdDr3hilCYIoTOyItgOiWt8J5l180WzP5iJYcZfSLhZZ/TyQVf/7AmmJlw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com;
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=P+r/pBoEWavKmrRgrlit9qrinsPolOOw9i9zkqCbsfc=;
 b=ewUefUxmM963r0vU/5l5eHd7SHL7LkKYoeiNtySdT/Px/NqaquLxHZc/FVFZAqNTPakG8sUme23hfFmDtZMLYFjTp+wq8AJHBXuSIZGw9BRG5SkWxj56g01g8bwxg+IrDKWbKcbpfZQABSGlUCRDH15SLCQjTd0RUhpR3s/nLYOwcz2YYGyJpKaEJ4/bdJnpeJcf0SHOTNO1kvfOgpYTtDKmeup5+CGlJIdBBhOBmuqW2f381NiT4mSTwiv+r7gqNveq2fZhsPdlJyb3eiRay+RUd+He9N3IWnx/hLOBHPJilcU8oNtC7P9UrfTFqYZS30JlWNBu3rY+WmBPlBfhwg==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=nxp.com; dmarc=pass action=none header.from=nxp.com; dkim=pass
 header.d=nxp.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=nxp.com; s=selector2;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=P+r/pBoEWavKmrRgrlit9qrinsPolOOw9i9zkqCbsfc=;
 b=CUSsW2vRKh6wA3x+F+fn4Z6zjW3ScX5E53asLIkMMdKNQaXiZqXfO0tVan6t7YxFoI3CSAu98JKlWvGIuX9eqWh40KKZs+l71bowxCMjanNmK1uN06pj+vTem/L5Vc98RWOA5ciZy/2vLI52esuLOD2uGsFNDpKYOmvZbyG8ChA=
Received: from DB8PR04MB6795.eurprd04.prod.outlook.com (2603:10a6:10:fa::15)
 by DBBPR04MB8027.eurprd04.prod.outlook.com (2603:10a6:10:1e6::9) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.4108.25; Fri, 7 May
 2021 10:59:12 +0000
Received: from DB8PR04MB6795.eurprd04.prod.outlook.com
 ([fe80::3400:b139:f681:c8cf]) by DB8PR04MB6795.eurprd04.prod.outlook.com
 ([fe80::3400:b139:f681:c8cf%9]) with mapi id 15.20.4108.028; Fri, 7 May 2021
 10:59:12 +0000
From:   Joakim Zhang <qiangqing.zhang@nxp.com>
To:     Jakub Kicinski <kuba@kernel.org>
CC:     "peppe.cavallaro@st.com" <peppe.cavallaro@st.com>,
        "alexandre.torgue@st.com" <alexandre.torgue@st.com>,
        "joabreu@synopsys.com" <joabreu@synopsys.com>,
        "davem@davemloft.net" <davem@davemloft.net>,
        "f.fainelli@gmail.com" <f.fainelli@gmail.com>,
        "andrew@lunn.ch" <andrew@lunn.ch>,
        "Jisheng.Zhang@synaptics.com" <Jisheng.Zhang@synaptics.com>,
        "netdev@vger.kernel.org" <netdev@vger.kernel.org>,
        dl-linux-imx <linux-imx@nxp.com>
Subject: RE: [PATCH V4 net] net: stmmac: Fix MAC WoL not working if PHY does
 not support WoL
Thread-Topic: [PATCH V4 net] net: stmmac: Fix MAC WoL not working if PHY does
 not support WoL
Thread-Index: AQHXQjWcfaoxZiel30uahuuat4Vm2arXMuUAgAAHusA=
Date:   Fri, 7 May 2021 10:59:12 +0000
Message-ID: <DB8PR04MB6795107C0B25B2E199FE0A0EE6579@DB8PR04MB6795.eurprd04.prod.outlook.com>
References: <20210506050658.9624-1-qiangqing.zhang@nxp.com>
 <20210506175522.49a2ad5b@kicinski-fedora-pc1c0hjn.dhcp.thefacebook.com>
In-Reply-To: <20210506175522.49a2ad5b@kicinski-fedora-pc1c0hjn.dhcp.thefacebook.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
authentication-results: kernel.org; dkim=none (message not signed)
 header.d=none;kernel.org; dmarc=none action=none header.from=nxp.com;
x-originating-ip: [119.31.174.71]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: f3dacfd4-0ec6-4915-35f1-08d91147260b
x-ms-traffictypediagnostic: DBBPR04MB8027:
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <DBBPR04MB8027176C8F5A89A85F6E7F45E6579@DBBPR04MB8027.eurprd04.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:10000;
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: DUwLCIOxM3/KhsNU38/vz1mkG+k+qplVkhPUCkR/5U4BENisLm9qEebi56ClUVk85Mcq42hXqnWINPOLCP8XHgNRiMRt66Ja2cMdcLfPDqCuDmftC7tCSSESmM8gSF24vkKBFsKCdJDnH/tMazA32tEqasNm9WpPE/sxH4PSyKM05noawkvMjud0mUppglxQ/lPUo1STf/L8R08rBSQXDFWJoRVH63FGDSzfL5ZAaqTaLtxalh+bdr30JwyvUskD1pccWB1KKWb6+KB4ehL3j+zFyqBWoJwF75KuK+3MRg6SYfAWbM1nd9JDG82gMEraTYCUC3mNTC6uv1ZOWRmiDBscURIXciE6ESp2MC9Zsn/+JX6Ud4Tg0Vkpd2IApmTXrUUmXNeaxHieDjaW/5MgujOt+dRA7NSBaH2V5EnjFXIs+xI/4aX2v9PEhxZFn88fjhoj52aTV2nilH7WBa+ZTlVVSlWDfXEX+ab8cG46CbmoYAthBlrFzfPF84N8jj9O3BdZV29hZKWrFNzQFVXs/6AFUyML6rlheszyl7PA/bi7wnTjKiI7ARtxJZao6Vw4CzQb4dyyhIGTn0Eydexmji/uNOSLJHPist2F7Wm2NYWRwnSf6tJC8C4dM/14ZpSwLvas9hI3P61iTwUDfjXEmpxuIT3AsbfhmT80epUUSkWDCyLmJTHLaUS1WH8a0ezG3pRJ4agjrs4D+obAq37wBzczHNV0vz5G/YnHm5xAolE=
x-forefront-antispam-report: CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:DB8PR04MB6795.eurprd04.prod.outlook.com;PTR:;CAT:NONE;SFS:(4636009)(39850400004)(136003)(346002)(396003)(366004)(376002)(2906002)(186003)(6916009)(66946007)(26005)(83380400001)(76116006)(66476007)(86362001)(7696005)(8936002)(6506007)(64756008)(4326008)(5660300002)(55016002)(8676002)(122000001)(66446008)(66556008)(52536014)(478600001)(53546011)(38100700002)(71200400001)(9686003)(54906003)(316002)(966005)(33656002)(309714004);DIR:OUT;SFP:1101;
x-ms-exchange-antispam-messagedata: =?gb2312?B?UHdEeEpONmtqSjBsdEVVYzlpaDBEZkt2VG1UR1BZVy8vSERHSEIxN3FKMmpx?=
 =?gb2312?B?bXVUSm5oQ1daRVcwNTZ4d0EzVEx6UE41VFQyOTN5QndoN1hQUnlFcVIxSnlX?=
 =?gb2312?B?VFVrVFh5L2RBTTMrdEtpaEx0d2pzUmJmcXpBZTY2MkVhZTRldW1qUXQzRC91?=
 =?gb2312?B?bmsvZkFIT1YzemRrbTFTMU5SNjFMcFdrUDMrZFNyRFdWbkl0UVV6ZXRMV25p?=
 =?gb2312?B?OFdhTEFLcERJb2ZLZ3dqdjJEZDJFQlNHVUVCR0xBM3AraEYzcDQ1ei8wMFRw?=
 =?gb2312?B?SEpvU3RiK3hPL21Gd0E4VXhkT09NYWtUN2E5eFk1YlNyeTRDTVQ0dlhjeGhK?=
 =?gb2312?B?SFBrNzBUejdmbmFCaVhLMGg4eDY5UEFTZ1FCbTdKMjh5Mmx6YzNIQnJsTVBp?=
 =?gb2312?B?cnFROEQzQVg1NGU4WXcxZndzSC96L25mNUpnSmlPTkVpTkRZamZmOUZ4VE1D?=
 =?gb2312?B?L01FVENoV3NYb3dTcHcwUWlVLzYyc3BDS09KazNwbHk5OVNnazdFTi8vYkFC?=
 =?gb2312?B?RGNXRmR2NExuVzVHWEtDNThTOVFZbkNpWW9hQjJvMVlGNkZ0WFpWU3NRd0J3?=
 =?gb2312?B?aktGMFhSbGk1VzNjZDljQ2hYMW5QbEtpOFNGQU5uSjhpaEgvZmxqVjZwUEJM?=
 =?gb2312?B?c2tSUkkrME1vOGtWSnVMcmlMM2E5Y05vY1JFRTVrR1hnUnlRUEFmdUs1MUty?=
 =?gb2312?B?ZmNSaWJSRzlKWU96MHpodFJRMk0vbks5aWQ5eTc3SW1ObDBCRVFPMkJwWWVs?=
 =?gb2312?B?ZWdpcDlIVVI5OERrd09OMTk4M3FXUDc2WXhjQU5YQXBsaWZseFYzd3JrY05x?=
 =?gb2312?B?UmRRbnVReFVRSmZyMVplUWtlNzljUVRKVFkvS0FacjRXMFVUK0lyRE90L2Zr?=
 =?gb2312?B?QmxOK2JFeVJkYkttVlgrOFZFTUE4bE1peC94R29jYVZuclY4bUNac1o0bXd6?=
 =?gb2312?B?dVJQZ0crZkU3bmpKN05zQ2w5VXhNdEhXOGFlZmkwR2I5TGh3ZTQwaGFFK0E5?=
 =?gb2312?B?QlNqd3lTZGlYalUvbXVla2ZVYS96Q3hLZkJkYlRJZmZnN1dicHlhSklIS1pM?=
 =?gb2312?B?bUIwYkh5bWl6eVg0ZTVGY0ZaeFJSbGtIL1V5a2U0MXdMc0QyZ2NwQUlGUnJw?=
 =?gb2312?B?cTJYUU5kMmpDd0R3b014eTFoT01YcFFWb1J1USs3d0tyZVdqVnJjK1BWbWJC?=
 =?gb2312?B?R28xMGtOZysvUXVCTytMeVBxTVhpemlpZ1JuNWNKS0krTzlkdEgxVU1vT1ZQ?=
 =?gb2312?B?Z1JFS1RnWkFwOVJZN0s5YnlzZHROMElySEFUUUVUeDZwU3VWOU85dGJlSkhP?=
 =?gb2312?B?NDZ5NjZERG5RS0NXVGg2MGczWS9WZ3dMZm12QlV1a2lwa0JRQ21ocWlrVmxa?=
 =?gb2312?B?dDZZS0wyQmQrZTBPTFRwbUdjY0ZGRU9OcmExY0NLTFA2T1NtQ3lUK1IraW82?=
 =?gb2312?B?eHVQeEdRY1F5YUQ3d3BOVmZxaUlYWDB6UExqby9BWFp1R0pkZ29IMTJRZm9l?=
 =?gb2312?B?NXJyN3hrSlNCN0hudlRsVCtUekVIRE9qdEphbC9YVXhOWFNBclhxekd2bjNM?=
 =?gb2312?B?UE80SnZ6QmloWjFUR3F0U3FMamEvVGt3RnV2ZzNpcmpCS216cEdTQm1rei9R?=
 =?gb2312?B?OFRZUm9ZNklhbDREejNPS2NYalNvNnV4THdNVWhseTluTnRkWGdEV2dsUy9q?=
 =?gb2312?B?Wk42WFVNL3UvNWN1RFZyTFBwSUxmdGVEWXVuWE9LWUJmVlVlc1dqZWdRVW01?=
 =?gb2312?Q?dQL5JLR61ikWUObCgXDovSMLM5yOdjprCQtl9ZK?=
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: nxp.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: DB8PR04MB6795.eurprd04.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: f3dacfd4-0ec6-4915-35f1-08d91147260b
X-MS-Exchange-CrossTenant-originalarrivaltime: 07 May 2021 10:59:12.6701
 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 686ea1d3-bc2b-4c6f-a92c-d99c5c301635
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: a3XJ4BC2xrfF3ARvT+xG+NE9G6/41VUtcMbCjp3BHedNPAX8cbZqnQ8WD0d1rCVa8gIFP1yIMfzG50KY+XsSKA==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DBBPR04MB8027
Precedence: bulk
List-ID: <netdev.vger.kernel.org>
X-Mailing-List: netdev@vger.kernel.org

DQpIaSBKYWt1YiwNCg0KPiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiBGcm9tOiBKYWt1
YiBLaWNpbnNraSA8a3ViYUBrZXJuZWwub3JnPg0KPiBTZW50OiAyMDIxxOo11MI3yNUgODo1NQ0K
PiBUbzogSm9ha2ltIFpoYW5nIDxxaWFuZ3FpbmcuemhhbmdAbnhwLmNvbT4NCj4gQ2M6IHBlcHBl
LmNhdmFsbGFyb0BzdC5jb207IGFsZXhhbmRyZS50b3JndWVAc3QuY29tOw0KPiBqb2FicmV1QHN5
bm9wc3lzLmNvbTsgZGF2ZW1AZGF2ZW1sb2Z0Lm5ldDsgZi5mYWluZWxsaUBnbWFpbC5jb207DQo+
IGFuZHJld0BsdW5uLmNoOyBKaXNoZW5nLlpoYW5nQHN5bmFwdGljcy5jb207IG5ldGRldkB2Z2Vy
Lmtlcm5lbC5vcmc7DQo+IGRsLWxpbnV4LWlteCA8bGludXgtaW14QG54cC5jb20+DQo+IFN1Ympl
Y3Q6IFJlOiBbUEFUQ0ggVjQgbmV0XSBuZXQ6IHN0bW1hYzogRml4IE1BQyBXb0wgbm90IHdvcmtp
bmcgaWYgUEhZIGRvZXMNCj4gbm90IHN1cHBvcnQgV29MDQo+IA0KPiBPbiBUaHUsICA2IE1heSAy
MDIxIDEzOjA2OjU4ICswODAwIEpvYWtpbSBaaGFuZyB3cm90ZToNCj4gPiBCb3RoIGdldCBhbmQg
c2V0IFdvTCB3aWxsIGNoZWNrIGRldmljZV9jYW5fd2FrZXVwKCksIGlmIE1BQyBzdXBwb3J0cw0K
PiA+IFBNVCwgaXQgd2lsbCBzZXQgZGV2aWNlIHdha2V1cCBjYXBhYmlsaXR5LiBBZnRlciBjb21t
aXQgMWQ4ZTViMGYzZjJjICgibmV0Og0KPiA+IHN0bW1hYzogU3VwcG9ydCBXT0wgd2l0aCBwaHki
KSwgZGV2aWNlIHdha2V1cCBjYXBhYmlsaXR5IHdpbGwgYmUNCj4gPiBvdmVyd3JpdGUgaW4gc3Rt
bWFjX2luaXRfcGh5KCkgYWNjb3JkaW5nIHRvIHBoeSdzIFdvbCBmZWF0dXJlLiBJZiBwaHkNCj4g
PiBkb2Vzbid0IHN1cHBvcnQgV29MLCB0aGVuIE1BQyB3aWxsIGxvc2Ugd2FrZXVwIGNhcGFiaWxp
dHkuDQo+IA0KPiBMZXQncyB0YWtlIGEgc3RlcCBiYWNrLiBDYW4gd2UgZ2V0IGEgbWluaW1hbCBm
aXggZm9yIGxvc2luZyB0aGUgY29uZmlnIGluDQo+IHN0bW1hY19pbml0X3BoeSgpLCBhbmQgdGhl
biBleHRlbmQgdGhlIHN1cHBvcnQgZm9yIFdvTCBmb3IgZGV2aWNlcyB3aGljaCBkbw0KPiBzdXBw
b3J0IHdha2UgdXAgdGhlbXNlbHZlcz8NCg0KU3VyZSwgcGxlYXNlIHJldmlldyB0aGUgVjEsIEkg
dGhpbmsgdGhpcyBpcyBhIG1pbmltYWwgZml4LCB0aGVuIHdlIGNhbiBleHRlbmQgdGhpcyBhcyBh
IG5ldyBmZWF0dXJlLg0KaHR0cHM6Ly93d3cuc3Bpbmljcy5uZXQvbGlzdHMvbmV0ZGV2L21zZzcz
MzUzMS5odG1sDQoNCj4gPiBUaGlzIHBhdGNoIGNvbWJpbmVzIFdvTCBjYXBhYmlsaXRpZXMgYm90
aCBNQUMgYW5kIFBIWSBmcm9tDQo+ID4gc3RtbWFjX2dldF93b2woKSwgc2V0IHdha2V1cCBjYXBh
YmlsaXR5IGFuZCBnaXZlIFdvTCBwcmlvcml0eSB0byB0aGUNCj4gPiBQSFkgaW4gc3RtbWFjX3Nl
dF93b2woKSB3aGVuIGVuYWJsZSBXb0wuIFdoYXQgUEhZcyBkbyBpbXBsZW1lbnQgaXMNCj4gPiBX
QUtFX01BR0lDLCBXQUtFX1VDQVNULCBXQUtFX01BR0lDU0VDVVJFIGFuZCBXQUtFX0JDQVNULg0K
PiA+DQo+ID4gRml4ZXM6IGNvbW1pdCAxZDhlNWIwZjNmMmMgKCJuZXQ6IHN0bW1hYzogU3VwcG9y
dCBXT0wgd2l0aCBwaHkiKQ0KPiANCj4gUGxlYXNlIHJlbW92ZSAiY29tbWl0IiBmcm9tIHRoZSBm
aXhlcyB0YWcuDQoNClllcy4NCg0KPiA+IFN1Z2dlc3RlZC1ieTogQW5kcmV3IEx1bm4gPGFuZHJl
d0BsdW5uLmNoPg0KPiA+IFNpZ25lZC1vZmYtYnk6IEpvYWtpbSBaaGFuZyA8cWlhbmdxaW5nLnpo
YW5nQG54cC5jb20+DQo+IA0KPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9z
dG1pY3JvL3N0bW1hYy9zdG1tYWNfZXRodG9vbC5jDQo+ID4gYi9kcml2ZXJzL25ldC9ldGhlcm5l
dC9zdG1pY3JvL3N0bW1hYy9zdG1tYWNfZXRodG9vbC5jDQo+ID4gaW5kZXggYzU2NDI5ODVlZjk1
Li42ZDA5OTA4ZGVjMWYgMTAwNjQ0DQo+ID4gLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvc3Rt
aWNyby9zdG1tYWMvc3RtbWFjX2V0aHRvb2wuYw0KPiA+ICsrKyBiL2RyaXZlcnMvbmV0L2V0aGVy
bmV0L3N0bWljcm8vc3RtbWFjL3N0bW1hY19ldGh0b29sLmMNCj4gPiBAQCAtNjI5LDM1ICs2Mjks
NDkgQEAgc3RhdGljIHZvaWQgc3RtbWFjX2dldF9zdHJpbmdzKHN0cnVjdCBuZXRfZGV2aWNlDQo+
ID4gKmRldiwgdTMyIHN0cmluZ3NldCwgdTggKmRhdGEpDQo+ID4gIC8qIEN1cnJlbnRseSBvbmx5
IHN1cHBvcnQgV09MIHRocm91Z2ggTWFnaWMgcGFja2V0LiAqLyAgc3RhdGljIHZvaWQNCj4gPiBz
dG1tYWNfZ2V0X3dvbChzdHJ1Y3QgbmV0X2RldmljZSAqZGV2LCBzdHJ1Y3QgZXRodG9vbF93b2xp
bmZvICp3b2wpICB7DQo+ID4gKwlzdHJ1Y3QgZXRodG9vbF93b2xpbmZvIHdvbF9waHkgPSB7IC5j
bWQgPSBFVEhUT09MX0dXT0wgfTsNCj4gPiAgCXN0cnVjdCBzdG1tYWNfcHJpdiAqcHJpdiA9IG5l
dGRldl9wcml2KGRldik7DQo+ID4NCj4gPiAtCWlmICghcHJpdi0+cGxhdC0+cG10KQ0KPiA+IC0J
CXJldHVybiBwaHlsaW5rX2V0aHRvb2xfZ2V0X3dvbChwcml2LT5waHlsaW5rLCB3b2wpOw0KPiA+
IC0NCj4gPiAgCW11dGV4X2xvY2soJnByaXYtPmxvY2spOw0KPiA+IC0JaWYgKGRldmljZV9jYW5f
d2FrZXVwKHByaXYtPmRldmljZSkpIHsNCj4gDQo+IFdoeSByZW1vdmUgdGhlIGRldmljZV9jYW5f
d2FrZXVwKCkgY2hlY2s/DQoNClRoZSBvcmlnaW5hbCBjb2RlIGxvZ2ljIGlzIHNldHRpbmcgd2Fr
ZXVwIGNhcGFiaWxpdHkgd2hlbiBjaGVjayBpdCBzdXBwb3J0cyBQTVQgaW4gc3RtbWFjX2h3X2lu
aXQgKCkgYXQgcHJvYmUgc3RhZ2UuIEFmdGVyIHRoaXMgcGF0Y2gsDQp3ZSBzZXQgd2FrZXVwIGNh
cGFiaWxpdHkgd2hlbiBjb25maWd1cmUgV29MIGluIHN0bW1hY19zZXRfd29sKCksIHNvIHdlIGNo
YW5nZSB0byBjaGVjayAiIHByaXYtPnBsYXQtPnBtdCAiLCByYXRoZXIgdGhhbiAiIGRldmljZV9j
YW5fd2FrZXVwKCkiLg0KIA0KPiA+ICsJaWYgKHByaXYtPnBsYXQtPnBtdCkgew0KPiA+ICAJCXdv
bC0+c3VwcG9ydGVkID0gV0FLRV9NQUdJQyB8IFdBS0VfVUNBU1Q7DQo+ID4gIAkJaWYgKHByaXYt
Pmh3X2NhcF9zdXBwb3J0ICYmICFwcml2LT5kbWFfY2FwLnBtdF9tYWdpY19mcmFtZSkNCj4gPiAg
CQkJd29sLT5zdXBwb3J0ZWQgJj0gfldBS0VfTUFHSUM7DQo+ID4gLQkJd29sLT53b2xvcHRzID0g
cHJpdi0+d29sb3B0czsNCj4gPiAgCX0NCj4gPiArDQo+ID4gKwlwaHlsaW5rX2V0aHRvb2xfZ2V0
X3dvbChwcml2LT5waHlsaW5rLCAmd29sX3BoeSk7DQo+ID4gKw0KPiA+ICsJLyogQ29tYmluZSBX
b0wgY2FwYWJpbGl0aWVzIGJvdGggUEhZIGFuZCBNQUMgKi8NCj4gPiArCXdvbC0+c3VwcG9ydGVk
IHw9IHdvbF9waHkuc3VwcG9ydGVkOw0KPiA+ICsJd29sLT53b2xvcHRzID0gcHJpdi0+d29sb3B0
czsNCj4gPiArDQo+ID4gIAltdXRleF91bmxvY2soJnByaXYtPmxvY2spOw0KPiA+ICB9DQo+ID4N
Cj4gPiAgc3RhdGljIGludCBzdG1tYWNfc2V0X3dvbChzdHJ1Y3QgbmV0X2RldmljZSAqZGV2LCBz
dHJ1Y3QNCj4gPiBldGh0b29sX3dvbGluZm8gKndvbCkgIHsNCj4gPiArCXUzMiBzdXBwb3J0ID0g
V0FLRV9NQUdJQyB8IFdBS0VfVUNBU1QgfCBXQUtFX01BR0lDU0VDVVJFIHwNCj4gPiArV0FLRV9C
Q0FTVDsNCj4gDQo+IFdoeSB0aGlzIGxpc3Q/DQoNClBsZWFzZSBzZWUgY29tbWVudHMgZnJvbSBB
bmRyZXc6IGh0dHBzOi8vbG9yZS5rZXJuZWwub3JnL25ldGRldi9ZSWdCSlFpMUgrZjJWR1dmQGx1
bm4uY2gvVC8jbTAwZjExYTg0YzFjNDNiM2I0MDQ3ZGZmY2RmY2U1N2Q1MzQ1NjVhOTYNCiJXaGF0
IFBIWXMgZG8gaW1wbGVtZW50IGlzIFdBS0VfTUFHSUMsIFdBS0VfTUFHSUNTRUMsIFdBS0VfVUNB
U1QsIGFuZCBXQUtFX0JDQVNULiBTbyB0aGVyZSBpcyBhIGNsZWFyIG92ZXJsYXAgd2l0aCB3aGF0
IHRoZSBNQUMgY2FuIGRvLiINCg0KU28gdGhpcyBsaXN0IGlzIGNvdmVyIGFsbCB0aGUgV29MIHNv
dXJjZXMgYm90aCBQSFkgYW5kIFNUTU1BQy4NCg0KPiA+ICsJc3RydWN0IGV0aHRvb2xfd29saW5m
byB3b2xfcGh5ID0geyAuY21kID0gRVRIVE9PTF9HV09MIH07DQo+ID4gIAlzdHJ1Y3Qgc3RtbWFj
X3ByaXYgKnByaXYgPSBuZXRkZXZfcHJpdihkZXYpOw0KPiA+IC0JdTMyIHN1cHBvcnQgPSBXQUtF
X01BR0lDIHwgV0FLRV9VQ0FTVDsNCj4gDQo+IFRoaXMgbGlzdCB3YXMgdGhlIGxpc3Qgb2Ygd2hh
dCB0aGUgTUFDIHN1cHBvcnRlZCwgcmlnaHQ/DQoNClJpZ2h0Lg0KDQo+ID4gKwlpbnQgcmV0Ow0K
PiA+DQo+ID4gLQlpZiAoIWRldmljZV9jYW5fd2FrZXVwKHByaXYtPmRldmljZSkpDQo+IA0KPiBX
aHkgcmVtb3ZlIHRoaXMgY2hlY2s/DQoNCkV4cGxhaW4gYWJvdmUuDQoNCj4gPiArCWlmICh3b2wt
PndvbG9wdHMgJiB+c3VwcG9ydCkNCj4gPiAgCQlyZXR1cm4gLUVPUE5PVFNVUFA7DQo+ID4NCj4g
PiAtCWlmICghcHJpdi0+cGxhdC0+cG10KSB7DQo+ID4gLQkJaW50IHJldCA9IHBoeWxpbmtfZXRo
dG9vbF9zZXRfd29sKHByaXYtPnBoeWxpbmssIHdvbCk7DQo+ID4gLQ0KPiA+IC0JCWlmICghcmV0
KQ0KPiA+IC0JCQlkZXZpY2Vfc2V0X3dha2V1cF9lbmFibGUocHJpdi0+ZGV2aWNlLCAhIXdvbC0+
d29sb3B0cyk7DQo+ID4gLQkJcmV0dXJuIHJldDsNCj4gPiArCS8qIEZpcnN0IGNoZWNrIGlmIGNh
biBXb0wgZnJvbSBQSFkgKi8NCj4gPiArCXBoeWxpbmtfZXRodG9vbF9nZXRfd29sKHByaXYtPnBo
eWxpbmssICZ3b2xfcGh5KTsNCj4gPiArCWlmICh3b2wtPndvbG9wdHMgJiB3b2xfcGh5LnN1cHBv
cnRlZCkgew0KPiANCj4gU28gaWYgX2FueV8gcmVxdWVzdHMgbWF0Y2ggUEhZIGNhcGFiaWxpdGll
cyB3ZSdkIHVzZSBQSFk/DQo+IEkgdGhpbmsgdGhlIGNoZWNrIHNob3VsZCBiZToNCj4gDQo+IAlp
ZiAoKHdvbC0+d29sdG9wcyAmIHdvbF9waHkuc3VwcG9ydGVkKSA9PSB3b2wtPndvbHRvcHMpDQo+
IA0KPiBUaGF0IHNhaWQgSSdtIG5vdCAxMDAlIHN1cmUgd2hhdCB0aGUgc2VtYW50aWNzIGZvciBX
b0wgYXJlLg0KDQpZZXMsIHlvdSBhcmUgcmlnaHQuIE11bHRpcGxlIHdha2V1cCBzb3VyY2VzIGNh
biBiZSBlbmFibGVkIGF0IHRoZSBzYW1lIHRpbWUsIGZyb20gUEhZIG9yIE1BQywgd2UgZ2l2ZSBw
cmlvcml0eSB0byBQSFkuDQoNCkFzIEFuZHJldyBzYWlkOg0KIklmIHlvdSBhcmUgdHJ5aW5nIHRv
IHNhdmUgcG93ZXIsIGl0IGlzIGJldHRlciBpZiB0aGUgUEhZIHByb3ZpZGVzIHRoZSBXb0wgc291
cmNlcy4gSWYgdGhlIFBIWSBjYW4gcHJvdmlkZSBhbGwgdGhlIHJlcXVpcmVkIFdvTCBzb3VyY2Vz
LCB5b3UNCmNhbiB0dXJuIHRoZSBNQUMgb2ZmIGFuZCBzYXZlIG1vcmUgcG93ZXIuIFNvIGdpdmUg
cHJpb3JpdHkgdG8gdGhlIFBIWS4iDQoNCj4gPiArCQl3b2wtPndvbG9wdHMgJj0gd29sX3BoeS5z
dXBwb3J0ZWQ7DQo+ID4gKwkJcmV0ID0gcGh5bGlua19ldGh0b29sX3NldF93b2wocHJpdi0+cGh5
bGluaywgd29sKTsNCj4gPiArDQo+ID4gKwkJaWYgKCFyZXQpIHsNCj4gPiArCQkJcHJfaW5mbygi
c3RtbWFjOiBwaHkgd2FrZXVwIGVuYWJsZVxuIik7DQo+ID4gKwkJCWRldmljZV9zZXRfd2FrZXVw
X2NhcGFibGUocHJpdi0+ZGV2aWNlLCAxKTsNCj4gPiArCQkJZGV2aWNlX3NldF93YWtldXBfZW5h
YmxlKHByaXYtPmRldmljZSwgMSk7DQo+ID4gKwkJCWdvdG8gd29sb3B0c191cGRhdGU7DQo+ID4g
KwkJfSBlbHNlIHsNCj4gPiArCQkJcmV0dXJuIHJldDsNCj4gPiArCQl9DQo+ID4gIAl9DQo+ID4N
Cj4gPiAgCS8qIEJ5IGRlZmF1bHQgYWxtb3N0IGFsbCBHTUFDIGRldmljZXMgc3VwcG9ydCB0aGUg
V29MIHZpYSBAQCAtNjY2LDE4DQo+ID4gKzY4MCwyMSBAQCBzdGF0aWMgaW50IHN0bW1hY19zZXRf
d29sKHN0cnVjdCBuZXRfZGV2aWNlICpkZXYsIHN0cnVjdA0KPiBldGh0b29sX3dvbGluZm8gKndv
bCkNCj4gPiAgCWlmICgocHJpdi0+aHdfY2FwX3N1cHBvcnQpICYmICghcHJpdi0+ZG1hX2NhcC5w
bXRfbWFnaWNfZnJhbWUpKQ0KPiA+ICAJCXdvbC0+d29sb3B0cyAmPSB+V0FLRV9NQUdJQzsNCj4g
Pg0KPiA+IC0JaWYgKHdvbC0+d29sb3B0cyAmIH5zdXBwb3J0KQ0KPiA+IC0JCXJldHVybiAtRUlO
VkFMOw0KPiANCj4gTm93IHlvdSBzZWVtIHRvIG5vdCB2YWxpZGF0ZSBhZ2FpbnN0IE1BQyBjYXBh
YmlsaXRpZXMgYW55d2hlcmUuDQoNClllcywgc2luY2Ugd2UgaGF2ZSBjb21iaW5lZCBXb0wgY2Fw
YWJpbGl0aWVzIGJvdGggUEhZIGFuZCBNQUMgaW4gc3RtbWFjX2dldF93b2woKS4NCg0KQmVzdCBS
ZWdhcmRzLA0KSm9ha2ltIFpoYW5nDQo+ID4gLQlpZiAod29sLT53b2xvcHRzKSB7DQo+ID4gLQkJ
cHJfaW5mbygic3RtbWFjOiB3YWtldXAgZW5hYmxlXG4iKTsNCj4gPiArCWlmIChwcml2LT5wbGF0
LT5wbXQgJiYgd29sLT53b2xvcHRzKSB7DQo+ID4gKwkJcHJfaW5mbygic3RtbWFjOiBtYWMgd2Fr
ZXVwIGVuYWJsZVxuIik7DQo+ID4gKwkJZGV2aWNlX3NldF93YWtldXBfY2FwYWJsZShwcml2LT5k
ZXZpY2UsIDEpOw0KPiA+ICAJCWRldmljZV9zZXRfd2FrZXVwX2VuYWJsZShwcml2LT5kZXZpY2Us
IDEpOw0KPiA+ICAJCWVuYWJsZV9pcnFfd2FrZShwcml2LT53b2xfaXJxKTsNCj4gPiAtCX0gZWxz
ZSB7DQo+ID4gKwkJZ290byB3b2xvcHRzX3VwZGF0ZTsNCj4gPiArCX0NCj4gPiArDQo+ID4gKwlp
ZiAoIXdvbC0+d29sb3B0cykgew0KPiA+ICsJCWRldmljZV9zZXRfd2FrZXVwX2NhcGFibGUocHJp
di0+ZGV2aWNlLCAwKTsNCj4gPiAgCQlkZXZpY2Vfc2V0X3dha2V1cF9lbmFibGUocHJpdi0+ZGV2
aWNlLCAwKTsNCj4gPiAgCQlkaXNhYmxlX2lycV93YWtlKHByaXYtPndvbF9pcnEpOw0KPiA+ICAJ
fQ0KPiA+DQo+ID4gK3dvbG9wdHNfdXBkYXRlOg0KPiA+ICAJbXV0ZXhfbG9jaygmcHJpdi0+bG9j
ayk7DQo+ID4gIAlwcml2LT53b2xvcHRzID0gd29sLT53b2xvcHRzOw0KPiA+ICAJbXV0ZXhfdW5s
b2NrKCZwcml2LT5sb2NrKTsNCg0K
