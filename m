Return-Path: <netdev-owner@vger.kernel.org>
X-Original-To: lists+netdev@lfdr.de
Delivered-To: lists+netdev@lfdr.de
Received: from out1.vger.email (out1.vger.email [IPv6:2620:137:e000::1:20])
	by mail.lfdr.de (Postfix) with ESMTP id B29D7644D93
	for <lists+netdev@lfdr.de>; Tue,  6 Dec 2022 21:54:35 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S229595AbiLFUye (ORCPT <rfc822;lists+netdev@lfdr.de>);
        Tue, 6 Dec 2022 15:54:34 -0500
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:45136 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S229496AbiLFUyc (ORCPT
        <rfc822;netdev@vger.kernel.org>); Tue, 6 Dec 2022 15:54:32 -0500
Received: from mx.sberdevices.ru (mx.sberdevices.ru [45.89.227.171])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id A69A722BF6;
        Tue,  6 Dec 2022 12:54:30 -0800 (PST)
Received: from s-lin-edge02.sberdevices.ru (localhost [127.0.0.1])
        by mx.sberdevices.ru (Postfix) with ESMTP id 0FCD45FD0B;
        Tue,  6 Dec 2022 23:54:29 +0300 (MSK)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=sberdevices.ru;
        s=mail; t=1670360069;
        bh=ntLrn/vM55HI3TjVNihUF4n1nTJdoGDl4uUgJApYRFI=;
        h=From:To:Subject:Date:Message-ID:Content-Type:MIME-Version;
        b=omKht888SZns7rVrF14JpDG8fF++sM5H6z5DGjCpbg3mO69f5iSuoPxtxw3N98Bq1
         aJj8wfGSfqJsyDdPVU8kjLnwhor/WKtyvOqK9xKtYr325JtO5/2fbnG8NSMDa9VHAy
         VCLXCtmVtZVNrWYUBJt2Hmvxm9f3xqJ8VQaV+VnBsuW4zPm9iN3Hf686CN6hWX6jqY
         qsZ6nW/NMHV5u+7MPENVKdtZjKelkgBbwLyLDStH4Pdz2D0hW431JvWdL93kc1dugA
         lSaB9MwfeO+8nEl3/EjrQdYc4pijDzx2B8Ffe6P0uzHWaok3mdg2mMfumuZN8ll5oU
         B+38z/ByATW7g==
Received: from S-MS-EXCH01.sberdevices.ru (S-MS-EXCH01.sberdevices.ru [172.16.1.4])
        by mx.sberdevices.ru (Postfix) with ESMTP;
        Tue,  6 Dec 2022 23:54:28 +0300 (MSK)
From:   Arseniy Krasnov <AVKrasnov@sberdevices.ru>
To:     Stefano Garzarella <sgarzare@redhat.com>,
        Jakub Kicinski <kuba@kernel.org>,
        "David S. Miller" <davem@davemloft.net>,
        Paolo Abeni <pabeni@redhat.com>,
        "edumazet@google.com" <edumazet@google.com>
CC:     Bobby Eshleman <bobby.eshleman@bytedance.com>,
        Arseniy Krasnov <AVKrasnov@sberdevices.ru>,
        Krasnov Arseniy <oxffffaa@gmail.com>,
        "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>,
        "netdev@vger.kernel.org" <netdev@vger.kernel.org>,
        "virtualization@lists.linux-foundation.org" 
        <virtualization@lists.linux-foundation.org>,
        kernel <kernel@sberdevices.ru>
Subject: [RFC PATCH v4 4/4] test/vsock: vsock_perf utility
Thread-Topic: [RFC PATCH v4 4/4] test/vsock: vsock_perf utility
Thread-Index: AQHZCbTuNc7S492viki3jwHUh+RWFg==
Date:   Tue, 6 Dec 2022 20:54:28 +0000
Message-ID: <281c876b-5c87-7ecf-f13e-1ceaf5a57371@sberdevices.ru>
In-Reply-To: <6be11122-7cf2-641f-abd8-6e379ee1b88f@sberdevices.ru>
Accept-Language: en-US, ru-RU
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [172.16.1.12]
Content-Type: text/plain; charset="utf-8"
Content-ID: <F1BB16B0F9FDF741B8C133E20346D0FC@sberdevices.ru>
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-KSMG-Rule-ID: 4
X-KSMG-Message-Action: clean
X-KSMG-AntiSpam-Status: not scanned, disabled by settings
X-KSMG-AntiSpam-Interceptor-Info: not scanned
X-KSMG-AntiPhishing: not scanned, disabled by settings
X-KSMG-AntiVirus: Kaspersky Secure Mail Gateway, version 1.1.2.30, bases: 2022/12/06 12:14:00 #20663216
X-KSMG-AntiVirus-Status: Clean, skipped
X-Spam-Status: No, score=-2.1 required=5.0 tests=BAYES_00,DKIM_SIGNED,
        DKIM_VALID,DKIM_VALID_AU,DKIM_VALID_EF,SPF_HELO_NONE,SPF_PASS
        autolearn=ham autolearn_force=no version=3.4.6
X-Spam-Checker-Version: SpamAssassin 3.4.6 (2021-04-09) on
        lindbergh.monkeyblade.net
Precedence: bulk
List-ID: <netdev.vger.kernel.org>
X-Mailing-List: netdev@vger.kernel.org

VGhpcyBhZGRzIHV0aWxpdHkgdG8gY2hlY2sgdnNvY2sgcngvdHggcGVyZm9ybWFuY2UuDQoNClVz
YWdlIGFzIHNlbmRlcjoNCi4vdnNvY2tfcGVyZiAtLXNlbmRlciA8Y2lkPiAtLXBvcnQgPHBvcnQ+
IC0tYnl0ZXMgPGJ5dGVzIHRvIHNlbmQpDQpVc2FnZSBhcyByZWNlaXZlcjoNCi4vdnNvY2tfcGVy
ZiAtLXBvcnQgPHBvcnQ+IC0tcmN2bG93YXQgPFNPX1JDVkxPV0FUPg0KDQpTaWduZWQtb2ZmLWJ5
OiBBcnNlbml5IEtyYXNub3YgPEFWS3Jhc25vdkBzYmVyZGV2aWNlcy5ydT4NCi0tLQ0KIHRvb2xz
L3Rlc3RpbmcvdnNvY2svTWFrZWZpbGUgICAgIHwgICAzICstDQogdG9vbHMvdGVzdGluZy92c29j
ay9SRUFETUUgICAgICAgfCAgMzQgKysrDQogdG9vbHMvdGVzdGluZy92c29jay92c29ja19wZXJm
LmMgfCA0MzQgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKw0KIDMgZmlsZXMgY2hhbmdl
ZCwgNDcwIGluc2VydGlvbnMoKyksIDEgZGVsZXRpb24oLSkNCiBjcmVhdGUgbW9kZSAxMDA2NDQg
dG9vbHMvdGVzdGluZy92c29jay92c29ja19wZXJmLmMNCg0KZGlmZiAtLWdpdCBhL3Rvb2xzL3Rl
c3RpbmcvdnNvY2svTWFrZWZpbGUgYi90b29scy90ZXN0aW5nL3Zzb2NrL01ha2VmaWxlDQppbmRl
eCBmODI5M2M2OTEwYzkuLjQzYTI1NGYwZTE0ZCAxMDA2NDQNCi0tLSBhL3Rvb2xzL3Rlc3Rpbmcv
dnNvY2svTWFrZWZpbGUNCisrKyBiL3Rvb2xzL3Rlc3RpbmcvdnNvY2svTWFrZWZpbGUNCkBAIC0x
LDggKzEsOSBAQA0KICMgU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAtb25seQ0KLWFs
bDogdGVzdA0KK2FsbDogdGVzdCB2c29ja19wZXJmDQogdGVzdDogdnNvY2tfdGVzdCB2c29ja19k
aWFnX3Rlc3QNCiB2c29ja190ZXN0OiB2c29ja190ZXN0Lm8gdGltZW91dC5vIGNvbnRyb2wubyB1
dGlsLm8NCiB2c29ja19kaWFnX3Rlc3Q6IHZzb2NrX2RpYWdfdGVzdC5vIHRpbWVvdXQubyBjb250
cm9sLm8gdXRpbC5vDQordnNvY2tfcGVyZjogdnNvY2tfcGVyZi5vDQogDQogQ0ZMQUdTICs9IC1n
IC1PMiAtV2Vycm9yIC1XYWxsIC1JLiAtSS4uLy4uL2luY2x1ZGUgLUkuLi8uLi8uLi91c3IvaW5j
bHVkZSAtV25vLXBvaW50ZXItc2lnbiAtZm5vLXN0cmljdC1vdmVyZmxvdyAtZm5vLXN0cmljdC1h
bGlhc2luZyAtZm5vLWNvbW1vbiAtTU1EIC1VX0ZPUlRJRllfU09VUkNFIC1EX0dOVV9TT1VSQ0UN
CiAuUEhPTlk6IGFsbCB0ZXN0IGNsZWFuDQpkaWZmIC0tZ2l0IGEvdG9vbHMvdGVzdGluZy92c29j
ay9SRUFETUUgYi90b29scy90ZXN0aW5nL3Zzb2NrL1JFQURNRQ0KaW5kZXggNGQ1MDQ1ZTdkMmMz
Li5lNmY2NzM1YmJhMDUgMTAwNjQ0DQotLS0gYS90b29scy90ZXN0aW5nL3Zzb2NrL1JFQURNRQ0K
KysrIGIvdG9vbHMvdGVzdGluZy92c29jay9SRUFETUUNCkBAIC0zNSwzICszNSwzNyBAQCBJbnZv
a2UgdGVzdCBiaW5hcmllcyBpbiBib3RoIGRpcmVjdGlvbnMgYXMgZm9sbG93czoNCiAgICAgICAg
ICAgICAgICAgICAgICAgIC0tY29udHJvbC1wb3J0PSRHVUVTVF9JUCBcDQogICAgICAgICAgICAg
ICAgICAgICAgICAtLWNvbnRyb2wtcG9ydD0xMjM0IFwNCiAgICAgICAgICAgICAgICAgICAgICAg
IC0tcGVlci1jaWQ9Mw0KKw0KK3Zzb2NrX3BlcmYgdXRpbGl0eQ0KKy0tLS0tLS0tLS0tLS0tLS0t
LS0NCisndnNvY2tfcGVyZicgaXMgYSBzaW1wbGUgdG9vbCB0byBtZWFzdXJlIHZzb2NrIHBlcmZv
cm1hbmNlLiBJdCB3b3JrcyBpbg0KK3NlbmRlci9yZWNlaXZlciBtb2Rlczogc2VuZGVyIGNvbm5l
Y3QgdG8gcGVlciBhdCB0aGUgc3BlY2lmaWVkIHBvcnQgYW5kDQorc3RhcnRzIGRhdGEgdHJhbnNt
aXNzaW9uIHRvIHRoZSByZWNlaXZlci4gQWZ0ZXIgZGF0YSBwcm9jZXNzaW5nIGlzIGRvbmUsDQor
aXQgcHJpbnRzIHNldmVyYWwgbWV0cmljcyhzZWUgYmVsb3cpLg0KKw0KK1VzYWdlOg0KKyMgcnVu
IGFzIHNlbmRlcg0KKyMgY29ubmVjdCB0byBDSUQgMiwgcG9ydCAxMjM0LCBzZW5kIDFHIG9mIGRh
dGEsIHR4IGJ1ZiBzaXplIGlzIDFNDQorLi92c29ja19wZXJmIC0tc2VuZGVyIDIgLS1wb3J0IDEy
MzQgLS1ieXRlcyAxRyAtLWJ1Zi1zaXplIDFNDQorDQorT3V0cHV0Og0KK3R4IHBlcmZvcm1hbmNl
OiBBIEdiL3MNCisNCitPdXRwdXQgZXhwbGFuYXRpb246DQorQSBpcyBjYWxjdWxhdGVkIGFzICJu
dW1iZXIgb2YgYnl0ZXMgdG8gc2VuZCIgLyAidGltZSBpbiB0eCBsb29wIg0KKw0KKyMgcnVuIGFz
IHJlY2VpdmVyDQorIyBsaXN0ZW4gcG9ydCAxMjM0LCByeCBidWYgc2l6ZSBpcyAxTSwgc29ja2V0
IGJ1ZiBzaXplIGlzIDFHLCBTT19SQ1ZMT1dBVCBpcyA2NEsNCisuL3Zzb2NrX3BlcmYgLS1wb3J0
IDEyMzQgLS1idWYtc2l6ZSAxTSAtLXZzay1zaXplIDFHIC0tcmN2bG93YXQgNjRLDQorDQorT3V0
cHV0Og0KK3J4IHBlcmZvcm1hbmNlOiBBIEdiL3MNCit0b3RhbCBpbiAncmVhZCgpJzogQiBzZWMN
CitQT0xMSU4gd2FrZXVwczogQw0KK2F2ZXJhZ2UgaW4gJ3JlYWQoKSc6IEQgbnMNCisNCitPdXRw
dXQgZXhwbGFuYXRpb246DQorQSBpcyBjYWxjdWxhdGVkIGFzICJudW1iZXIgb2YgcmVjZWl2ZWQg
Ynl0ZXMiIC8gInRpbWUgaW4gcnggbG9vcCIuDQorQiBpcyB0aW1lLCBzcGVudCBpbiAncmVhZCgp
JyBzeXN0ZW0gY2FsbChleGNsdWRpbmcgJ3BvbGwoKScpDQorQyBpcyBudW1iZXIgb2YgJ3BvbGwo
KScgd2FrZSB1cHMgd2l0aCBQT0xMSU4gYml0IHNldC4NCitEIGlzIEIgLyBDLCBlLmcuIGF2ZXJh
Z2UgYW1vdW50IG9mIHRpbWUsIHNwZW50IGluIHNpbmdsZSAncmVhZCgpJy4NCmRpZmYgLS1naXQg
YS90b29scy90ZXN0aW5nL3Zzb2NrL3Zzb2NrX3BlcmYuYyBiL3Rvb2xzL3Rlc3RpbmcvdnNvY2sv
dnNvY2tfcGVyZi5jDQpuZXcgZmlsZSBtb2RlIDEwMDY0NA0KaW5kZXggMDAwMDAwMDAwMDAwLi4y
NDhmYzMyODVkNWMNCi0tLSAvZGV2L251bGwNCisrKyBiL3Rvb2xzL3Rlc3RpbmcvdnNvY2svdnNv
Y2tfcGVyZi5jDQpAQCAtMCwwICsxLDQzNCBAQA0KKy8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVy
OiBHUEwtMi4wLW9ubHkNCisvKg0KKyAqIHZzb2NrX3BlcmYgLSBiZW5jaG1hcmsgdXRpbGl0eSBm
b3IgdnNvY2suDQorICoNCisgKiBDb3B5cmlnaHQgKEMpIDIwMjIgU2JlckRldmljZXMuDQorICoN
CisgKiBBdXRob3I6IEFyc2VuaXkgS3Jhc25vdiA8QVZLcmFzbm92QHNiZXJkZXZpY2VzLnJ1Pg0K
KyAqLw0KKyNpbmNsdWRlIDxnZXRvcHQuaD4NCisjaW5jbHVkZSA8c3RkaW8uaD4NCisjaW5jbHVk
ZSA8c3RkbGliLmg+DQorI2luY2x1ZGUgPHN0ZGJvb2wuaD4NCisjaW5jbHVkZSA8c3RyaW5nLmg+
DQorI2luY2x1ZGUgPGVycm5vLmg+DQorI2luY2x1ZGUgPHVuaXN0ZC5oPg0KKyNpbmNsdWRlIDx0
aW1lLmg+DQorI2luY2x1ZGUgPHN0ZGludC5oPg0KKyNpbmNsdWRlIDxwb2xsLmg+DQorI2luY2x1
ZGUgPHN5cy9zb2NrZXQuaD4NCisjaW5jbHVkZSA8bGludXgvdm1fc29ja2V0cy5oPg0KKw0KKyNk
ZWZpbmUgREVGQVVMVF9CVUZfU0laRV9CWVRFUwkoMTI4ICogMTAyNCkNCisjZGVmaW5lIERFRkFV
TFRfVE9fU0VORF9CWVRFUwkoNjQgKiAxMDI0KQ0KKyNkZWZpbmUgREVGQVVMVF9WU09DS19CVUZf
QllURVMgKDI1NiAqIDEwMjQpDQorI2RlZmluZSBERUZBVUxUX1JDVkxPV0FUX0JZVEVTCTENCisj
ZGVmaW5lIERFRkFVTFRfUE9SVAkJMTIzNA0KKw0KKyNkZWZpbmUgQllURVNfUEVSX0dCCQkoMTAy
NCAqIDEwMjQgKiAxMDI0VUxMKQ0KKyNkZWZpbmUgTlNFQ19QRVJfU0VDCQkoMTAwMDAwMDAwMFVM
TCkNCisNCitzdGF0aWMgdW5zaWduZWQgaW50IHBvcnQgPSBERUZBVUxUX1BPUlQ7DQorc3RhdGlj
IHVuc2lnbmVkIGxvbmcgYnVmX3NpemVfYnl0ZXMgPSBERUZBVUxUX0JVRl9TSVpFX0JZVEVTOw0K
K3N0YXRpYyB1bnNpZ25lZCBsb25nIHZzb2NrX2J1Zl9ieXRlcyA9IERFRkFVTFRfVlNPQ0tfQlVG
X0JZVEVTOw0KKw0KK3N0YXRpYyBpbmxpbmUgdGltZV90IGN1cnJlbnRfbnNlYyh2b2lkKQ0KK3sN
CisJc3RydWN0IHRpbWVzcGVjIHRzOw0KKw0KKwlpZiAoY2xvY2tfZ2V0dGltZShDTE9DS19SRUFM
VElNRSwgJnRzKSkgew0KKwkJcGVycm9yKCJjbG9ja19nZXR0aW1lIik7DQorCQlleGl0KEVYSVRf
RkFJTFVSRSk7DQorCX0NCisNCisJcmV0dXJuICh0cy50dl9zZWMgKiBOU0VDX1BFUl9TRUMpICsg
dHMudHZfbnNlYzsNCit9DQorDQorLyogRnJvbSBsaWIvY21kbGluZS5jLiAqLw0KK3N0YXRpYyB1
bnNpZ25lZCBsb25nIG1lbXBhcnNlKGNvbnN0IGNoYXIgKnB0cikNCit7DQorCWNoYXIgKmVuZHB0
cjsNCisNCisJdW5zaWduZWQgbG9uZyBsb25nIHJldCA9IHN0cnRvdWxsKHB0ciwgJmVuZHB0ciwg
MCk7DQorDQorCXN3aXRjaCAoKmVuZHB0cikgew0KKwljYXNlICdFJzoNCisJY2FzZSAnZSc6DQor
CQlyZXQgPDw9IDEwOw0KKwljYXNlICdQJzoNCisJY2FzZSAncCc6DQorCQlyZXQgPDw9IDEwOw0K
KwljYXNlICdUJzoNCisJY2FzZSAndCc6DQorCQlyZXQgPDw9IDEwOw0KKwljYXNlICdHJzoNCisJ
Y2FzZSAnZyc6DQorCQlyZXQgPDw9IDEwOw0KKwljYXNlICdNJzoNCisJY2FzZSAnbSc6DQorCQly
ZXQgPDw9IDEwOw0KKwljYXNlICdLJzoNCisJY2FzZSAnayc6DQorCQlyZXQgPDw9IDEwOw0KKwkJ
ZW5kcHRyKys7DQorCWRlZmF1bHQ6DQorCQlicmVhazsNCisJfQ0KKw0KKwlyZXR1cm4gcmV0Ow0K
K30NCisNCitzdGF0aWMgdm9pZCB2c29ja19pbmNyZWFzZV9idWZfc2l6ZShpbnQgZmQpDQorew0K
KwlpZiAoc2V0c29ja29wdChmZCwgQUZfVlNPQ0ssIFNPX1ZNX1NPQ0tFVFNfQlVGRkVSX01BWF9T
SVpFLA0KKwkJICAgICAgICZ2c29ja19idWZfYnl0ZXMsIHNpemVvZih2c29ja19idWZfYnl0ZXMp
KSkgew0KKwkJcGVycm9yKCJzZXRzb2Nrb3B0KFNPX1ZNX1NPQ0tFVFNfQlVGRkVSX01BWF9TSVpF
KSIpOw0KKwkJZXhpdChFWElUX0ZBSUxVUkUpOw0KKwl9DQorDQorCWlmIChzZXRzb2Nrb3B0KGZk
LCBBRl9WU09DSywgU09fVk1fU09DS0VUU19CVUZGRVJfU0laRSwNCisJCSAgICAgICAmdnNvY2tf
YnVmX2J5dGVzLCBzaXplb2YodnNvY2tfYnVmX2J5dGVzKSkpIHsNCisJCXBlcnJvcigic2V0c29j
a29wdChTT19WTV9TT0NLRVRTX0JVRkZFUl9TSVpFKSIpOw0KKwkJZXhpdChFWElUX0ZBSUxVUkUp
Ow0KKwl9DQorfQ0KKw0KK3N0YXRpYyBpbnQgdnNvY2tfY29ubmVjdCh1bnNpZ25lZCBpbnQgY2lk
LCB1bnNpZ25lZCBpbnQgcG9ydCkNCit7DQorCXVuaW9uIHsNCisJCXN0cnVjdCBzb2NrYWRkciBz
YTsNCisJCXN0cnVjdCBzb2NrYWRkcl92bSBzdm07DQorCX0gYWRkciA9IHsNCisJCS5zdm0gPSB7
DQorCQkJLnN2bV9mYW1pbHkgPSBBRl9WU09DSywNCisJCQkuc3ZtX3BvcnQgPSBwb3J0LA0KKwkJ
CS5zdm1fY2lkID0gY2lkLA0KKwkJfSwNCisJfTsNCisJaW50IGZkOw0KKw0KKwlmZCA9IHNvY2tl
dChBRl9WU09DSywgU09DS19TVFJFQU0sIDApOw0KKw0KKwlpZiAoZmQgPCAwKSB7DQorCQlwZXJy
b3IoInNvY2tldCIpOw0KKwkJcmV0dXJuIC0xOw0KKwl9DQorDQorCWlmIChjb25uZWN0KGZkLCAm
YWRkci5zYSwgc2l6ZW9mKGFkZHIuc3ZtKSkgPCAwKSB7DQorCQlwZXJyb3IoImNvbm5lY3QiKTsN
CisJCWNsb3NlKGZkKTsNCisJCXJldHVybiAtMTsNCisJfQ0KKw0KKwlyZXR1cm4gZmQ7DQorfQ0K
Kw0KK3N0YXRpYyBmbG9hdCBnZXRfZ2Jwcyh1bnNpZ25lZCBsb25nIGJ5dGVzLCB0aW1lX3QgbnNf
ZGVsdGEpDQorew0KKwlyZXR1cm4gKChmbG9hdClieXRlcyAvIEJZVEVTX1BFUl9HQikgLw0KKwkg
ICAgICAgKChmbG9hdCluc19kZWx0YSAvIE5TRUNfUEVSX1NFQyk7DQorfQ0KKw0KK3N0YXRpYyB2
b2lkIHJ1bl9yZWNlaXZlcih1bnNpZ25lZCBsb25nIHJjdmxvd2F0X2J5dGVzKQ0KK3sNCisJdW5z
aWduZWQgaW50IHJlYWRfY250Ow0KKwl0aW1lX3QgcnhfYmVnaW5fbnM7DQorCXRpbWVfdCBpbl9y
ZWFkX25zOw0KKwlzaXplX3QgdG90YWxfcmVjdjsNCisJaW50IGNsaWVudF9mZDsNCisJY2hhciAq
ZGF0YTsNCisJaW50IGZkOw0KKwl1bmlvbiB7DQorCQlzdHJ1Y3Qgc29ja2FkZHIgc2E7DQorCQlz
dHJ1Y3Qgc29ja2FkZHJfdm0gc3ZtOw0KKwl9IGFkZHIgPSB7DQorCQkuc3ZtID0gew0KKwkJCS5z
dm1fZmFtaWx5ID0gQUZfVlNPQ0ssDQorCQkJLnN2bV9wb3J0ID0gcG9ydCwNCisJCQkuc3ZtX2Np
ZCA9IFZNQUREUl9DSURfQU5ZLA0KKwkJfSwNCisJfTsNCisJdW5pb24gew0KKwkJc3RydWN0IHNv
Y2thZGRyIHNhOw0KKwkJc3RydWN0IHNvY2thZGRyX3ZtIHN2bTsNCisJfSBjbGllbnRhZGRyOw0K
Kw0KKwlzb2NrbGVuX3QgY2xpZW50YWRkcl9sZW4gPSBzaXplb2YoY2xpZW50YWRkci5zdm0pOw0K
Kw0KKwlwcmludGYoIlJ1biBhcyByZWNlaXZlclxuIik7DQorCXByaW50ZigiTGlzdGVuIHBvcnQg
JXVcbiIsIHBvcnQpOw0KKwlwcmludGYoIlJYIGJ1ZmZlciAlbHUgYnl0ZXNcbiIsIGJ1Zl9zaXpl
X2J5dGVzKTsNCisJcHJpbnRmKCJ2c29jayBidWZmZXIgJWx1IGJ5dGVzXG4iLCB2c29ja19idWZf
Ynl0ZXMpOw0KKwlwcmludGYoIlNPX1JDVkxPV0FUICVsdSBieXRlc1xuIiwgcmN2bG93YXRfYnl0
ZXMpOw0KKw0KKwlmZCA9IHNvY2tldChBRl9WU09DSywgU09DS19TVFJFQU0sIDApOw0KKw0KKwlp
ZiAoZmQgPCAwKSB7DQorCQlwZXJyb3IoInNvY2tldCIpOw0KKwkJZXhpdChFWElUX0ZBSUxVUkUp
Ow0KKwl9DQorDQorCWlmIChiaW5kKGZkLCAmYWRkci5zYSwgc2l6ZW9mKGFkZHIuc3ZtKSkgPCAw
KSB7DQorCQlwZXJyb3IoImJpbmQiKTsNCisJCWV4aXQoRVhJVF9GQUlMVVJFKTsNCisJfQ0KKw0K
KwlpZiAobGlzdGVuKGZkLCAxKSA8IDApIHsNCisJCXBlcnJvcigibGlzdGVuIik7DQorCQlleGl0
KEVYSVRfRkFJTFVSRSk7DQorCX0NCisNCisJY2xpZW50X2ZkID0gYWNjZXB0KGZkLCAmY2xpZW50
YWRkci5zYSwgJmNsaWVudGFkZHJfbGVuKTsNCisNCisJaWYgKGNsaWVudF9mZCA8IDApIHsNCisJ
CXBlcnJvcigiYWNjZXB0Iik7DQorCQlleGl0KEVYSVRfRkFJTFVSRSk7DQorCX0NCisNCisJdnNv
Y2tfaW5jcmVhc2VfYnVmX3NpemUoY2xpZW50X2ZkKTsNCisNCisJaWYgKHNldHNvY2tvcHQoY2xp
ZW50X2ZkLCBTT0xfU09DS0VULCBTT19SQ1ZMT1dBVCwNCisJCSAgICAgICAmcmN2bG93YXRfYnl0
ZXMsDQorCQkgICAgICAgc2l6ZW9mKHJjdmxvd2F0X2J5dGVzKSkpIHsNCisJCXBlcnJvcigic2V0
c29ja29wdChTT19SQ1ZMT1dBVCkiKTsNCisJCWV4aXQoRVhJVF9GQUlMVVJFKTsNCisJfQ0KKw0K
KwlkYXRhID0gbWFsbG9jKGJ1Zl9zaXplX2J5dGVzKTsNCisNCisJaWYgKCFkYXRhKSB7DQorCQlw
cmludGYoIm1hbGxvYyBmYWlsZWRcbiIpOw0KKwkJZXhpdChFWElUX0ZBSUxVUkUpOw0KKwl9DQor
DQorCXJlYWRfY250ID0gMDsNCisJaW5fcmVhZF9ucyA9IDA7DQorCXRvdGFsX3JlY3YgPSAwOw0K
KwlyeF9iZWdpbl9ucyA9IGN1cnJlbnRfbnNlYygpOw0KKw0KKwl3aGlsZSAoMSkgew0KKwkJc3Ry
dWN0IHBvbGxmZCBmZHMgPSB7IDAgfTsNCisNCisJCWZkcy5mZCA9IGNsaWVudF9mZDsNCisJCWZk
cy5ldmVudHMgPSBQT0xMSU4gfCBQT0xMRVJSIHwNCisJCQkgICAgIFBPTExIVVAgfCBQT0xMUkRI
VVA7DQorDQorCQlpZiAocG9sbCgmZmRzLCAxLCAtMSkgPCAwKSB7DQorCQkJcGVycm9yKCJwb2xs
Iik7DQorCQkJZXhpdChFWElUX0ZBSUxVUkUpOw0KKwkJfQ0KKw0KKwkJaWYgKGZkcy5yZXZlbnRz
ICYgUE9MTEVSUikgew0KKwkJCXByaW50ZigiJ3BvbGwoKScgZXJyb3JcbiIpOw0KKwkJCWV4aXQo
RVhJVF9GQUlMVVJFKTsNCisJCX0NCisNCisJCWlmIChmZHMucmV2ZW50cyAmIFBPTExJTikgew0K
KwkJCXNzaXplX3QgYnl0ZXNfcmVhZDsNCisJCQl0aW1lX3QgdDsNCisNCisJCQl0ID0gY3VycmVu
dF9uc2VjKCk7DQorCQkJYnl0ZXNfcmVhZCA9IHJlYWQoZmRzLmZkLCBkYXRhLCBidWZfc2l6ZV9i
eXRlcyk7DQorCQkJaW5fcmVhZF9ucyArPSAoY3VycmVudF9uc2VjKCkgLSB0KTsNCisJCQlyZWFk
X2NudCsrOw0KKw0KKwkJCWlmICghYnl0ZXNfcmVhZCkNCisJCQkJYnJlYWs7DQorDQorCQkJaWYg
KGJ5dGVzX3JlYWQgPCAwKSB7DQorCQkJCXBlcnJvcigicmVhZCIpOw0KKwkJCQlleGl0KEVYSVRf
RkFJTFVSRSk7DQorCQkJfQ0KKw0KKwkJCXRvdGFsX3JlY3YgKz0gYnl0ZXNfcmVhZDsNCisJCX0N
CisNCisJCWlmIChmZHMucmV2ZW50cyAmIChQT0xMSFVQIHwgUE9MTFJESFVQKSkNCisJCQlicmVh
azsNCisJfQ0KKw0KKwlwcmludGYoInJ4IHBlcmZvcm1hbmNlOiAlZiBHYi9zXG4iLA0KKwkgICAg
ICAgZ2V0X2dicHModG90YWxfcmVjdiwgY3VycmVudF9uc2VjKCkgLSByeF9iZWdpbl9ucykpOw0K
KwlwcmludGYoInRvdGFsIHRpbWUgaW4gJ3JlYWQoKSc6ICVmIHNlY1xuIiwgKGZsb2F0KWluX3Jl
YWRfbnMgLyBOU0VDX1BFUl9TRUMpOw0KKwlwcmludGYoIlBPTExJTiB3YWtldXBzOiAlaVxuIiwg
cmVhZF9jbnQpOw0KKwlwcmludGYoImF2ZXJhZ2UgdGltZSBpbiAncmVhZCgpJzogJWYgbnNcbiIs
IChmbG9hdClpbl9yZWFkX25zIC8gcmVhZF9jbnQpOw0KKw0KKwlmcmVlKGRhdGEpOw0KKwljbG9z
ZShjbGllbnRfZmQpOw0KKwljbG9zZShmZCk7DQorfQ0KKw0KK3N0YXRpYyB2b2lkIHJ1bl9zZW5k
ZXIoaW50IHBlZXJfY2lkLCB1bnNpZ25lZCBsb25nIHRvX3NlbmRfYnl0ZXMpDQorew0KKwl0aW1l
X3QgdHhfYmVnaW5fbnM7DQorCXNpemVfdCB0b3RhbF9zZW5kOw0KKwl2b2lkICpkYXRhOw0KKwlp
bnQgZmQ7DQorDQorCXByaW50ZigiUnVuIGFzIHNlbmRlclxuIik7DQorCXByaW50ZigiQ29ubmVj
dCB0byAlaToldVxuIiwgcGVlcl9jaWQsIHBvcnQpOw0KKwlwcmludGYoIlNlbmQgJWx1IGJ5dGVz
XG4iLCB0b19zZW5kX2J5dGVzKTsNCisJcHJpbnRmKCJUWCBidWZmZXIgJWx1IGJ5dGVzXG4iLCBi
dWZfc2l6ZV9ieXRlcyk7DQorDQorCWZkID0gdnNvY2tfY29ubmVjdChwZWVyX2NpZCwgcG9ydCk7
DQorDQorCWlmIChmZCA8IDApDQorCQlleGl0KEVYSVRfRkFJTFVSRSk7DQorDQorCWRhdGEgPSBt
YWxsb2MoYnVmX3NpemVfYnl0ZXMpOw0KKw0KKwlpZiAoIWRhdGEpIHsNCisJCXByaW50ZigibWFs
bG9jIGZhaWxlZFxuIik7DQorCQlleGl0KEVYSVRfRkFJTFVSRSk7DQorCX0NCisNCisJbWVtc2V0
KGRhdGEsIDAsIGJ1Zl9zaXplX2J5dGVzKTsNCisJdG90YWxfc2VuZCA9IDA7DQorCXR4X2JlZ2lu
X25zID0gY3VycmVudF9uc2VjKCk7DQorDQorCXdoaWxlICh0b3RhbF9zZW5kIDwgdG9fc2VuZF9i
eXRlcykgew0KKwkJc3NpemVfdCBzZW50Ow0KKw0KKwkJc2VudCA9IHdyaXRlKGZkLCBkYXRhLCBi
dWZfc2l6ZV9ieXRlcyk7DQorDQorCQlpZiAoc2VudCA8PSAwKSB7DQorCQkJcGVycm9yKCJ3cml0
ZSIpOw0KKwkJCWV4aXQoRVhJVF9GQUlMVVJFKTsNCisJCX0NCisNCisJCXRvdGFsX3NlbmQgKz0g
c2VudDsNCisJfQ0KKw0KKwlwcmludGYoInR4IHBlcmZvcm1hbmNlOiAlZiBHYi9zXG4iLA0KKwkg
ICAgICAgZ2V0X2dicHModG90YWxfc2VuZCwgY3VycmVudF9uc2VjKCkgLSB0eF9iZWdpbl9ucykp
Ow0KKw0KKwljbG9zZShmZCk7DQorCWZyZWUoZGF0YSk7DQorfQ0KKw0KK3N0YXRpYyBjb25zdCBj
aGFyIG9wdHN0cmluZ1tdID0gIiI7DQorc3RhdGljIGNvbnN0IHN0cnVjdCBvcHRpb24gbG9uZ29w
dHNbXSA9IHsNCisJew0KKwkJLm5hbWUgPSAiaGVscCIsDQorCQkuaGFzX2FyZyA9IG5vX2FyZ3Vt
ZW50LA0KKwkJLnZhbCA9ICdIJywNCisJfSwNCisJew0KKwkJLm5hbWUgPSAic2VuZGVyIiwNCisJ
CS5oYXNfYXJnID0gcmVxdWlyZWRfYXJndW1lbnQsDQorCQkudmFsID0gJ1MnLA0KKwl9LA0KKwl7
DQorCQkubmFtZSA9ICJwb3J0IiwNCisJCS5oYXNfYXJnID0gcmVxdWlyZWRfYXJndW1lbnQsDQor
CQkudmFsID0gJ1AnLA0KKwl9LA0KKwl7DQorCQkubmFtZSA9ICJieXRlcyIsDQorCQkuaGFzX2Fy
ZyA9IHJlcXVpcmVkX2FyZ3VtZW50LA0KKwkJLnZhbCA9ICdNJywNCisJfSwNCisJew0KKwkJLm5h
bWUgPSAiYnVmLXNpemUiLA0KKwkJLmhhc19hcmcgPSByZXF1aXJlZF9hcmd1bWVudCwNCisJCS52
YWwgPSAnQicsDQorCX0sDQorCXsNCisJCS5uYW1lID0gInZzay1zaXplIiwNCisJCS5oYXNfYXJn
ID0gcmVxdWlyZWRfYXJndW1lbnQsDQorCQkudmFsID0gJ1YnLA0KKwl9LA0KKwl7DQorCQkubmFt
ZSA9ICJyY3Zsb3dhdCIsDQorCQkuaGFzX2FyZyA9IHJlcXVpcmVkX2FyZ3VtZW50LA0KKwkJLnZh
bCA9ICdSJywNCisJfSwNCisJe30sDQorfTsNCisNCitzdGF0aWMgdm9pZCB1c2FnZSh2b2lkKQ0K
K3sNCisJcHJpbnRmKCJVc2FnZTogLi92c29ja19wZXJmIFstLWhlbHBdIFtvcHRpb25zXVxuIg0K
KwkgICAgICAgIlxuIg0KKwkgICAgICAgIlRoaXMgaXMgYmVuY2htYXJraW5nIHV0aWxpdHksIHRv
IHRlc3QgdnNvY2sgcGVyZm9ybWFuY2UuXG4iDQorCSAgICAgICAiSXQgcnVucyBpbiB0d28gbW9k
ZXM6IHNlbmRlciBvciByZWNlaXZlci4gSW4gc2VuZGVyIG1vZGUsIGl0XG4iDQorCSAgICAgICAi
Y29ubmVjdHMgdG8gdGhlIHNwZWNpZmllZCBDSUQgYW5kIHN0YXJ0cyBkYXRhIHRyYW5zbWlzc2lv
bi5cbiINCisJICAgICAgICJcbiINCisJICAgICAgICJPcHRpb25zOlxuIg0KKwkgICAgICAgIiAg
LS1oZWxwCQkJVGhpcyBtZXNzYWdlXG4iDQorCSAgICAgICAiICAtLXNlbmRlciAgIDxjaWQ+CQlT
ZW5kZXIgbW9kZSAocmVjZWl2ZXIgZGVmYXVsdClcbiINCisJICAgICAgICIgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIDxjaWQ+IG9mIHRoZSByZWNlaXZlciB0byBjb25uZWN0IHRvXG4i
DQorCSAgICAgICAiICAtLXBvcnQgICAgIDxwb3J0PgkJUG9ydCAoZGVmYXVsdCAlZClcbiINCisJ
ICAgICAgICIgIC0tYnl0ZXMgICAgPGJ5dGVzPktNRwkJQnl0ZXMgdG8gc2VuZCAoZGVmYXVsdCAl
ZClcbiINCisJICAgICAgICIgIC0tYnVmLXNpemUgPGJ5dGVzPktNRwkJRGF0YSBidWZmZXIgc2l6
ZSAoZGVmYXVsdCAlZCkuIEluIHNlbmRlciBtb2RlXG4iDQorCSAgICAgICAiICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBpdCBpcyB0aGUgYnVmZmVyIHNpemUsIHBhc3NlZCB0byAnd3Jp
dGUoKScuIEluXG4iDQorCSAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBy
ZWNlaXZlciBtb2RlIGl0IGlzIHRoZSBidWZmZXIgc2l6ZSBwYXNzZWQgdG8gJ3JlYWQoKScuXG4i
DQorCSAgICAgICAiICAtLXZzay1zaXplIDxieXRlcz5LTUcJCVNvY2tldCBidWZmZXIgc2l6ZSAo
ZGVmYXVsdCAlZClcbiINCisJICAgICAgICIgIC0tcmN2bG93YXQgPGJ5dGVzPktNRwkJU09fUkNW
TE9XQVQgdmFsdWUgKGRlZmF1bHQgJWQpXG4iDQorCSAgICAgICAiXG4iLCBERUZBVUxUX1BPUlQs
IERFRkFVTFRfVE9fU0VORF9CWVRFUywNCisJICAgICAgIERFRkFVTFRfQlVGX1NJWkVfQllURVMs
IERFRkFVTFRfVlNPQ0tfQlVGX0JZVEVTLA0KKwkgICAgICAgREVGQVVMVF9SQ1ZMT1dBVF9CWVRF
Uyk7DQorCWV4aXQoRVhJVF9GQUlMVVJFKTsNCit9DQorDQorc3RhdGljIGxvbmcgc3RydG9seChj
b25zdCBjaGFyICphcmcpDQorew0KKwlsb25nIHZhbHVlOw0KKwljaGFyICplbmQ7DQorDQorCXZh
bHVlID0gc3RydG9sKGFyZywgJmVuZCwgMTApOw0KKw0KKwlpZiAoZW5kICE9IGFyZyArIHN0cmxl
bihhcmcpKQ0KKwkJdXNhZ2UoKTsNCisNCisJcmV0dXJuIHZhbHVlOw0KK30NCisNCitpbnQgbWFp
bihpbnQgYXJnYywgY2hhciAqKmFyZ3YpDQorew0KKwl1bnNpZ25lZCBsb25nIHRvX3NlbmRfYnl0
ZXMgPSBERUZBVUxUX1RPX1NFTkRfQllURVM7DQorCXVuc2lnbmVkIGxvbmcgcmN2bG93YXRfYnl0
ZXMgPSBERUZBVUxUX1JDVkxPV0FUX0JZVEVTOw0KKwlpbnQgcGVlcl9jaWQgPSAtMTsNCisJYm9v
bCBzZW5kZXIgPSBmYWxzZTsNCisNCisJd2hpbGUgKDEpIHsNCisJCWludCBvcHQgPSBnZXRvcHRf
bG9uZyhhcmdjLCBhcmd2LCBvcHRzdHJpbmcsIGxvbmdvcHRzLCBOVUxMKTsNCisNCisJCWlmIChv
cHQgPT0gLTEpDQorCQkJYnJlYWs7DQorDQorCQlzd2l0Y2ggKG9wdCkgew0KKwkJY2FzZSAnVic6
IC8qIFBlZXIgYnVmZmVyIHNpemUuICovDQorCQkJdnNvY2tfYnVmX2J5dGVzID0gbWVtcGFyc2Uo
b3B0YXJnKTsNCisJCQlicmVhazsNCisJCWNhc2UgJ1InOiAvKiBTT19SQ1ZMT1dBVCB2YWx1ZS4g
Ki8NCisJCQlyY3Zsb3dhdF9ieXRlcyA9IG1lbXBhcnNlKG9wdGFyZyk7DQorCQkJYnJlYWs7DQor
CQljYXNlICdQJzogLyogUG9ydCB0byBjb25uZWN0IHRvLiAqLw0KKwkJCXBvcnQgPSBzdHJ0b2x4
KG9wdGFyZyk7DQorCQkJYnJlYWs7DQorCQljYXNlICdNJzogLyogQnl0ZXMgdG8gc2VuZC4gKi8N
CisJCQl0b19zZW5kX2J5dGVzID0gbWVtcGFyc2Uob3B0YXJnKTsNCisJCQlicmVhazsNCisJCWNh
c2UgJ0InOiAvKiBTaXplIG9mIHJ4L3R4IGJ1ZmZlci4gKi8NCisJCQlidWZfc2l6ZV9ieXRlcyA9
IG1lbXBhcnNlKG9wdGFyZyk7DQorCQkJYnJlYWs7DQorCQljYXNlICdTJzogLyogU2VuZGVyIG1v
ZGUuIENJRCB0byBjb25uZWN0IHRvLiAqLw0KKwkJCXBlZXJfY2lkID0gc3RydG9seChvcHRhcmcp
Ow0KKwkJCXNlbmRlciA9IHRydWU7DQorCQkJYnJlYWs7DQorCQljYXNlICdIJzogLyogSGVscC4g
Ki8NCisJCQl1c2FnZSgpOw0KKwkJCWJyZWFrOw0KKwkJZGVmYXVsdDoNCisJCQl1c2FnZSgpOw0K
KwkJfQ0KKwl9DQorDQorCWlmICghc2VuZGVyKQ0KKwkJcnVuX3JlY2VpdmVyKHJjdmxvd2F0X2J5
dGVzKTsNCisJZWxzZQ0KKwkJcnVuX3NlbmRlcihwZWVyX2NpZCwgdG9fc2VuZF9ieXRlcyk7DQor
DQorCXJldHVybiAwOw0KK30NCi0tIA0KMi4yNS4xDQo=
