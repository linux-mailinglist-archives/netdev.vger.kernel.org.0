Return-Path: <netdev-owner@vger.kernel.org>
X-Original-To: lists+netdev@lfdr.de
Delivered-To: lists+netdev@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id F1FCD210E96
	for <lists+netdev@lfdr.de>; Wed,  1 Jul 2020 17:11:12 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1731798AbgGAPIY (ORCPT <rfc822;lists+netdev@lfdr.de>);
        Wed, 1 Jul 2020 11:08:24 -0400
Received: from mail-bn8nam12on2056.outbound.protection.outlook.com ([40.107.237.56]:52640
        "EHLO NAM12-BN8-obe.outbound.protection.outlook.com"
        rhost-flags-OK-OK-OK-FAIL) by vger.kernel.org with ESMTP
        id S1731787AbgGAPIM (ORCPT <rfc822;netdev@vger.kernel.org>);
        Wed, 1 Jul 2020 11:08:12 -0400
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=A2avvME+nOjwc5jQtUPyVKwhvWFVVV0+QfXeRFWMGyJNPKWTG4bLbsyYCs7bRr48TXWOXI7zPJlk8N7fDe7xm7R4YMS8S+BuScPc47Mza3dHsPQ0cduhwI0p42ynUjWO9WVXuKfjvfKxxWsJ4+aOajQeLkcO2FQQk7Q+26XUe2Trjcoi7wAh7YvwlqXmxteCF1nBuIgUjRo0v4bFDZdFMEBZFywgUw4uo3eJ7tnIYn6y2D3crcM3nvGsGF/y/25Q4ob+cC1CkYmBDzYuIanRw1AQ63znct6NFRgvup+zinN5KTIsYBrKBJYSASchS/DQTi7+xHsfE/p+P7jGZ8vw2w==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com;
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=VNBkTpAfHPJyt4bgHDYKWshZzX+zwJScGMgyhbBEL+U=;
 b=JMzSLwGYV2G8L3IqmZIu+qD/aa/zyShMJyuNMkQdI8AHY/HBdXoaXyEr3wioas7p2u13Q0DD6/paTsQkQdYXv6NnypQ6QiKXYrF/XfQxIovZ63CKbFCfIsGnQMnW7iD/HJIxv2z0ZqVRDdzVnO2G/NPWD8afMsh4U9z/QSRQPOhe/yOldM2jafmqUr8Q6p6hbSwcCWNYsMDnq4KsLsrS74sB1tyu53H4wl/Zhru2BtKStX5cuMaD0ul3npBA04+Dkkl5S/bdn70B0o9OqzfA8Q7HSjuuFloGzP+rnSSwLu/gsOVKgaBkUZeNIVDYp7eBcQVte873eSqwT2GCr2+QDQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=silabs.com; dmarc=pass action=none header.from=silabs.com;
 dkim=pass header.d=silabs.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=silabs.onmicrosoft.com; s=selector2-silabs-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=VNBkTpAfHPJyt4bgHDYKWshZzX+zwJScGMgyhbBEL+U=;
 b=YFJM2Fh77eSLEKDyUvZLvVwWoTsVe2c71fdhu9TALpH7bbYZifHw9hRBLrGQC1CPGZWqfSJpd9fLgq/YgsUL1VtCGg7zjk3CR5xms7r/Tgp6YC+NBO8+PMJiLx4KZpaphH9HVxYIulzFu75BwWMwbL5Lkxzf5yRNqHjbxQumHhE=
Authentication-Results: driverdev.osuosl.org; dkim=none (message not signed)
 header.d=none;driverdev.osuosl.org; dmarc=none action=none
 header.from=silabs.com;
Received: from SN6PR11MB2718.namprd11.prod.outlook.com (2603:10b6:805:63::18)
 by SA0PR11MB4736.namprd11.prod.outlook.com (2603:10b6:806:9f::14) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.3153.22; Wed, 1 Jul
 2020 15:08:05 +0000
Received: from SN6PR11MB2718.namprd11.prod.outlook.com
 ([fe80::c504:2d66:a8f7:2336]) by SN6PR11MB2718.namprd11.prod.outlook.com
 ([fe80::c504:2d66:a8f7:2336%7]) with mapi id 15.20.3131.033; Wed, 1 Jul 2020
 15:08:05 +0000
From:   Jerome Pouiller <Jerome.Pouiller@silabs.com>
To:     devel@driverdev.osuosl.org, linux-wireless@vger.kernel.org
Cc:     netdev@vger.kernel.org, linux-kernel@vger.kernel.org,
        Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
        Kalle Valo <kvalo@codeaurora.org>,
        "David S . Miller" <davem@davemloft.net>,
        =?UTF-8?q?J=C3=A9r=C3=B4me=20Pouiller?= 
        <jerome.pouiller@silabs.com>
Subject: [PATCH 03/13] staging: wfx: correctly retrieve vif ID from Tx confirmation
Date:   Wed,  1 Jul 2020 17:06:57 +0200
Message-Id: <20200701150707.222985-4-Jerome.Pouiller@silabs.com>
X-Mailer: git-send-email 2.27.0
In-Reply-To: <20200701150707.222985-1-Jerome.Pouiller@silabs.com>
References: <20200701150707.222985-1-Jerome.Pouiller@silabs.com>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
X-ClientProxiedBy: DM5PR07CA0143.namprd07.prod.outlook.com
 (2603:10b6:3:13e::33) To SN6PR11MB2718.namprd11.prod.outlook.com
 (2603:10b6:805:63::18)
MIME-Version: 1.0
X-MS-Exchange-MessageSentRepresentingType: 1
Received: from pc-42.silabs.com (2a01:e35:2435:66a0:544b:f17b:7ae8:fb7) by DM5PR07CA0143.namprd07.prod.outlook.com (2603:10b6:3:13e::33) with Microsoft SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.3153.21 via Frontend Transport; Wed, 1 Jul 2020 15:08:03 +0000
X-Mailer: git-send-email 2.27.0
X-Originating-IP: [2a01:e35:2435:66a0:544b:f17b:7ae8:fb7]
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-Correlation-Id: 61ce94be-83b0-4da4-f8f4-08d81dd08e0d
X-MS-TrafficTypeDiagnostic: SA0PR11MB4736:
X-MS-Exchange-Transport-Forked: True
X-Microsoft-Antispam-PRVS: <SA0PR11MB47360DDCC8070C9D2EAC5CBB936C0@SA0PR11MB4736.namprd11.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:8882;
X-Forefront-PRVS: 04519BA941
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: u4mJ4NYYmaXHrt15/WNuOkzCXubx6oocPAH7bCPe1ug/fn2oKT/onndBGn84+qHNKJOHXTMvdAOKGvTHQkCYpVVkZP21su96cfwpL19RXkiqixJdHeJc2fbDvMmVfsh/0tGNkIBsWsqMY+VHGv/2jHvRwCBP9aMwpBrq0GOBa9Xy3YsslGk6EOzYv0AuU0WDb9yotWYaxIsempSUrGRs+ebFWevooezR1Mc6JWVPzjFSknY50hhxRPNt2+28arsWKgYIoDsQI7ZxAA953WTv+L1lHt4mp7C/AhWpppShDeyc2Ukag7SChPmHnklqzGlx
X-Forefront-Antispam-Report: CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:SN6PR11MB2718.namprd11.prod.outlook.com;PTR:;CAT:NONE;SFTY:;SFS:(39850400004)(366004)(346002)(376002)(396003)(136003)(5660300002)(6486002)(86362001)(6666004)(66574015)(36756003)(2906002)(186003)(83380400001)(16526019)(8936002)(66556008)(66476007)(107886003)(4326008)(8676002)(2616005)(1076003)(478600001)(316002)(54906003)(66946007)(52116002)(7696005);DIR:OUT;SFP:1101;
X-MS-Exchange-AntiSpam-MessageData: mjI630kvkSYorw3tnOeuKGU7eStzgRRg4/EW+6PH98hsIdv0D5pHywFpyNHNYa1n1tuZDHYMx3NvJXsKnu84DhzyqhNMyn2CcMmyvoGnVnvh0Ldo3f6nH8AA0gaL2DZSRmkGw4QS8/LmdRLlhOI3Jfrb7VDeU5X+ac+cJ3PIefJZoF35QFi33aejOzsHYysQR9ZKzq0gzezNZ56d4WDzD5rhVrxplNGmfFZvQu9YnDOxRTUjHRlwdyeK2RXHT/yoKTkjOuWorlTiCN30Kd8Wnv+Rh7i8RbrYDX99trJOIlVlWw2xlWJrpNlwZaFgCXWOjbA/xn80EI0MM5E8L0TTpiLAe27zZay6W+h0mw6txde7J/hAlCL4js9ufDqeHUWEaD97mFaeRQnXackG0ZvIoJeIM744mdYUrQ435j2RXXJMB7uRe7sL9ZRZ2RaRpqyg1z9rPehQ6ZxPvbaFhPhY3PfftXOnBmU0fZleGyEHck/E3OBDnL/BNLtAr1tyZF1vCFpPa/7uvxay/YuFNTI/0DHnUxLeyoHjakHAR1m8sU0=
X-OriginatorOrg: silabs.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 61ce94be-83b0-4da4-f8f4-08d81dd08e0d
X-MS-Exchange-CrossTenant-AuthSource: SN6PR11MB2718.namprd11.prod.outlook.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 01 Jul 2020 15:08:05.3094
 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: 54dbd822-5231-4b20-944d-6f4abcd541fb
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: KczwUX4CbmEKYaYB0RNHV6NudcCe0dvswV6WfXWsYGRYEKA8dIca10ChxZjA3W/7bj1TFkmtNLEidakm+6+P3Q==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: SA0PR11MB4736
Sender: netdev-owner@vger.kernel.org
Precedence: bulk
List-ID: <netdev.vger.kernel.org>
X-Mailing-List: netdev@vger.kernel.org

RnJvbTogSsOpcsO0bWUgUG91aWxsZXIgPGplcm9tZS5wb3VpbGxlckBzaWxhYnMuY29tPgoKVGhl
IGRldmljZSBpcyBhYmxlIHRvIHNlbmQgbXVsdGlwbGUgVHggY29uZmlybWF0aW9ucyBpbiB0aGUg
b25lIHJlcGx5LgpJbiB0aGlzIGNhc2UsIHRoZXJlIGlzIG9ubHkgb25lIHZpZiBpZGVudGlmaWVy
IGZvciBhbGwgdGhlCmNvbmZpcm1hdGlvbnMuCgpVbmZvcnR1bmF0ZWx5LCB0byBnZW5lcmF0ZSB0
aGlzIGtpbmQgb2YgbWVzc2FnZXMgdGhlIGRldmljZSBzcXVhc2hlcyBhbGwKdGhlIGNvbmZpcm1h
dGlvbnMgd2hhdGV2ZXIgdGhlaXIgdmlmIElEIGFuZCB1c2UgdGhlIHZpZiBJRCBvZiB0aGUgZmly
c3QKY29uZmlybWF0aW9uLiBTbywgdGhlIGRyaXZlciBjYW5ub3QgcmVseSBvbiB0aGUgdmlmIElE
IG1lbnRpb25lZCBpbiB0aGUKaGVhZGVyLiBGb3J0dW5hdGVseSwgdXNpbmcgdGhlIHBhY2tldF9p
ZCwgdGhlIGRyaXZlciBjYW4gcmV0cmlldmUgdGhlIFR4CnJlcXVlc3QgYW5kIHRoZSBhc3NvY2lh
dGVkIHZpZi4KClNpZ25lZC1vZmYtYnk6IErDqXLDtG1lIFBvdWlsbGVyIDxqZXJvbWUucG91aWxs
ZXJAc2lsYWJzLmNvbT4KLS0tCiBkcml2ZXJzL3N0YWdpbmcvd2Z4L2RhdGFfdHguYyB8IDE2ICsr
KysrKysrKystLS0tLS0KIGRyaXZlcnMvc3RhZ2luZy93ZngvZGF0YV90eC5oIHwgIDIgKy0KIGRy
aXZlcnMvc3RhZ2luZy93ZngvaGlmX3J4LmMgIHwgMTQgKystLS0tLS0tLS0tLS0KIGRyaXZlcnMv
c3RhZ2luZy93ZngvcXVldWUuYyAgIHwgMjIgKysrKysrKysrKysrLS0tLS0tLS0tLQogZHJpdmVy
cy9zdGFnaW5nL3dmeC9xdWV1ZS5oICAgfCAgMiArLQogNSBmaWxlcyBjaGFuZ2VkLCAyNiBpbnNl
cnRpb25zKCspLCAzMCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL3N0YWdpbmcv
d2Z4L2RhdGFfdHguYyBiL2RyaXZlcnMvc3RhZ2luZy93ZngvZGF0YV90eC5jCmluZGV4IGNlMzA0
OGM5NDk2MWMuLmRjZWM3MjJhZmIxNzQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvc3RhZ2luZy93Zngv
ZGF0YV90eC5jCisrKyBiL2RyaXZlcnMvc3RhZ2luZy93ZngvZGF0YV90eC5jCkBAIC01MzMsMjUg
KzUzMywyOSBAQCBzdGF0aWMgdm9pZCB3ZnhfdHhfZmlsbF9yYXRlcyhzdHJ1Y3Qgd2Z4X2RldiAq
d2RldiwKIAkJZGV2X2RiZyh3ZGV2LT5kZXYsICIlZCBtb3JlIHJldHJpZXMgdGhhbiBleHBlY3Rl
ZFxuIiwgdHhfY291bnQpOwogfQogCi12b2lkIHdmeF90eF9jb25maXJtX2NiKHN0cnVjdCB3Znhf
dmlmICp3dmlmLCBjb25zdCBzdHJ1Y3QgaGlmX2NuZl90eCAqYXJnKQordm9pZCB3ZnhfdHhfY29u
ZmlybV9jYihzdHJ1Y3Qgd2Z4X2RldiAqd2RldiwgY29uc3Qgc3RydWN0IGhpZl9jbmZfdHggKmFy
ZykKIHsKIAlzdHJ1Y3QgaWVlZTgwMjExX3R4X2luZm8gKnR4X2luZm87CiAJY29uc3Qgc3RydWN0
IHdmeF90eF9wcml2ICp0eF9wcml2OworCXN0cnVjdCB3ZnhfdmlmICp3dmlmOwogCXN0cnVjdCBz
a19idWZmICpza2I7CiAKLQlza2IgPSB3ZnhfcGVuZGluZ19nZXQod3ZpZiwgYXJnLT5wYWNrZXRf
aWQpOworCXNrYiA9IHdmeF9wZW5kaW5nX2dldCh3ZGV2LCBhcmctPnBhY2tldF9pZCk7CiAJaWYg
KCFza2IpIHsKLQkJZGV2X3dhcm4od3ZpZi0+d2Rldi0+ZGV2LCAicmVjZWl2ZWQgdW5rbm93biBw
YWNrZXRfaWQgKCUjLjh4KSBmcm9tIGNoaXBcbiIsCisJCWRldl93YXJuKHdkZXYtPmRldiwgInJl
Y2VpdmVkIHVua25vd24gcGFja2V0X2lkICglIy44eCkgZnJvbSBjaGlwXG4iLAogCQkJIGFyZy0+
cGFja2V0X2lkKTsKIAkJcmV0dXJuOwogCX0KKwl3dmlmID0gd2Rldl90b193dmlmKHdkZXYsICgo
c3RydWN0IGhpZl9tc2cgKilza2ItPmRhdGEpLT5pbnRlcmZhY2UpOworCVdBUk5fT04oIXd2aWYp
OworCWlmICghd3ZpZikKKwkJcmV0dXJuOwogCXR4X2luZm8gPSBJRUVFODAyMTFfU0tCX0NCKHNr
Yik7CiAJdHhfcHJpdiA9IHdmeF9za2JfdHhfcHJpdihza2IpOwotCV90cmFjZV90eF9zdGF0cyhh
cmcsIHNrYiwKLQkJCXdmeF9wZW5kaW5nX2dldF9wa3RfdXNfZGVsYXkod3ZpZi0+d2Rldiwgc2ti
KSk7CisJX3RyYWNlX3R4X3N0YXRzKGFyZywgc2tiLCB3ZnhfcGVuZGluZ19nZXRfcGt0X3VzX2Rl
bGF5KHdkZXYsIHNrYikpOwogCiAJLy8gWW91IGNhbiB0b3VjaCB0byB0eF9wcml2LCBidXQgZG9u
J3QgdG91Y2ggdG8gdHhfaW5mby0+c3RhdHVzLgotCXdmeF90eF9maWxsX3JhdGVzKHd2aWYtPndk
ZXYsIHR4X2luZm8sIGFyZyk7CisJd2Z4X3R4X2ZpbGxfcmF0ZXMod2RldiwgdHhfaW5mbywgYXJn
KTsKIAlpZiAodHhfcHJpdi0+aGFzX3N0YSkKIAkJd2Z4X3R4X3VwZGF0ZV9zdGEod3ZpZiwgd2Z4
X3NrYl9oZHI4MDIxMShza2IpKTsKIAlza2JfdHJpbShza2IsIHNrYi0+bGVuIC0gd2Z4X3R4X2dl
dF9pY3ZfbGVuKHR4X3ByaXYtPmh3X2tleSkpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9zdGFnaW5n
L3dmeC9kYXRhX3R4LmggYi9kcml2ZXJzL3N0YWdpbmcvd2Z4L2RhdGFfdHguaAppbmRleCA1NGZm
ZjI0NTA4ZmI5Li5iMTcyN2RkZWNkNWUyIDEwMDY0NAotLS0gYS9kcml2ZXJzL3N0YWdpbmcvd2Z4
L2RhdGFfdHguaAorKysgYi9kcml2ZXJzL3N0YWdpbmcvd2Z4L2RhdGFfdHguaApAQCAtNDQsNyAr
NDQsNyBAQCB2b2lkIHdmeF90eF9wb2xpY3lfdXBsb2FkX3dvcmsoc3RydWN0IHdvcmtfc3RydWN0
ICp3b3JrKTsKIAogdm9pZCB3ZnhfdHgoc3RydWN0IGllZWU4MDIxMV9odyAqaHcsIHN0cnVjdCBp
ZWVlODAyMTFfdHhfY29udHJvbCAqY29udHJvbCwKIAkgICAgc3RydWN0IHNrX2J1ZmYgKnNrYik7
Ci12b2lkIHdmeF90eF9jb25maXJtX2NiKHN0cnVjdCB3ZnhfdmlmICp3dmlmLCBjb25zdCBzdHJ1
Y3QgaGlmX2NuZl90eCAqYXJnKTsKK3ZvaWQgd2Z4X3R4X2NvbmZpcm1fY2Ioc3RydWN0IHdmeF9k
ZXYgKndkZXYsIGNvbnN0IHN0cnVjdCBoaWZfY25mX3R4ICphcmcpOwogdm9pZCB3ZnhfZmx1c2go
c3RydWN0IGllZWU4MDIxMV9odyAqaHcsIHN0cnVjdCBpZWVlODAyMTFfdmlmICp2aWYsCiAJICAg
ICAgIHUzMiBxdWV1ZXMsIGJvb2wgZHJvcCk7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvc3RhZ2lu
Zy93ZngvaGlmX3J4LmMgYi9kcml2ZXJzL3N0YWdpbmcvd2Z4L2hpZl9yeC5jCmluZGV4IGJiMTU2
MDMzZDFlMTYuLmUzZWJkOTEwZmFiZmQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvc3RhZ2luZy93Zngv
aGlmX3J4LmMKKysrIGIvZHJpdmVycy9zdGFnaW5nL3dmeC9oaWZfcnguYwpAQCAtNjMsMTMgKzYz
LDggQEAgc3RhdGljIGludCBoaWZfdHhfY29uZmlybShzdHJ1Y3Qgd2Z4X2RldiAqd2RldiwKIAkJ
CSAgY29uc3Qgc3RydWN0IGhpZl9tc2cgKmhpZiwgY29uc3Qgdm9pZCAqYnVmKQogewogCWNvbnN0
IHN0cnVjdCBoaWZfY25mX3R4ICpib2R5ID0gYnVmOwotCXN0cnVjdCB3ZnhfdmlmICp3dmlmID0g
d2Rldl90b193dmlmKHdkZXYsIGhpZi0+aW50ZXJmYWNlKTsKIAotCVdBUk5fT04oIXd2aWYpOwot
CWlmICghd3ZpZikKLQkJcmV0dXJuIC1FRkFVTFQ7Ci0KLQl3ZnhfdHhfY29uZmlybV9jYih3dmlm
LCBib2R5KTsKKwl3ZnhfdHhfY29uZmlybV9jYih3ZGV2LCBib2R5KTsKIAlyZXR1cm4gMDsKIH0K
IApAQCAtNzcsMTYgKzcyLDExIEBAIHN0YXRpYyBpbnQgaGlmX211bHRpX3R4X2NvbmZpcm0oc3Ry
dWN0IHdmeF9kZXYgKndkZXYsCiAJCQkJY29uc3Qgc3RydWN0IGhpZl9tc2cgKmhpZiwgY29uc3Qg
dm9pZCAqYnVmKQogewogCWNvbnN0IHN0cnVjdCBoaWZfY25mX211bHRpX3RyYW5zbWl0ICpib2R5
ID0gYnVmOwotCXN0cnVjdCB3ZnhfdmlmICp3dmlmID0gd2Rldl90b193dmlmKHdkZXYsIGhpZi0+
aW50ZXJmYWNlKTsKIAlpbnQgaTsKIAogCVdBUk4oYm9keS0+bnVtX3R4X2NvbmZzIDw9IDAsICJj
b3JydXB0ZWQgbWVzc2FnZSIpOwotCVdBUk5fT04oIXd2aWYpOwotCWlmICghd3ZpZikKLQkJcmV0
dXJuIC1FRkFVTFQ7Ci0KIAlmb3IgKGkgPSAwOyBpIDwgYm9keS0+bnVtX3R4X2NvbmZzOyBpKysp
Ci0JCXdmeF90eF9jb25maXJtX2NiKHd2aWYsICZib2R5LT50eF9jb25mX3BheWxvYWRbaV0pOwor
CQl3ZnhfdHhfY29uZmlybV9jYih3ZGV2LCAmYm9keS0+dHhfY29uZl9wYXlsb2FkW2ldKTsKIAly
ZXR1cm4gMDsKIH0KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9zdGFnaW5nL3dmeC9xdWV1ZS5jIGIv
ZHJpdmVycy9zdGFnaW5nL3dmeC9xdWV1ZS5jCmluZGV4IDYwNjkxNDMzNjlmMzAuLjY3OGY2MjI2
MzkwOTMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvc3RhZ2luZy93ZngvcXVldWUuYworKysgYi9kcml2
ZXJzL3N0YWdpbmcvd2Z4L3F1ZXVlLmMKQEAgLTEzOCwzMCArMTM4LDMyIEBAIHZvaWQgd2Z4X3Bl
bmRpbmdfZHJvcChzdHJ1Y3Qgd2Z4X2RldiAqd2Rldiwgc3RydWN0IHNrX2J1ZmZfaGVhZCAqZHJv
cHBlZCkKIAl9CiB9CiAKLXN0cnVjdCBza19idWZmICp3ZnhfcGVuZGluZ19nZXQoc3RydWN0IHdm
eF92aWYgKnd2aWYsIHUzMiBwYWNrZXRfaWQpCitzdHJ1Y3Qgc2tfYnVmZiAqd2Z4X3BlbmRpbmdf
Z2V0KHN0cnVjdCB3ZnhfZGV2ICp3ZGV2LCB1MzIgcGFja2V0X2lkKQogewogCXN0cnVjdCB3Znhf
cXVldWUgKnF1ZXVlOwogCXN0cnVjdCBoaWZfcmVxX3R4ICpyZXE7CisJc3RydWN0IHdmeF92aWYg
Knd2aWY7CiAJc3RydWN0IGhpZl9tc2cgKmhpZjsKIAlzdHJ1Y3Qgc2tfYnVmZiAqc2tiOwogCi0J
c3Bpbl9sb2NrX2JoKCZ3dmlmLT53ZGV2LT50eF9wZW5kaW5nLmxvY2spOwotCXNrYl9xdWV1ZV93
YWxrKCZ3dmlmLT53ZGV2LT50eF9wZW5kaW5nLCBza2IpIHsKKwlzcGluX2xvY2tfYmgoJndkZXYt
PnR4X3BlbmRpbmcubG9jayk7CisJc2tiX3F1ZXVlX3dhbGsoJndkZXYtPnR4X3BlbmRpbmcsIHNr
YikgewogCQloaWYgPSAoc3RydWN0IGhpZl9tc2cgKilza2ItPmRhdGE7CiAJCXJlcSA9IChzdHJ1
Y3QgaGlmX3JlcV90eCAqKWhpZi0+Ym9keTsKLQkJaWYgKHJlcS0+cGFja2V0X2lkID09IHBhY2tl
dF9pZCkgewotCQkJc3Bpbl91bmxvY2tfYmgoJnd2aWYtPndkZXYtPnR4X3BlbmRpbmcubG9jayk7
CisJCWlmIChyZXEtPnBhY2tldF9pZCAhPSBwYWNrZXRfaWQpCisJCQljb250aW51ZTsKKwkJc3Bp
bl91bmxvY2tfYmgoJndkZXYtPnR4X3BlbmRpbmcubG9jayk7CisJCXd2aWYgPSB3ZGV2X3RvX3d2
aWYod2RldiwgaGlmLT5pbnRlcmZhY2UpOworCQlpZiAod3ZpZikgewogCQkJcXVldWUgPSAmd3Zp
Zi0+dHhfcXVldWVbc2tiX2dldF9xdWV1ZV9tYXBwaW5nKHNrYildOwotCQkJV0FSTihoaWYtPmlu
dGVyZmFjZSAhPSB3dmlmLT5pZCwgInNlbnQgZnJhbWUgJTA4eCBvbiB2aWYgJWQsIGJ1dCBnZXQg
cmVwbHkgb24gdmlmICVkIiwKLQkJCSAgICAgcmVxLT5wYWNrZXRfaWQsIGhpZi0+aW50ZXJmYWNl
LCB3dmlmLT5pZCk7CiAJCQlXQVJOX09OKHNrYl9nZXRfcXVldWVfbWFwcGluZyhza2IpID4gMyk7
CiAJCQlXQVJOX09OKCFhdG9taWNfcmVhZCgmcXVldWUtPnBlbmRpbmdfZnJhbWVzKSk7CiAJCQlh
dG9taWNfZGVjKCZxdWV1ZS0+cGVuZGluZ19mcmFtZXMpOwotCQkJc2tiX3VubGluayhza2IsICZ3
dmlmLT53ZGV2LT50eF9wZW5kaW5nKTsKLQkJCXJldHVybiBza2I7CiAJCX0KKwkJc2tiX3VubGlu
ayhza2IsICZ3ZGV2LT50eF9wZW5kaW5nKTsKKwkJcmV0dXJuIHNrYjsKIAl9Ci0Jc3Bpbl91bmxv
Y2tfYmgoJnd2aWYtPndkZXYtPnR4X3BlbmRpbmcubG9jayk7CisJc3Bpbl91bmxvY2tfYmgoJndk
ZXYtPnR4X3BlbmRpbmcubG9jayk7CiAJV0FSTigxLCAiY2Fubm90IGZpbmQgcGFja2V0IGluIHBl
bmRpbmcgcXVldWUiKTsKIAlyZXR1cm4gTlVMTDsKIH0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvc3Rh
Z2luZy93ZngvcXVldWUuaCBiL2RyaXZlcnMvc3RhZ2luZy93ZngvcXVldWUuaAppbmRleCBkZmJi
ZTRiMTExMTEzLi4yMmQ3YzkzNjkwN2Y0IDEwMDY0NAotLS0gYS9kcml2ZXJzL3N0YWdpbmcvd2Z4
L3F1ZXVlLmgKKysrIGIvZHJpdmVycy9zdGFnaW5nL3dmeC9xdWV1ZS5oCkBAIC0zNSw3ICszNSw3
IEBAIGJvb2wgd2Z4X3R4X3F1ZXVlX2VtcHR5KHN0cnVjdCB3ZnhfdmlmICp3dmlmLCBzdHJ1Y3Qg
d2Z4X3F1ZXVlICpxdWV1ZSk7CiB2b2lkIHdmeF90eF9xdWV1ZV9kcm9wKHN0cnVjdCB3Znhfdmlm
ICp3dmlmLCBzdHJ1Y3Qgd2Z4X3F1ZXVlICpxdWV1ZSwKIAkJICAgICAgIHN0cnVjdCBza19idWZm
X2hlYWQgKmRyb3BwZWQpOwogCi1zdHJ1Y3Qgc2tfYnVmZiAqd2Z4X3BlbmRpbmdfZ2V0KHN0cnVj
dCB3ZnhfdmlmICp3dmlmLCB1MzIgcGFja2V0X2lkKTsKK3N0cnVjdCBza19idWZmICp3ZnhfcGVu
ZGluZ19nZXQoc3RydWN0IHdmeF9kZXYgKndkZXYsIHUzMiBwYWNrZXRfaWQpOwogdm9pZCB3Znhf
cGVuZGluZ19kcm9wKHN0cnVjdCB3ZnhfZGV2ICp3ZGV2LCBzdHJ1Y3Qgc2tfYnVmZl9oZWFkICpk
cm9wcGVkKTsKIHVuc2lnbmVkIGludCB3ZnhfcGVuZGluZ19nZXRfcGt0X3VzX2RlbGF5KHN0cnVj
dCB3ZnhfZGV2ICp3ZGV2LAogCQkJCQkgIHN0cnVjdCBza19idWZmICpza2IpOwotLSAKMi4yNy4w
Cgo=
