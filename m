Return-Path: <netdev-owner@vger.kernel.org>
X-Original-To: lists+netdev@lfdr.de
Delivered-To: lists+netdev@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id 6AA7E1181DB
	for <lists+netdev@lfdr.de>; Tue, 10 Dec 2019 09:14:57 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726987AbfLJIO4 (ORCPT <rfc822;lists+netdev@lfdr.de>);
        Tue, 10 Dec 2019 03:14:56 -0500
Received: from mailgw02.mediatek.com ([210.61.82.184]:45567 "EHLO
        mailgw02.mediatek.com" rhost-flags-OK-FAIL-OK-FAIL) by vger.kernel.org
        with ESMTP id S1726071AbfLJIOy (ORCPT
        <rfc822;netdev@vger.kernel.org>); Tue, 10 Dec 2019 03:14:54 -0500
X-UUID: a18674d7b33c423e9e67b7440f4771cf-20191210
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=mediatek.com; s=dk;
        h=Content-Transfer-Encoding:Content-Type:MIME-Version:References:In-Reply-To:Message-ID:Date:Subject:CC:To:From; bh=c2C/fEHYw/8uqadmiP2m2xa2hsUpAd52urXVJTPlYck=;
        b=UJ5NATuxMtqHln5i6BTpWiLnxGKgWvp4DpRsKVO2xdnz2cJaT4XL8F/T5fK3CTF4nAai0EKPAcqp+rr8eCLq7uURJv5e5h+ZIzKLSAB4zgnchXesQLo0uFS8vs5w2yp49j6bez1z3v/uN+1+Lpq0uYid9awCqzvbnovrooEysu4=;
X-UUID: a18674d7b33c423e9e67b7440f4771cf-20191210
Received: from mtkcas09.mediatek.inc [(172.21.101.178)] by mailgw02.mediatek.com
        (envelope-from <landen.chao@mediatek.com>)
        (Cellopoint E-mail Firewall v4.1.10 Build 0809 with TLS)
        with ESMTP id 1965641267; Tue, 10 Dec 2019 16:14:46 +0800
Received: from mtkcas08.mediatek.inc (172.21.101.126) by
 mtkmbs07n2.mediatek.inc (172.21.101.141) with Microsoft SMTP Server (TLS) id
 15.0.1395.4; Tue, 10 Dec 2019 16:14:31 +0800
Received: from mtksdccf07.mediatek.inc (172.21.84.99) by mtkcas08.mediatek.inc
 (172.21.101.73) with Microsoft SMTP Server id 15.0.1395.4 via Frontend
 Transport; Tue, 10 Dec 2019 16:14:26 +0800
From:   Landen Chao <landen.chao@mediatek.com>
To:     <andrew@lunn.ch>, <f.fainelli@gmail.com>,
        <vivien.didelot@savoirfairelinux.com>, <matthias.bgg@gmail.com>,
        <robh+dt@kernel.org>, <mark.rutland@arm.com>
CC:     <devicetree@vger.kernel.org>, <netdev@vger.kernel.org>,
        <linux-kernel@vger.kernel.org>,
        <linux-mediatek@lists.infradead.org>, <davem@davemloft.net>,
        <sean.wang@mediatek.com>, <opensource@vdorst.com>,
        <frank-w@public-files.de>, Landen Chao <landen.chao@mediatek.com>
Subject: [PATCH net-next 2/6] net: dsa: mt7530: Extend device data ready for adding a new hardware
Date:   Tue, 10 Dec 2019 16:14:38 +0800
Message-ID: <2d546d6bb15ff8b4b75af2220e20db4e634f4145.1575914275.git.landen.chao@mediatek.com>
X-Mailer: git-send-email 2.18.0
In-Reply-To: <cover.1575914275.git.landen.chao@mediatek.com>
References: <cover.1575914275.git.landen.chao@mediatek.com>
MIME-Version: 1.0
Content-Type: text/plain
X-MTK:  N
Content-Transfer-Encoding: base64
Sender: netdev-owner@vger.kernel.org
Precedence: bulk
List-ID: <netdev.vger.kernel.org>
X-Mailing-List: netdev@vger.kernel.org

QWRkIGEgc3RydWN0dXJlIGhvbGRpbmcgcmVxdWlyZWQgb3BlcmF0aW9ucyBmb3IgZWFjaCBkZXZp
Y2Ugc3VjaCBhcyBkZXZpY2UNCmluaXRpYWxpemF0aW9uLCBQSFkgcG9ydCByZWFkIG9yIHdyaXRl
LCBhIGNoZWNrZXIgd2hldGhlciBQSFkgaW50ZXJmYWNlIGlzDQpzdXBwb3J0ZWQgb24gYSBjZXJ0
YWluIHBvcnQsIE1BQyBwb3J0IHNldHVwIGZvciBlaXRoZXIgYnVzIHBhZCBvciBhDQpzcGVjaWZp
YyBQSFkgaW50ZXJmYWNlLg0KDQpUaGUgcGF0Y2ggaXMgZG9uZSBmb3IgcmVhZHkgYWRkaW5nIGEg
bmV3IGhhcmR3YXJlIE1UNzUzMS4NCg0KU2lnbmVkLW9mZi1ieTogTGFuZGVuIENoYW8gPGxhbmRl
bi5jaGFvQG1lZGlhdGVrLmNvbT4NClNpZ25lZC1vZmYtYnk6IFNlYW4gV2FuZyA8c2Vhbi53YW5n
QG1lZGlhdGVrLmNvbT4NCi0tLQ0KIGRyaXZlcnMvbmV0L2RzYS9tdDc1MzAuYyB8IDIzMSArKysr
KysrKysrKysrKysrKysrKysrKysrKysrKy0tLS0tLS0tLS0NCiBkcml2ZXJzL25ldC9kc2EvbXQ3
NTMwLmggfCAgMjkgKysrKy0NCiAyIGZpbGVzIGNoYW5nZWQsIDIwMyBpbnNlcnRpb25zKCspLCA1
NyBkZWxldGlvbnMoLSkNCg0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2RzYS9tdDc1MzAuYyBi
L2RyaXZlcnMvbmV0L2RzYS9tdDc1MzAuYw0KaW5kZXggZWQxZWMxMGVjNjJiLi45YTY0OGQxZjVk
MDkgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL25ldC9kc2EvbXQ3NTMwLmMNCisrKyBiL2RyaXZlcnMv
bmV0L2RzYS9tdDc1MzAuYw0KQEAgLTQyNSw3ICs0MjUsNyBAQCBtdDc1MzBfZmRiX3dyaXRlKHN0
cnVjdCBtdDc1MzBfcHJpdiAqcHJpdiwgdTE2IHZpZCwNCiB9DQogDQogc3RhdGljIGludA0KLW10
NzUzMF9wYWRfY2xrX3NldHVwKHN0cnVjdCBkc2Ffc3dpdGNoICpkcywgaW50IG1vZGUpDQorbXQ3
NTMwX3BhZF9jbGtfc2V0dXAoc3RydWN0IGRzYV9zd2l0Y2ggKmRzLCBwaHlfaW50ZXJmYWNlX3Qg
bW9kZSkNCiB7DQogCXN0cnVjdCBtdDc1MzBfcHJpdiAqcHJpdiA9IGRzLT5wcml2Ow0KIAl1MzIg
bmNwbzEsIHNzY19kZWx0YSwgdHJnaW50LCBpLCB4dGFsOw0KQEAgLTEzODAsMTMgKzEzODAsMTEx
IEBAIG10NzUzMF9zZXR1cChzdHJ1Y3QgZHNhX3N3aXRjaCAqZHMpDQogCXJldHVybiAwOw0KIH0N
CiANCi1zdGF0aWMgdm9pZCBtdDc1MzBfcGh5bGlua19tYWNfY29uZmlnKHN0cnVjdCBkc2Ffc3dp
dGNoICpkcywgaW50IHBvcnQsDQorc3RhdGljIGJvb2wgbXQ3NTMwX3BoeV9zdXBwb3J0ZWQoc3Ry
dWN0IGRzYV9zd2l0Y2ggKmRzLCBpbnQgcG9ydCwNCisJCQkJIGNvbnN0IHN0cnVjdCBwaHlsaW5r
X2xpbmtfc3RhdGUgKnN0YXRlKQ0KK3sNCisJc3RydWN0IG10NzUzMF9wcml2ICpwcml2ID0gZHMt
PnByaXY7DQorDQorCXN3aXRjaCAocG9ydCkgew0KKwljYXNlIDA6IC8qIEludGVybmFsIHBoeSAq
Lw0KKwljYXNlIDE6DQorCWNhc2UgMjoNCisJY2FzZSAzOg0KKwljYXNlIDQ6DQorCQlpZiAoc3Rh
dGUtPmludGVyZmFjZSAhPSBQSFlfSU5URVJGQUNFX01PREVfR01JSSkNCisJCQlnb3RvIHVuc3Vw
cG9ydGVkOw0KKwkJYnJlYWs7DQorCWNhc2UgNTogLyogMm5kIGNwdSBwb3J0IHdpdGggcGh5IG9m
IHBvcnQgMCBvciA0IC8gZXh0ZXJuYWwgcGh5ICovDQorCQlpZiAoIXBoeV9pbnRlcmZhY2VfbW9k
ZV9pc19yZ21paShzdGF0ZS0+aW50ZXJmYWNlKSAmJg0KKwkJICAgIHN0YXRlLT5pbnRlcmZhY2Ug
IT0gUEhZX0lOVEVSRkFDRV9NT0RFX01JSSAmJg0KKwkJICAgIHN0YXRlLT5pbnRlcmZhY2UgIT0g
UEhZX0lOVEVSRkFDRV9NT0RFX0dNSUkpDQorCQkJZ290byB1bnN1cHBvcnRlZDsNCisJCWJyZWFr
Ow0KKwljYXNlIDY6IC8qIDFzdCBjcHUgcG9ydCAqLw0KKwkJaWYgKHN0YXRlLT5pbnRlcmZhY2Ug
IT0gUEhZX0lOVEVSRkFDRV9NT0RFX1JHTUlJICYmDQorCQkgICAgc3RhdGUtPmludGVyZmFjZSAh
PSBQSFlfSU5URVJGQUNFX01PREVfVFJHTUlJKQ0KKwkJCWdvdG8gdW5zdXBwb3J0ZWQ7DQorCQli
cmVhazsNCisJZGVmYXVsdDoNCisJCWRldl9lcnIocHJpdi0+ZGV2LCAiJXM6IHVuc3VwcG9ydGVk
IHBvcnQ6ICVpXG4iLCBfX2Z1bmNfXywNCisJCQlwb3J0KTsNCisJCWdvdG8gdW5zdXBwb3J0ZWQ7
DQorCX0NCisNCisJcmV0dXJuIHRydWU7DQorDQordW5zdXBwb3J0ZWQ6DQorCXJldHVybiBmYWxz
ZTsNCit9DQorDQorc3RhdGljIGJvb2wgbXQ3NTN4X3BoeV9zdXBwb3J0ZWQoc3RydWN0IGRzYV9z
d2l0Y2ggKmRzLCBpbnQgcG9ydCwNCisJCQkJIGNvbnN0IHN0cnVjdCBwaHlsaW5rX2xpbmtfc3Rh
dGUgKnN0YXRlKQ0KK3sNCisJc3RydWN0IG10NzUzMF9wcml2ICpwcml2ID0gZHMtPnByaXY7DQor
DQorCXJldHVybiBwcml2LT5pbmZvLT5waHlfc3VwcG9ydGVkKGRzLCBwb3J0LCBzdGF0ZSk7DQor
fQ0KKw0KK3N0YXRpYyBpbnQNCittdDc1MzBfcGFkX3NldHVwKHN0cnVjdCBkc2Ffc3dpdGNoICpk
cywgY29uc3Qgc3RydWN0IHBoeWxpbmtfbGlua19zdGF0ZSAqc3RhdGUpDQorew0KKwlzdHJ1Y3Qg
bXQ3NTMwX3ByaXYgKnByaXYgPSBkcy0+cHJpdjsNCisNCisJLyogU2V0dXAgVFggY2lyY3VpdCBp
bmNsdWluZyByZWxldmFudCBQQUQgYW5kIGRyaXZpbmcgKi8NCisJbXQ3NTMwX3BhZF9jbGtfc2V0
dXAoZHMsIHN0YXRlLT5pbnRlcmZhY2UpOw0KKw0KKwlpZiAocHJpdi0+aWQgPT0gSURfTVQ3NTMw
KSB7DQorCQkvKiBTZXR1cCBSWCBjaXJjdWl0LCByZWxldmFudCBQQUQgYW5kIGRyaXZpbmcgb24g
dGhlDQorCQkgKiBob3N0IHdoaWNoIG11c3QgYmUgcGxhY2VkIGFmdGVyIHRoZSBzZXR1cCBvbiB0
aGUNCisJCSAqIGRldmljZSBzaWRlIGlzIGFsbCBmaW5pc2hlZC4NCisJCSAqLw0KKwkJbXQ3NjIz
X3BhZF9jbGtfc2V0dXAoZHMpOw0KKwl9DQorDQorCXJldHVybiAwOw0KK30NCisNCitzdGF0aWMg
aW50DQorbXQ3NTN4X3BhZF9zZXR1cChzdHJ1Y3QgZHNhX3N3aXRjaCAqZHMsIGNvbnN0IHN0cnVj
dCBwaHlsaW5rX2xpbmtfc3RhdGUgKnN0YXRlKQ0KK3sNCisJc3RydWN0IG10NzUzMF9wcml2ICpw
cml2ID0gZHMtPnByaXY7DQorDQorCXJldHVybiBwcml2LT5pbmZvLT5wYWRfc2V0dXAoZHMsIHN0
YXRlKTsNCit9DQorDQorc3RhdGljIGludA0KK210NzUzMF9tYWNfc2V0dXAoc3RydWN0IGRzYV9z
d2l0Y2ggKmRzLCBpbnQgcG9ydCwgdW5zaWduZWQgaW50IG1vZGUsDQorCQkgY29uc3Qgc3RydWN0
IHBoeWxpbmtfbGlua19zdGF0ZSAqc3RhdGUpDQorew0KKwlzdHJ1Y3QgbXQ3NTMwX3ByaXYgKnBy
aXYgPSBkcy0+cHJpdjsNCisNCisJLyogT25seSBuZWVkIHRvIHNldHVwIHBvcnQ1LiAqLw0KKwlp
ZiAocG9ydCAhPSA1KQ0KKwkJcmV0dXJuIDA7DQorDQorCW10NzUzMF9zZXR1cF9wb3J0NShwcml2
LT5kcywgc3RhdGUtPmludGVyZmFjZSk7DQorDQorCXJldHVybiAwOw0KK30NCisNCitzdGF0aWMg
aW50IG10NzUzeF9tYWNfc2V0dXAoc3RydWN0IGRzYV9zd2l0Y2ggKmRzLCBpbnQgcG9ydCwgdW5z
aWduZWQgaW50IG1vZGUsDQorCQkJICAgIGNvbnN0IHN0cnVjdCBwaHlsaW5rX2xpbmtfc3RhdGUg
KnN0YXRlKQ0KK3sNCisJc3RydWN0IG10NzUzMF9wcml2ICpwcml2ID0gZHMtPnByaXY7DQorDQor
CXJldHVybiBwcml2LT5pbmZvLT5tYWNfc2V0dXAoZHMsIHBvcnQsIG1vZGUsIHN0YXRlKTsNCit9
DQorDQorc3RhdGljIHZvaWQgbXQ3NTN4X3BoeWxpbmtfbWFjX2NvbmZpZyhzdHJ1Y3QgZHNhX3N3
aXRjaCAqZHMsIGludCBwb3J0LA0KIAkJCQkgICAgICB1bnNpZ25lZCBpbnQgbW9kZSwNCiAJCQkJ
ICAgICAgY29uc3Qgc3RydWN0IHBoeWxpbmtfbGlua19zdGF0ZSAqc3RhdGUpDQogew0KIAlzdHJ1
Y3QgbXQ3NTMwX3ByaXYgKnByaXYgPSBkcy0+cHJpdjsNCiAJdTMyIG1jcl9jdXIsIG1jcl9uZXc7
DQogDQorCWlmICghbXQ3NTN4X3BoeV9zdXBwb3J0ZWQoZHMsIHBvcnQsIHN0YXRlKSkNCisJCXJl
dHVybjsNCisNCiAJc3dpdGNoIChwb3J0KSB7DQogCWNhc2UgMDogLyogSW50ZXJuYWwgcGh5ICov
DQogCWNhc2UgMToNCkBAIC0xMzk5LDM1ICsxNDk3LDI0IEBAIHN0YXRpYyB2b2lkIG10NzUzMF9w
aHlsaW5rX21hY19jb25maWcoc3RydWN0IGRzYV9zd2l0Y2ggKmRzLCBpbnQgcG9ydCwNCiAJY2Fz
ZSA1OiAvKiAybmQgY3B1IHBvcnQgd2l0aCBwaHkgb2YgcG9ydCAwIG9yIDQgLyBleHRlcm5hbCBw
aHkgKi8NCiAJCWlmIChwcml2LT5wNV9pbnRlcmZhY2UgPT0gc3RhdGUtPmludGVyZmFjZSkNCiAJ
CQlicmVhazsNCi0JCWlmICghcGh5X2ludGVyZmFjZV9tb2RlX2lzX3JnbWlpKHN0YXRlLT5pbnRl
cmZhY2UpICYmDQotCQkgICAgc3RhdGUtPmludGVyZmFjZSAhPSBQSFlfSU5URVJGQUNFX01PREVf
TUlJICYmDQotCQkgICAgc3RhdGUtPmludGVyZmFjZSAhPSBQSFlfSU5URVJGQUNFX01PREVfR01J
SSkNCi0JCQlyZXR1cm47DQogDQotCQltdDc1MzBfc2V0dXBfcG9ydDUoZHMsIHN0YXRlLT5pbnRl
cmZhY2UpOw0KKwkJaWYgKG10NzUzeF9tYWNfc2V0dXAoZHMsIHBvcnQsIG1vZGUsIHN0YXRlKSA8
IDApDQorCQkJZ290byB1bnN1cHBvcnRlZDsNCisNCiAJCWJyZWFrOw0KIAljYXNlIDY6IC8qIDFz
dCBjcHUgcG9ydCAqLw0KIAkJaWYgKHByaXYtPnA2X2ludGVyZmFjZSA9PSBzdGF0ZS0+aW50ZXJm
YWNlKQ0KIAkJCWJyZWFrOw0KIA0KLQkJaWYgKHN0YXRlLT5pbnRlcmZhY2UgIT0gUEhZX0lOVEVS
RkFDRV9NT0RFX1JHTUlJICYmDQotCQkgICAgc3RhdGUtPmludGVyZmFjZSAhPSBQSFlfSU5URVJG
QUNFX01PREVfVFJHTUlJKQ0KLQkJCXJldHVybjsNCi0NCi0JCS8qIFNldHVwIFRYIGNpcmN1aXQg
aW5jbHVpbmcgcmVsZXZhbnQgUEFEIGFuZCBkcml2aW5nICovDQotCQltdDc1MzBfcGFkX2Nsa19z
ZXR1cChkcywgc3RhdGUtPmludGVyZmFjZSk7DQorCQltdDc1M3hfcGFkX3NldHVwKGRzLCBzdGF0
ZSk7DQogDQotCQlpZiAocHJpdi0+aWQgPT0gSURfTVQ3NTMwKSB7DQotCQkJLyogU2V0dXAgUlgg
Y2lyY3VpdCwgcmVsZXZhbnQgUEFEIGFuZCBkcml2aW5nIG9uIHRoZQ0KLQkJCSAqIGhvc3Qgd2hp
Y2ggbXVzdCBiZSBwbGFjZWQgYWZ0ZXIgdGhlIHNldHVwIG9uIHRoZQ0KLQkJCSAqIGRldmljZSBz
aWRlIGlzIGFsbCBmaW5pc2hlZC4NCi0JCQkgKi8NCi0JCQltdDc2MjNfcGFkX2Nsa19zZXR1cChk
cyk7DQotCQl9DQorCQlpZiAobXQ3NTN4X21hY19zZXR1cChkcywgcG9ydCwgbW9kZSwgc3RhdGUp
IDwgMCkNCisJCQlnb3RvIHVuc3VwcG9ydGVkOw0KIA0KIAkJcHJpdi0+cDZfaW50ZXJmYWNlID0g
c3RhdGUtPmludGVyZmFjZTsNCiAJCWJyZWFrOw0KIAlkZWZhdWx0Og0KK3Vuc3VwcG9ydGVkOg0K
IAkJZGV2X2Vycihkcy0+ZGV2LCAiJXM6IHVuc3VwcG9ydGVkIHBvcnQ6ICVpXG4iLCBfX2Z1bmNf
XywgcG9ydCk7DQogCQlyZXR1cm47DQogCX0NCkBAIC0xNDg4LDM4ICsxNTc1LDE0IEBAIHN0YXRp
YyB2b2lkIG10NzUzMF9waHlsaW5rX21hY19saW5rX3VwKHN0cnVjdCBkc2Ffc3dpdGNoICpkcywg
aW50IHBvcnQsDQogCW10NzUzMF9wb3J0X3NldF9zdGF0dXMocHJpdiwgcG9ydCwgMSk7DQogfQ0K
IA0KLXN0YXRpYyB2b2lkIG10NzUzMF9waHlsaW5rX3ZhbGlkYXRlKHN0cnVjdCBkc2Ffc3dpdGNo
ICpkcywgaW50IHBvcnQsDQorc3RhdGljIHZvaWQgbXQ3NTN4X3BoeWxpbmtfdmFsaWRhdGUoc3Ry
dWN0IGRzYV9zd2l0Y2ggKmRzLCBpbnQgcG9ydCwNCiAJCQkJICAgIHVuc2lnbmVkIGxvbmcgKnN1
cHBvcnRlZCwNCiAJCQkJICAgIHN0cnVjdCBwaHlsaW5rX2xpbmtfc3RhdGUgKnN0YXRlKQ0KIHsN
CiAJX19FVEhUT09MX0RFQ0xBUkVfTElOS19NT0RFX01BU0sobWFzaykgPSB7IDAsIH07DQogDQot
CXN3aXRjaCAocG9ydCkgew0KLQljYXNlIDA6IC8qIEludGVybmFsIHBoeSAqLw0KLQljYXNlIDE6
DQotCWNhc2UgMjoNCi0JY2FzZSAzOg0KLQljYXNlIDQ6DQotCQlpZiAoc3RhdGUtPmludGVyZmFj
ZSAhPSBQSFlfSU5URVJGQUNFX01PREVfTkEgJiYNCi0JCSAgICBzdGF0ZS0+aW50ZXJmYWNlICE9
IFBIWV9JTlRFUkZBQ0VfTU9ERV9HTUlJKQ0KLQkJCWdvdG8gdW5zdXBwb3J0ZWQ7DQotCQlicmVh
azsNCi0JY2FzZSA1OiAvKiAybmQgY3B1IHBvcnQgd2l0aCBwaHkgb2YgcG9ydCAwIG9yIDQgLyBl
eHRlcm5hbCBwaHkgKi8NCi0JCWlmIChzdGF0ZS0+aW50ZXJmYWNlICE9IFBIWV9JTlRFUkZBQ0Vf
TU9ERV9OQSAmJg0KLQkJICAgICFwaHlfaW50ZXJmYWNlX21vZGVfaXNfcmdtaWkoc3RhdGUtPmlu
dGVyZmFjZSkgJiYNCi0JCSAgICBzdGF0ZS0+aW50ZXJmYWNlICE9IFBIWV9JTlRFUkZBQ0VfTU9E
RV9NSUkgJiYNCi0JCSAgICBzdGF0ZS0+aW50ZXJmYWNlICE9IFBIWV9JTlRFUkZBQ0VfTU9ERV9H
TUlJKQ0KLQkJCWdvdG8gdW5zdXBwb3J0ZWQ7DQotCQlicmVhazsNCi0JY2FzZSA2OiAvKiAxc3Qg
Y3B1IHBvcnQgKi8NCi0JCWlmIChzdGF0ZS0+aW50ZXJmYWNlICE9IFBIWV9JTlRFUkZBQ0VfTU9E
RV9OQSAmJg0KLQkJICAgIHN0YXRlLT5pbnRlcmZhY2UgIT0gUEhZX0lOVEVSRkFDRV9NT0RFX1JH
TUlJICYmDQotCQkgICAgc3RhdGUtPmludGVyZmFjZSAhPSBQSFlfSU5URVJGQUNFX01PREVfVFJH
TUlJKQ0KLQkJCWdvdG8gdW5zdXBwb3J0ZWQ7DQotCQlicmVhazsNCi0JZGVmYXVsdDoNCi0JCWRl
dl9lcnIoZHMtPmRldiwgIiVzOiB1bnN1cHBvcnRlZCBwb3J0OiAlaVxuIiwgX19mdW5jX18sIHBv
cnQpOw0KLXVuc3VwcG9ydGVkOg0KKwlpZiAoc3RhdGUtPmludGVyZmFjZSAhPSBQSFlfSU5URVJG
QUNFX01PREVfTkEgJiYNCisJICAgICFtdDc1M3hfcGh5X3N1cHBvcnRlZChkcywgcG9ydCwgc3Rh
dGUpKSB7DQogCQlsaW5rbW9kZV96ZXJvKHN1cHBvcnRlZCk7DQogCQlyZXR1cm47DQogCX0NCkBA
IC0xNTkwLDEyICsxNjUzLDM2IEBAIG10NzUzMF9waHlsaW5rX21hY19saW5rX3N0YXRlKHN0cnVj
dCBkc2Ffc3dpdGNoICpkcywgaW50IHBvcnQsDQogCXJldHVybiAxOw0KIH0NCiANCitzdGF0aWMg
aW50DQorbXQ3NTN4X3NldHVwKHN0cnVjdCBkc2Ffc3dpdGNoICpkcykNCit7DQorCXN0cnVjdCBt
dDc1MzBfcHJpdiAqcHJpdiA9IGRzLT5wcml2Ow0KKw0KKwlyZXR1cm4gcHJpdi0+aW5mby0+c2V0
dXAoZHMpOw0KK30NCisNCitzdGF0aWMgaW50DQorbXQ3NTN4X3BoeV9yZWFkKHN0cnVjdCBkc2Ff
c3dpdGNoICpkcywgaW50IHBvcnQsIGludCByZWdudW0pDQorew0KKwlzdHJ1Y3QgbXQ3NTMwX3By
aXYgKnByaXYgPSBkcy0+cHJpdjsNCisNCisJcmV0dXJuIHByaXYtPmluZm8tPnBoeV9yZWFkKGRz
LCBwb3J0LCByZWdudW0pOw0KK30NCisNCitzdGF0aWMgaW50DQorbXQ3NTN4X3BoeV93cml0ZShz
dHJ1Y3QgZHNhX3N3aXRjaCAqZHMsIGludCBwb3J0LCBpbnQgcmVnbnVtLCB1MTYgdmFsKQ0KK3sN
CisJc3RydWN0IG10NzUzMF9wcml2ICpwcml2ID0gZHMtPnByaXY7DQorDQorCXJldHVybiBwcml2
LT5pbmZvLT5waHlfd3JpdGUoZHMsIHBvcnQsIHJlZ251bSwgdmFsKTsNCit9DQorDQogc3RhdGlj
IGNvbnN0IHN0cnVjdCBkc2Ffc3dpdGNoX29wcyBtdDc1MzBfc3dpdGNoX29wcyA9IHsNCiAJLmdl
dF90YWdfcHJvdG9jb2wJPSBtdGtfZ2V0X3RhZ19wcm90b2NvbCwNCi0JLnNldHVwCQkJPSBtdDc1
MzBfc2V0dXAsDQorCS5zZXR1cAkJCT0gbXQ3NTN4X3NldHVwLA0KIAkuZ2V0X3N0cmluZ3MJCT0g
bXQ3NTMwX2dldF9zdHJpbmdzLA0KLQkucGh5X3JlYWQJCT0gbXQ3NTMwX3BoeV9yZWFkLA0KLQku
cGh5X3dyaXRlCQk9IG10NzUzMF9waHlfd3JpdGUsDQorCS5waHlfcmVhZAkJPSBtdDc1M3hfcGh5
X3JlYWQsDQorCS5waHlfd3JpdGUJCT0gbXQ3NTN4X3BoeV93cml0ZSwNCiAJLmdldF9ldGh0b29s
X3N0YXRzCT0gbXQ3NTMwX2dldF9ldGh0b29sX3N0YXRzLA0KIAkuZ2V0X3NzZXRfY291bnQJCT0g
bXQ3NTMwX2dldF9zc2V0X2NvdW50LA0KIAkucG9ydF9lbmFibGUJCT0gbXQ3NTMwX3BvcnRfZW5h
YmxlLA0KQEAgLTE2MTAsMTYgKzE2OTcsMzcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkc2Ffc3dp
dGNoX29wcyBtdDc1MzBfc3dpdGNoX29wcyA9IHsNCiAJLnBvcnRfdmxhbl9wcmVwYXJlCT0gbXQ3
NTMwX3BvcnRfdmxhbl9wcmVwYXJlLA0KIAkucG9ydF92bGFuX2FkZAkJPSBtdDc1MzBfcG9ydF92
bGFuX2FkZCwNCiAJLnBvcnRfdmxhbl9kZWwJCT0gbXQ3NTMwX3BvcnRfdmxhbl9kZWwsDQotCS5w
aHlsaW5rX3ZhbGlkYXRlCT0gbXQ3NTMwX3BoeWxpbmtfdmFsaWRhdGUsDQorCS5waHlsaW5rX3Zh
bGlkYXRlCT0gbXQ3NTN4X3BoeWxpbmtfdmFsaWRhdGUsDQogCS5waHlsaW5rX21hY19saW5rX3N0
YXRlID0gbXQ3NTMwX3BoeWxpbmtfbWFjX2xpbmtfc3RhdGUsDQotCS5waHlsaW5rX21hY19jb25m
aWcJPSBtdDc1MzBfcGh5bGlua19tYWNfY29uZmlnLA0KKwkucGh5bGlua19tYWNfY29uZmlnCT0g
bXQ3NTN4X3BoeWxpbmtfbWFjX2NvbmZpZywNCiAJLnBoeWxpbmtfbWFjX2xpbmtfZG93bgk9IG10
NzUzMF9waHlsaW5rX21hY19saW5rX2Rvd24sDQogCS5waHlsaW5rX21hY19saW5rX3VwCT0gbXQ3
NTMwX3BoeWxpbmtfbWFjX2xpbmtfdXAsDQogfTsNCiANCitzdGF0aWMgY29uc3Qgc3RydWN0IG10
NzUzeF9pbmZvIG10NzUzeF90YWJsZVtdID0gew0KKwlbSURfTVQ3NjIxXSA9IHsNCisJCS5pZCA9
IElEX01UNzYyMSwNCisJCS5zZXR1cCA9IG10NzUzMF9zZXR1cCwNCisJCS5waHlfcmVhZCA9IG10
NzUzMF9waHlfcmVhZCwNCisJCS5waHlfd3JpdGUgPSBtdDc1MzBfcGh5X3dyaXRlLA0KKwkJLnBo
eV9zdXBwb3J0ZWQgPSBtdDc1MzBfcGh5X3N1cHBvcnRlZCwNCisJCS5wYWRfc2V0dXAgPSBtdDc1
MzBfcGFkX3NldHVwLA0KKwkJLm1hY19zZXR1cCA9IG10NzUzMF9tYWNfc2V0dXAsDQorCX0sDQor
CVtJRF9NVDc1MzBdID0gew0KKwkJLmlkID0gSURfTVQ3NTMwLA0KKwkJLnNldHVwID0gbXQ3NTMw
X3NldHVwLA0KKwkJLnBoeV9yZWFkID0gbXQ3NTMwX3BoeV9yZWFkLA0KKwkJLnBoeV93cml0ZSA9
IG10NzUzMF9waHlfd3JpdGUsDQorCQkucGh5X3N1cHBvcnRlZCA9IG10NzUzMF9waHlfc3VwcG9y
dGVkLA0KKwkJLnBhZF9zZXR1cCA9IG10NzUzMF9wYWRfc2V0dXAsDQorCQkubWFjX3NldHVwID0g
bXQ3NTMwX21hY19zZXR1cCwNCisJfSwNCit9Ow0KKw0KIHN0YXRpYyBjb25zdCBzdHJ1Y3Qgb2Zf
ZGV2aWNlX2lkIG10NzUzMF9vZl9tYXRjaFtdID0gew0KLQl7IC5jb21wYXRpYmxlID0gIm1lZGlh
dGVrLG10NzYyMSIsIC5kYXRhID0gKHZvaWQgKilJRF9NVDc2MjEsIH0sDQotCXsgLmNvbXBhdGli
bGUgPSAibWVkaWF0ZWssbXQ3NTMwIiwgLmRhdGEgPSAodm9pZCAqKUlEX01UNzUzMCwgfSwNCisJ
eyAuY29tcGF0aWJsZSA9ICJtZWRpYXRlayxtdDc2MjEiLCAuZGF0YSA9ICZtdDc1M3hfdGFibGVb
SURfTVQ3NjIxXSwgfSwNCisJeyAuY29tcGF0aWJsZSA9ICJtZWRpYXRlayxtdDc1MzAiLCAuZGF0
YSA9ICZtdDc1M3hfdGFibGVbSURfTVQ3NTMwXSwgfSwNCiAJeyAvKiBzZW50aW5lbCAqLyB9LA0K
IH07DQogTU9EVUxFX0RFVklDRV9UQUJMRShvZiwgbXQ3NTMwX29mX21hdGNoKTsNCkBAIC0xNjYw
LDggKzE3NjgsMTkgQEAgbXQ3NTMwX3Byb2JlKHN0cnVjdCBtZGlvX2RldmljZSAqbWRpb2RldikN
CiAJLyogR2V0IHRoZSBoYXJkd2FyZSBpZGVudGlmaWVyIGZyb20gdGhlIGRldmljZXRyZWUgbm9k
ZS4NCiAJICogV2Ugd2lsbCBuZWVkIGl0IGZvciBzb21lIG9mIHRoZSBjbG9jayBhbmQgcmVndWxh
dG9yIHNldHVwLg0KIAkgKi8NCi0JcHJpdi0+aWQgPSAodW5zaWduZWQgaW50KSh1bnNpZ25lZCBs
b25nKQ0KLQkJb2ZfZGV2aWNlX2dldF9tYXRjaF9kYXRhKCZtZGlvZGV2LT5kZXYpOw0KKwlwcml2
LT5pbmZvID0gb2ZfZGV2aWNlX2dldF9tYXRjaF9kYXRhKCZtZGlvZGV2LT5kZXYpOw0KKwlpZiAo
IXByaXYtPmluZm8pDQorCQlyZXR1cm4gLUVJTlZBTDsNCisNCisJLyogU2FuaXR5IGNoZWNrIGlm
IHRoZXNlIHJlcXVpcmVkIGRldmljZSBvcGVyc3RhaW9ucyBhcmUgZmlsbGVkDQorCSAqIHByb3Bl
cmx5Lg0KKwkgKi8NCisJaWYgKCFwcml2LT5pbmZvLT5zZXR1cCB8fCAhcHJpdi0+aW5mby0+cGh5
X3JlYWQgfHwNCisJICAgICFwcml2LT5pbmZvLT5waHlfd3JpdGUgfHwgIXByaXYtPmluZm8tPnBo
eV9zdXBwb3J0ZWQgfHwNCisJICAgICFwcml2LT5pbmZvLT5wYWRfc2V0dXAgfHwgIXByaXYtPmlu
Zm8tPm1hY19zZXR1cCkNCisJCXJldHVybiAtRUlOVkFMOw0KKw0KKwlwcml2LT5pZCA9IHByaXYt
PmluZm8tPmlkOw0KIA0KIAlpZiAocHJpdi0+aWQgPT0gSURfTVQ3NTMwKSB7DQogCQlwcml2LT5j
b3JlX3B3ciA9IGRldm1fcmVndWxhdG9yX2dldCgmbWRpb2Rldi0+ZGV2LCAiY29yZSIpOw0KZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2RzYS9tdDc1MzAuaCBiL2RyaXZlcnMvbmV0L2RzYS9tdDc1
MzAuaA0KaW5kZXggY2NiOWRhOGNhZDBkLi5hYWM4NmU0ZmMxNDggMTAwNjQ0DQotLS0gYS9kcml2
ZXJzL25ldC9kc2EvbXQ3NTMwLmgNCisrKyBiL2RyaXZlcnMvbmV0L2RzYS9tdDc1MzAuaA0KQEAg
LTExLDcgKzExLDcgQEANCiAjZGVmaW5lIE1UNzUzMF9OVU1fRkRCX1JFQ09SRFMJCTIwNDgNCiAj
ZGVmaW5lIE1UNzUzMF9BTExfTUVNQkVSUwkJMHhmZg0KIA0KLWVudW0gew0KK2VudW0gbXQ3NTN4
X2lkIHsNCiAJSURfTVQ3NTMwID0gMCwNCiAJSURfTVQ3NjIxID0gMSwNCiB9Ow0KQEAgLTQyOCw2
ICs0MjgsMzIgQEAgc3RhdGljIGNvbnN0IGNoYXIgKnA1X2ludGZfbW9kZXModW5zaWduZWQgaW50
IHA1X2ludGVyZmFjZSkNCiAJfQ0KIH0NCiANCisvKiBzdHJ1Y3QgbXQ3NTN4X2luZm8gLQlUaGlz
IGlzIHRoZSBtYWluIGRhdGEgc3RydWN0dXJlIGZvciBob2xkaW5nIHRoZSBzcGVjaWZpYw0KKyAq
CQkJcGFydCBmb3IgZWFjaCBzdXBwb3J0ZWQgZGV2aWNlDQorICogQHNldHVwOgkJSG9sZGluZyB0
aGUgaGFuZGxlciB0byBhIGRldmljZSBpbml0aWFsaXphdGlvbg0KKyAqIEBwaHlfcmVhZDoJCUhv
bGRpbmcgdGhlIHdheSByZWFkaW5nIFBIWSBwb3J0DQorICogQHBoeV93cml0ZToJCUhvbGRpbmcg
dGhlIHdheSB3cml0aW5nIFBIWSBwb3J0DQorICogQHBoeV9zdXBwb3J0ZWQ6CUNoZWNrIGlmIHRo
ZSBQSFkgdHlwZSBpcyBiZWluZyBzdXBwb3J0ZWQgb24gYSBjZXJ0YWluDQorICoJCQlwb3J0DQor
ICogQHBhZF9zZXR1cDoJCUhvbGRpbmcgdGhlIHdheSBzZXR0aW5nIHVwIHRoZSBidXMgcGFkIGZv
ciBhIGNlcnRhaW4gTUFDDQorICoJCQlwb3J0DQorICogQG1hY19zZXR1cDoJCUhvbGRpbmcgdGhl
IHdheSBzZXR0aW5nIHVwIHRoZSBQSFkgYXR0cmlidXRlIGZvciBhDQorICoJCQljZXJ0YWluIE1B
QyBwb3J0DQorICovDQorc3RydWN0IG10NzUzeF9pbmZvIHsNCisJZW51bSBtdDc1M3hfaWQgaWQ7
DQorDQorCWludCAoKnNldHVwKShzdHJ1Y3QgZHNhX3N3aXRjaCAqZHMpOw0KKwlpbnQgKCpwaHlf
cmVhZCkoc3RydWN0IGRzYV9zd2l0Y2ggKmRzLCBpbnQgcG9ydCwgaW50IHJlZ251bSk7DQorCWlu
dCAoKnBoeV93cml0ZSkoc3RydWN0IGRzYV9zd2l0Y2ggKmRzLCBpbnQgcG9ydCwgaW50IHJlZ251
bSwgdTE2IHZhbCk7DQorCWJvb2wgKCpwaHlfc3VwcG9ydGVkKShzdHJ1Y3QgZHNhX3N3aXRjaCAq
ZHMsIGludCBwb3J0LA0KKwkJCSAgICAgIGNvbnN0IHN0cnVjdCBwaHlsaW5rX2xpbmtfc3RhdGUg
KnN0YXRlKTsNCisJaW50ICgqcGFkX3NldHVwKShzdHJ1Y3QgZHNhX3N3aXRjaCAqZHMsDQorCQkJ
IGNvbnN0IHN0cnVjdCBwaHlsaW5rX2xpbmtfc3RhdGUgKnN0YXRlKTsNCisJaW50ICgqbWFjX3Nl
dHVwKShzdHJ1Y3QgZHNhX3N3aXRjaCAqZHMsIGludCBwb3J0LCB1bnNpZ25lZCBpbnQgbW9kZSwN
CisJCQkgY29uc3Qgc3RydWN0IHBoeWxpbmtfbGlua19zdGF0ZSAqc3RhdGUpOw0KK307DQorDQog
Lyogc3RydWN0IG10NzUzMF9wcml2IC0JVGhpcyBpcyB0aGUgbWFpbiBkYXRhIHN0cnVjdHVyZSBm
b3IgaG9sZGluZyB0aGUgc3RhdGUNCiAgKgkJCW9mIHRoZSBkcml2ZXINCiAgKiBAZGV2OgkJVGhl
IGRldmljZSBwb2ludGVyDQpAQCAtNDU1LDYgKzQ4MSw3IEBAIHN0cnVjdCBtdDc1MzBfcHJpdiB7
DQogCXN0cnVjdCByZWd1bGF0b3IJKmNvcmVfcHdyOw0KIAlzdHJ1Y3QgcmVndWxhdG9yCSppb19w
d3I7DQogCXN0cnVjdCBncGlvX2Rlc2MJKnJlc2V0Ow0KKwljb25zdCBzdHJ1Y3QgbXQ3NTN4X2lu
Zm8gKmluZm87DQogCXVuc2lnbmVkIGludAkJaWQ7DQogCWJvb2wJCQltY207DQogCXBoeV9pbnRl
cmZhY2VfdAkJcDZfaW50ZXJmYWNlOw0KLS0gDQoyLjE3LjENCg==

