Return-Path: <netdev-owner@vger.kernel.org>
X-Original-To: lists+netdev@lfdr.de
Delivered-To: lists+netdev@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 7215430A177
	for <lists+netdev@lfdr.de>; Mon,  1 Feb 2021 06:35:47 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S229963AbhBAFfb (ORCPT <rfc822;lists+netdev@lfdr.de>);
        Mon, 1 Feb 2021 00:35:31 -0500
Received: from mail-il1-f199.google.com ([209.85.166.199]:34293 "EHLO
        mail-il1-f199.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S229966AbhBAF1D (ORCPT
        <rfc822;netdev@vger.kernel.org>); Mon, 1 Feb 2021 00:27:03 -0500
Received: by mail-il1-f199.google.com with SMTP id c16so12745040ile.1
        for <netdev@vger.kernel.org>; Sun, 31 Jan 2021 21:26:48 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-gm-message-state:mime-version:date:message-id:subject:from:to;
        bh=mOuteIF8UAPooau0D/cZWl4oFDJw4SLqefC73M8pDiU=;
        b=nqtGHY1bpP2qAyfmMuFCQPtmebvaxUKd4pK5N54CJmpmNhfIkK9JOTKfxlL/E/aW/F
         3fcHf7yD95IBGebs2cOsenQRQwrfB3RhbqAhi32Wkq8NmuXL9gnqG38aJl1Ikqr/I7kx
         1GAC/1DM6TFB/sNIZ8MENWCgMMObGY+Q+HnJx062Rs5fpLzDQcVgaYYaG2AJDweMbUYJ
         Cfm6742vE5drev4ohty5S3Zg5EacU1mXDcBqqX/4YcWGUfNKJCQ5cLvxOX8aXYamj4uL
         fc4oZ+yFJciAA8PCAZP0ZgWdErrv2eJCDnD2jthgBbd54cnRC0BubLoiEMt0qhWUjkVM
         MImw==
X-Gm-Message-State: AOAM531TIwhIFazGADyneBDkIGeS7Z7wNlwBvq//CbjgG7t749XHMJHt
        xkMbOYAxXgWW2KGzp81HQHW2KkIDumfT5Am/szUJw/TEWUz5
X-Google-Smtp-Source: ABdhPJwk6jyJ1h9tBbtnwk+FTCU6d5MxIKAPn2mwnsIFBSnobEXOxL0CfEPiBRKPR7+Ql7b/WSh0ZSF81ahIGyPXN+HSSjs5FhII
MIME-Version: 1.0
X-Received: by 2002:a05:6e02:1564:: with SMTP id k4mr11437262ilu.282.1612157183044;
 Sun, 31 Jan 2021 21:26:23 -0800 (PST)
Date:   Sun, 31 Jan 2021 21:26:23 -0800
X-Google-Appengine-App-Id: s~syzkaller
X-Google-Appengine-App-Id-Alias: syzkaller
Message-ID: <00000000000037b29b05ba3f9859@google.com>
Subject: WARNING in sta_info_insert_check
From:   syzbot <syzbot+8dcc087eb24227ded47e@syzkaller.appspotmail.com>
To:     davem@davemloft.net, johannes@sipsolutions.net, kuba@kernel.org,
        linux-kernel@vger.kernel.org, linux-wireless@vger.kernel.org,
        netdev@vger.kernel.org, syzkaller-bugs@googlegroups.com
Content-Type: text/plain; charset="UTF-8"
Precedence: bulk
List-ID: <netdev.vger.kernel.org>
X-Mailing-List: netdev@vger.kernel.org

Hello,

syzbot found the following issue on:

HEAD commit:    bec4c296 Merge tag 'ecryptfs-5.11-rc6-setxattr-fix' of git..
git tree:       upstream
console output: https://syzkaller.appspot.com/x/log.txt?x=11991778d00000
kernel config:  https://syzkaller.appspot.com/x/.config?x=f75d66d6d359ef2f
dashboard link: https://syzkaller.appspot.com/bug?extid=8dcc087eb24227ded47e
userspace arch: arm64

Unfortunately, I don't have any reproducer for this issue yet.

IMPORTANT: if you fix the issue, please add the following tag to the commit:
Reported-by: syzbot+8dcc087eb24227ded47e@syzkaller.appspotmail.com

------------[ cut here ]------------
WARNING: CPU: 0 PID: 118 at net/mac80211/sta_info.c:547 sta_info_insert_check+0x48/0xc4 net/mac80211/sta_info.c:547
Modules linked in:
CPU: 0 PID: 118 Comm: kworker/u4:3 Not tainted 5.11.0-rc5-syzkaller-00239-gbec4c2968fce #0
Hardware name: linux,dummy-virt (DT)
Workqueue: phy6 ieee80211_iface_work
pstate: 40400009 (nZcv daif +PAN -UAO -TCO BTYPE=--)
pc : sta_info_insert_check+0x48/0xc4 net/mac80211/sta_info.c:547
lr : sta_info_insert_rcu+0x34/0x90 net/mac80211/sta_info.c:725
sp : ffff800013f3bbf0
x29: ffff800013f3bbf0 x28: ffff8000132e4538 
x27: f6ff00002070c998 x26: dead000000000100 
x25: dead000000000122 x24: f6ff00002070d340 
x23: f6ff00002070d280 x22: faff000020710800 
x21: faff000020710df0 x20: f6ff00002070c940 
x19: f7ff000020784000 x18: 0000000000000000 
x17: 0000000000000000 x16: 0000000000000000 
x15: 0000ad1062c19046 x14: f7ff000020796098 
x13: 000000000000044b x12: f6ff00002070c940 
x11: 000000000000000c x10: 0000000000000000 
x9 : faff000020713b90 x8 : 0000000000000fff 
x7 : 0000000000000000 x6 : f6ff00002070c940 
x5 : 0000000000000fff x4 : 0000000000000000 
x3 : 0000000000000100 x2 : 00000000ffeeffff 
x1 : 00000000ffffffff x0 : 00000000ffeefdf7 
Call trace:
 sta_info_insert_check+0x48/0xc4 net/mac80211/sta_info.c:547
 sta_info_insert_rcu+0x34/0x90 net/mac80211/sta_info.c:725
 ieee80211_ibss_finish_sta+0x84/0x140 net/mac80211/ibss.c:592
 ieee80211_ibss_work+0xe4/0x560 net/mac80211/ibss.c:1700
 ieee80211_iface_work+0x2b8/0x33c net/mac80211/iface.c:1445
 process_one_work+0x1d8/0x360 kernel/workqueue.c:2275
 worker_thread+0x74/0x440 kernel/workqueue.c:2421
 kthread+0x178/0x180 kernel/kthread.c:292
 ret_from_fork+0x10/0x30 arch/arm64/kernel/entry.S:958


---
This report is generated by a bot. It may contain errors.
See https://goo.gl/tpsmEJ for more information about syzbot.
syzbot engineers can be reached at syzkaller@googlegroups.com.

syzbot will keep track of this issue. See:
https://goo.gl/tpsmEJ#status for how to communicate with syzbot.
