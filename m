Return-Path: <netdev-owner@vger.kernel.org>
X-Original-To: lists+netdev@lfdr.de
Delivered-To: lists+netdev@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id F043C48B332
	for <lists+netdev@lfdr.de>; Tue, 11 Jan 2022 18:15:56 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1344146AbiAKRPt (ORCPT <rfc822;lists+netdev@lfdr.de>);
        Tue, 11 Jan 2022 12:15:49 -0500
Received: from mail-mw2nam12on2061.outbound.protection.outlook.com ([40.107.244.61]:39649
        "EHLO NAM12-MW2-obe.outbound.protection.outlook.com"
        rhost-flags-OK-OK-OK-FAIL) by vger.kernel.org with ESMTP
        id S1343977AbiAKRPP (ORCPT <rfc822;netdev@vger.kernel.org>);
        Tue, 11 Jan 2022 12:15:15 -0500
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=McLO15sInIbLw5tbgnx1fGmDfAd481N95qwkIcJCxlmmyArPDPpNC7hY6UNRkeiZz+TpsjBGVCPN7Ij+o9a5iXKm8tRapVAtTUFEUX1YDmSInHtfIbopnBDm1zrCwYRv7X5O34BSWbPo/WttE+K1s4fh4gUqGNB5TWryWv8bzk/IL4MTlzgdaWyt5Do895SxX3p16FBGKEFkK8hWQLb38cDLGRPK98vDjOASr2YkHBK7mRDwbWgm2/tQdBOu90NrrL32Cyg8m+RnKb7j1xUvEr3OVAjeUgD3uhukfAARXyPeDA0I5hAwhN5rPvEgDPJiO1KOOqVQ7YIcJYRJXPVZiw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com;
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1;
 bh=d8LEXyL5xb1rEtqXTwZntz1tUdFOXbdlqgqU2/wWu+s=;
 b=INzUY/xnoJBD4sfajT6Ex19Ik2Odm+4STrdibC8ioFkxcXMn/83mBfOe1yD6qHN532p0rPofuU7dGS/nGV7lHqDyIeT44Eclj0jNgimscmS7bjkKvwozNfguSxDzR63kRa2oT3Uasd3B2yw3IsmfAjsA9zVHr+5Aod6vVKIM3+/Lvam71lH/CJDFd9i22JUI0myAzmW9Q7WsszmJh5rr/8ACNYSmHsy4I+08F77FN3aZPGUH6PABf1UsGHak5w/Acyj/JG/Na3LExtFoRn5IhnKTzF+qQX7lP53RJXgmP8+RDpWWH8ckQ3hDY7xnhCa3UrucWXtVWGADKv4FUH3kqQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=silabs.com; dmarc=pass action=none header.from=silabs.com;
 dkim=pass header.d=silabs.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=silabs.onmicrosoft.com; s=selector2-silabs-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=d8LEXyL5xb1rEtqXTwZntz1tUdFOXbdlqgqU2/wWu+s=;
 b=LdqD7XazfNcfO/WYo3M8RfDnRuaLNMyt2PjVh6h+WOEtsPU4WQtWs1N/NeqEV4p1/e30V8/xFhMpbXMlcpegON8PNRLSBt5yJlEOdkKKhdS9xSjzofWY5b3BdMcG32HPtBs+20HDtRrMnl+FrLmzdU05prXcIJhbk0VJ5FP3/t0=
Authentication-Results: dkim=none (message not signed)
 header.d=none;dmarc=none action=none header.from=silabs.com;
Received: from PH0PR11MB5657.namprd11.prod.outlook.com (2603:10b6:510:ee::19)
 by PH0PR11MB5595.namprd11.prod.outlook.com (2603:10b6:510:e5::16) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.4867.7; Tue, 11 Jan
 2022 17:15:04 +0000
Received: from PH0PR11MB5657.namprd11.prod.outlook.com
 ([fe80::d031:da9e:71a:73e4]) by PH0PR11MB5657.namprd11.prod.outlook.com
 ([fe80::d031:da9e:71a:73e4%6]) with mapi id 15.20.4867.012; Tue, 11 Jan 2022
 17:15:04 +0000
From:   Jerome Pouiller <Jerome.Pouiller@silabs.com>
To:     linux-wireless@vger.kernel.org, netdev@vger.kernel.org,
        Kalle Valo <kvalo@codeaurora.org>
Cc:     devel@driverdev.osuosl.org, linux-kernel@vger.kernel.org,
        Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
        "David S . Miller" <davem@davemloft.net>,
        devicetree@vger.kernel.org, Rob Herring <robh+dt@kernel.org>,
        linux-mmc@vger.kernel.org,
        =?UTF-8?q?Pali=20Roh=C3=A1r?= <pali@kernel.org>,
        Ulf Hansson <ulf.hansson@linaro.org>,
        =?UTF-8?q?J=C3=A9r=C3=B4me=20Pouiller?= 
        <jerome.pouiller@silabs.com>
Subject: [PATCH v9 07/24] wfx: add bus_spi.c
Date:   Tue, 11 Jan 2022 18:14:07 +0100
Message-Id: <20220111171424.862764-8-Jerome.Pouiller@silabs.com>
X-Mailer: git-send-email 2.34.1
In-Reply-To: <20220111171424.862764-1-Jerome.Pouiller@silabs.com>
References: <20220111171424.862764-1-Jerome.Pouiller@silabs.com>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
X-ClientProxiedBy: SN1PR12CA0099.namprd12.prod.outlook.com
 (2603:10b6:802:21::34) To PH0PR11MB5657.namprd11.prod.outlook.com
 (2603:10b6:510:ee::19)
MIME-Version: 1.0
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-Correlation-Id: 64ad4d96-ccd0-4b54-5cb0-08d9d525e899
X-MS-TrafficTypeDiagnostic: PH0PR11MB5595:EE_
X-Microsoft-Antispam-PRVS: <PH0PR11MB55954DD2F27F4D48008D557093519@PH0PR11MB5595.namprd11.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:3513;
X-MS-Exchange-SenderADCheck: 1
X-MS-Exchange-AntiSpam-Relay: 0
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: NLTjy/LOAAKXhKDoHIk/Id2ageizBADKuqyhvyACJ5j1oC9gXNN0U5xMIXDedbPd5UOKJeRmaaliMMu5/dhTPhqEvG8xfQxNJVk7naI6jERW3yDVjFF6t9E3nHR4UVvsCeJmImHVPGaHNB20Py6IoQnxfOIieiIJ4PQ6lihKOPgwp3DXNLhaev/X5jO/vYDAEGKi345HwHKsSHsAq+soZRnZFac+GHEh6dITdj1TvQ11/3bxCAMxf3MQ84NZgPLViOrPUiDMZ7PI0+fkV3EDTZNMg7j8QpcmIBb2vD5FzvKC4BdoutbpWsIEyM60FJUDh2VO+74dttX8/0MPEeBRA5Q+NY4Zc8JgSLOB0HzVgDrcB4a1WNYPVYRBk2Ma2N2SnKDJpcVjjGSnlQYmskkjfX33yTQ+WlqIYOTJIuoEzIfPYBuCmOqbTJdnN1WZ5IYqU/vWF+erwlsWEpaWjb61LGFIG8aUumcV07/R/PdRychnK3qcIuQJBRZ4wFq9SqIvaprhUzwYVvUHI3lKES+sBKoBjibex2rvJO3Iim2tbxykoU4VLn3jRgW2q7AHScfhY6BGj76qt236E7W9WhmKvkSCpovm89QH+SnO+Gxlp6dXIfmJGuqB28cd+MZb80/utBTMMaVqvwRGAJPd/3nn0g==
X-Forefront-Antispam-Report: CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:PH0PR11MB5657.namprd11.prod.outlook.com;PTR:;CAT:NONE;SFS:(366004)(36756003)(66946007)(6512007)(2906002)(107886003)(66574015)(8936002)(2616005)(7416002)(38100700002)(6506007)(4326008)(66476007)(8676002)(54906003)(6916009)(316002)(66556008)(83380400001)(52116002)(86362001)(186003)(5660300002)(6486002)(508600001)(1076003);DIR:OUT;SFP:1101;
X-MS-Exchange-AntiSpam-MessageData-ChunkCount: 1
X-MS-Exchange-AntiSpam-MessageData-0: =?utf-8?B?K3FwT0VkdTVWNXhOQlQ1bkdwSDZuM1VrdUhvNStrSWtON3Y5QWVGMGNERTNE?=
 =?utf-8?B?cmhLQTQ1TEFrZWg2Um9xOFlmT242K1gwNkFJY0M1Tk5tUnRhWlE2eERFanpT?=
 =?utf-8?B?ck9JNDhpYlUrT0U1czcvM3AwUHhkbkxTMEU1NzhGdHFqZVB2UDAzVjk5T2Jp?=
 =?utf-8?B?eWtWWDc5anVaRnJzSVoxOHJJZTZxYkFMTkhBclZnejZ4SmtuK3ExeS8xNnU5?=
 =?utf-8?B?YXVJa0xpN1JQTTB1S3pRZXE0dlFoYzhQakE4TS9GeHlxNEFjZUdNK3BkZU1J?=
 =?utf-8?B?NEdNMDljbjVKdXRvRFlPRm5xeWJZN0FOMW5UbTBZU01mdWRmRjgrdkFLYzZx?=
 =?utf-8?B?Zzk1cjc0QzQ4MlBKcjNXY0M4ZHlrOUVYS2s3Q3kxUGZLVDJESmJKT0NzNU15?=
 =?utf-8?B?RWgxRjlWazg0VTM4eG9UNDllSjQxY3gxZi9NWVpvMmp2UHZQZnlUNnM3YWE4?=
 =?utf-8?B?Zy9lYkJBTlJTbmp0c01vanFaSENlM2pKM2FXaE5QLzNObXZtcHd5RW9SSE9r?=
 =?utf-8?B?UlgrV283c0hIZ2RENmlBQkZTN0psc21adE54Z3pyYmVOWFp3SzZPREppR1B1?=
 =?utf-8?B?M0pxMlU4M01vczd5LzUxTVN5UVlrTUQ3eXpZOW54NUdnMElBSVQ0aHBNMEMz?=
 =?utf-8?B?RmpxMEh5QzJBUmFrK293MDl1cXVaMzdMVitkN1FweWRvc3UrTVI2REdpNkRq?=
 =?utf-8?B?YW5CRmMrQnhSdnl0VENSK2tUL0w2enp0UXUySXp4bDgzbDFCSzV4c3drMjRm?=
 =?utf-8?B?SjBpOHJoZFEzNi9EWmpZSHI5Y1hiaXpPd3J1SzJ4K0V5VzhRTGdCNzFEczFJ?=
 =?utf-8?B?dmNrL2xqWEhNdDA2USs5dFZEYlV5K25oRlp5RkhEQlphbGRxTWR3T3Vjd2lt?=
 =?utf-8?B?UWY0Z1lTWlBqbXZRd2hQTmYrY2NEeWxhanpHeUd3ZmhLMFN6aDNhTFhWeVJp?=
 =?utf-8?B?TDdpUXdVTUJhTCtleWF6Tkc4K3YxcXY4K2JJTVZVMGJrWmZ0VE1wSklZMEhG?=
 =?utf-8?B?NWRxc0tFWHRtc0tuazNHRm52Y1pHV0NzNTB4TVIyK1RyVzJ6bDUwR1R2RXFt?=
 =?utf-8?B?Z3U0TXB4Nk11aW9JYkpnOEtkWFZ1OXUyUWx4ajN0NTlQb1haUHRTNkFzSWdB?=
 =?utf-8?B?YUpKejB2cHlLQUJKQmVnYTJXZTVKMmRYRGtFZ09MMXhhRDZzUDVoRk9WeW43?=
 =?utf-8?B?V0QvTjc3ekNsbzk1ZVJKdnFvUFJtSUgvWDlCZ0V0Nm4wQnpjYmRrTUdEUXpx?=
 =?utf-8?B?eG4rcWt0d0hHaEQ3WVlXbXJGU2lqSTEvMjJScjd1THN0NnAwVGsyY2c1enFO?=
 =?utf-8?B?SGVuZXc4cGxvN0dFdWtXdC9ZUi9oajNNcWV4cHhXa2VrVnBzRU9JbjFhMDU4?=
 =?utf-8?B?YU91d0hNdDBMOU1mVnpGcUI3bjRKVXhjNW8xdDJKdkovS3c4S05Qd0k4QmhQ?=
 =?utf-8?B?dVVtbDFHNVI0NzgxY2ptMTM4dkwyUER4V3dDRTM5bDZ1ekEyTklXRnZCUXR6?=
 =?utf-8?B?UTdCQlkyUDBTMS9aMnY4ekNOeEdCV2FhQllIbkIyMnVKaUd1WG9uTCs3Lzk4?=
 =?utf-8?B?YkkwSk1FTXdJcmFYei9OSlQxWjc5ZmxEd3BCeU14bVBDV3puVmdyMXNoaG9t?=
 =?utf-8?B?d3Rhd3d4WEtraHUyWjA3Q21TL05FUTdOanZuMTRmczJldzBPbERYaFhMbXg2?=
 =?utf-8?B?TkZIYkdML1ZFT2hsNndUN2JOYVBoZ2MyQWo3czZVUGhKRmM1VnErUWFmdysr?=
 =?utf-8?B?MFNLZ1pZUW81Q3NBMjNVNmlJdmErc3ZPMEtqVkYwYVRYenFtVkFXU3FHWHNt?=
 =?utf-8?B?YUhueFZuTElGRjBERm1lSGM1VWpBNDZvSlY2Z0loZXNvcTlVK2hlbC9nNDRz?=
 =?utf-8?B?UVZpVXY2QXBtdTZiZTVrdDkrdG9nTy90ckhLNnphUjREbWRkclk1K2VnNEY0?=
 =?utf-8?B?STZPTVpSSnkyNkkyVU9TbnpoT0hOVm9LY3RrSy9ZRmdqSTNJZXRNOXdQNzg5?=
 =?utf-8?B?N0tTYUJxSDJBTDlQZ0M1YWsyRFJhSzNrR0xlcFE5YS9DZUIwd3NWb283WGRY?=
 =?utf-8?B?enZJSUhTMDRhZHRMc1dsMDBLL2ZPVTJxT3ZrelhIdzBmcDAxZlBNaGJxUDVT?=
 =?utf-8?B?WUhpSURXVEFtT1JVb1NuR2VOSVZreWpWYWhNNmFuRUViNVBzVDBiUno1RWRr?=
 =?utf-8?B?Zm1HaSthKzk2UUZZckY1SnBaWjhHemQ4QjhkVjRGZ1I2RERlRmhIQ3BzaVhX?=
 =?utf-8?Q?F8+wVYO7l5CDYXS6PPKIVtLVBThHRSfiWXcrunXCR4=3D?=
X-OriginatorOrg: silabs.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 64ad4d96-ccd0-4b54-5cb0-08d9d525e899
X-MS-Exchange-CrossTenant-AuthSource: PH0PR11MB5657.namprd11.prod.outlook.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 11 Jan 2022 17:15:04.4381
 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: 54dbd822-5231-4b20-944d-6f4abcd541fb
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: 395U7OsM9RiKEKS8QiCuVQZi7m5oOi2WY8gGgiLQ0ALb0ByK+NgWsMHuitdGLxkltSbcxzQTp7yc0X+dF6Kshg==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: PH0PR11MB5595
Precedence: bulk
List-ID: <netdev.vger.kernel.org>
X-Mailing-List: netdev@vger.kernel.org

RnJvbTogSsOpcsO0bWUgUG91aWxsZXIgPGplcm9tZS5wb3VpbGxlckBzaWxhYnMuY29tPgoKU2ln
bmVkLW9mZi1ieTogSsOpcsO0bWUgUG91aWxsZXIgPGplcm9tZS5wb3VpbGxlckBzaWxhYnMuY29t
PgotLS0KIGRyaXZlcnMvbmV0L3dpcmVsZXNzL3NpbGFicy93ZngvYnVzX3NwaS5jIHwgMjk3ICsr
KysrKysrKysrKysrKysrKysrKysKIDEgZmlsZSBjaGFuZ2VkLCAyOTcgaW5zZXJ0aW9ucygrKQog
Y3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvbmV0L3dpcmVsZXNzL3NpbGFicy93ZngvYnVzX3Nw
aS5jCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvd2lyZWxlc3Mvc2lsYWJzL3dmeC9idXNfc3Bp
LmMgYi9kcml2ZXJzL25ldC93aXJlbGVzcy9zaWxhYnMvd2Z4L2J1c19zcGkuYwpuZXcgZmlsZSBt
b2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjZiNGY5ZmZmOGI0NAotLS0gL2Rldi9udWxs
CisrKyBiL2RyaXZlcnMvbmV0L3dpcmVsZXNzL3NpbGFicy93ZngvYnVzX3NwaS5jCkBAIC0wLDAg
KzEsMjk3IEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1vbmx5CisvKgor
ICogU1BJIGludGVyZmFjZS4KKyAqCisgKiBDb3B5cmlnaHQgKGMpIDIwMTctMjAyMCwgU2lsaWNv
biBMYWJvcmF0b3JpZXMsIEluYy4KKyAqIENvcHlyaWdodCAoYykgMjAxMSwgU2FncmFkIEluYy4K
KyAqIENvcHlyaWdodCAoYykgMjAxMCwgU1QtRXJpY3Nzb24KKyAqLworI2luY2x1ZGUgPGxpbnV4
L21vZHVsZS5oPgorI2luY2x1ZGUgPGxpbnV4L2RlbGF5Lmg+CisjaW5jbHVkZSA8bGludXgvZ3Bp
by9jb25zdW1lci5oPgorI2luY2x1ZGUgPGxpbnV4L3NwaS9zcGkuaD4KKyNpbmNsdWRlIDxsaW51
eC9pbnRlcnJ1cHQuaD4KKyNpbmNsdWRlIDxsaW51eC9pcnEuaD4KKyNpbmNsdWRlIDxsaW51eC9v
Zi5oPgorCisjaW5jbHVkZSAiYnVzLmgiCisjaW5jbHVkZSAid2Z4LmgiCisjaW5jbHVkZSAiaHdp
by5oIgorI2luY2x1ZGUgIm1haW4uaCIKKyNpbmNsdWRlICJiaC5oIgorCisjZGVmaW5lIFNFVF9X
UklURSAweDdGRkYgICAgICAgIC8qIHVzYWdlOiBhbmQgb3BlcmF0aW9uICovCisjZGVmaW5lIFNF
VF9SRUFEIDB4ODAwMCAgICAgICAgIC8qIHVzYWdlOiBvciBvcGVyYXRpb24gKi8KKworc3RhdGlj
IGNvbnN0IHN0cnVjdCB3ZnhfcGxhdGZvcm1fZGF0YSBwZGF0YV93ZjIwMCA9IHsKKwkuZmlsZV9m
dyA9ICJ3Zngvd2ZtX3dmMjAwIiwKKwkuZmlsZV9wZHMgPSAid2Z4L3dmMjAwLnBkcyIsCisJLnVz
ZV9yaXNpbmdfY2xrID0gdHJ1ZSwKK307CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgd2Z4X3BsYXRm
b3JtX2RhdGEgcGRhdGFfYnJkNDAwMWEgPSB7CisJLmZpbGVfZncgPSAid2Z4L3dmbV93ZjIwMCIs
CisJLmZpbGVfcGRzID0gIndmeC9icmQ0MDAxYS5wZHMiLAorCS51c2VfcmlzaW5nX2NsayA9IHRy
dWUsCit9OworCitzdGF0aWMgY29uc3Qgc3RydWN0IHdmeF9wbGF0Zm9ybV9kYXRhIHBkYXRhX2Jy
ZDgwMjJhID0geworCS5maWxlX2Z3ID0gIndmeC93Zm1fd2YyMDAiLAorCS5maWxlX3BkcyA9ICJ3
ZngvYnJkODAyMmEucGRzIiwKKwkudXNlX3Jpc2luZ19jbGsgPSB0cnVlLAorfTsKKworc3RhdGlj
IGNvbnN0IHN0cnVjdCB3ZnhfcGxhdGZvcm1fZGF0YSBwZGF0YV9icmQ4MDIzYSA9IHsKKwkuZmls
ZV9mdyA9ICJ3Zngvd2ZtX3dmMjAwIiwKKwkuZmlsZV9wZHMgPSAid2Z4L2JyZDgwMjNhLnBkcyIs
CisJLnVzZV9yaXNpbmdfY2xrID0gdHJ1ZSwKK307CisKKy8qIExlZ2FjeSBEVCBkb24ndCB1c2Ug
aXQgKi8KK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgd2Z4X3BsYXRmb3JtX2RhdGEgcGRhdGFfd2Z4X3Nw
aSA9IHsKKwkuZmlsZV9mdyA9ICJ3Zm1fd2YyMDAiLAorCS5maWxlX3BkcyA9ICJ3ZjIwMC5wZHMi
LAorCS51c2VfcmlzaW5nX2NsayA9IHRydWUsCisJLnJlc2V0X2ludmVydGVkID0gdHJ1ZSwKK307
CisKK3N0cnVjdCB3Znhfc3BpX3ByaXYgeworCXN0cnVjdCBzcGlfZGV2aWNlICpmdW5jOworCXN0
cnVjdCB3ZnhfZGV2ICpjb3JlOworCXN0cnVjdCBncGlvX2Rlc2MgKmdwaW9fcmVzZXQ7CisJYm9v
bCBuZWVkX3N3YWI7Cit9OworCisvKiBUaGUgY2hpcCByZWFkcyAxNmJpdHMgb2YgZGF0YSBhdCB0
aW1lIGFuZCBwbGFjZSB0aGVtIGRpcmVjdGx5IGludG8gKGxpdHRsZSBlbmRpYW4pIENQVSByZWdp
c3Rlci4KKyAqIFNvLCB0aGUgY2hpcCBleHBlY3RzIGJ5dGVzIG9yZGVyIHRvIGJlICJCMSBCMCBC
MyBCMiIgKHdoaWxlIExFIGlzICJCMCBCMSBCMiBCMyIgYW5kIEJFIGlzCisgKiAiQjMgQjIgQjEg
QjAiKQorICoKKyAqIEEgbGl0dGxlIGVuZGlhbiBob3N0IHdpdGggYml0c19wZXJfd29yZCA9PSAx
NiBzaG91bGQgZG8gdGhlIHJpZ2h0IGpvYiBuYXRpdmVseS4gVGhlIGNvZGUgYmVsb3cgdG8KKyAq
IHN1cHBvcnQgYmlnIGVuZGlhbiBob3N0IGFuZCBjb21tb25seSB1c2VkIFNQSSA4Yml0cy4KKyAq
Lworc3RhdGljIGludCB3Znhfc3BpX2NvcHlfZnJvbV9pbyh2b2lkICpwcml2LCB1bnNpZ25lZCBp
bnQgYWRkciwgdm9pZCAqZHN0LCBzaXplX3QgY291bnQpCit7CisJc3RydWN0IHdmeF9zcGlfcHJp
diAqYnVzID0gcHJpdjsKKwl1MTYgcmVnYWRkciA9IChhZGRyIDw8IDEyKSB8IChjb3VudCAvIDIp
IHwgU0VUX1JFQUQ7CisJc3RydWN0IHNwaV9tZXNzYWdlICAgICAgbTsKKwlzdHJ1Y3Qgc3BpX3Ry
YW5zZmVyICAgICB0X2FkZHIgPSB7CisJCS50eF9idWYgICAgICAgICA9ICZyZWdhZGRyLAorCQku
bGVuICAgICAgICAgICAgPSBzaXplb2YocmVnYWRkciksCisJfTsKKwlzdHJ1Y3Qgc3BpX3RyYW5z
ZmVyICAgICB0X21zZyA9IHsKKwkJLnJ4X2J1ZiAgICAgICAgID0gZHN0LAorCQkubGVuICAgICAg
ICAgICAgPSBjb3VudCwKKwl9OworCXUxNiAqZHN0MTYgPSBkc3Q7CisJaW50IHJldCwgaTsKKwor
CVdBUk4oY291bnQgJSAyLCAiYnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDIiKTsK
KworCWNwdV90b19sZTE2cygmcmVnYWRkcik7CisJaWYgKGJ1cy0+bmVlZF9zd2FiKQorCQlzd2Fi
MTZzKCZyZWdhZGRyKTsKKworCXNwaV9tZXNzYWdlX2luaXQoJm0pOworCXNwaV9tZXNzYWdlX2Fk
ZF90YWlsKCZ0X2FkZHIsICZtKTsKKwlzcGlfbWVzc2FnZV9hZGRfdGFpbCgmdF9tc2csICZtKTsK
KwlyZXQgPSBzcGlfc3luYyhidXMtPmZ1bmMsICZtKTsKKworCWlmIChidXMtPm5lZWRfc3dhYiAm
JiBhZGRyID09IFdGWF9SRUdfQ09ORklHKQorCQlmb3IgKGkgPSAwOyBpIDwgY291bnQgLyAyOyBp
KyspCisJCQlzd2FiMTZzKCZkc3QxNltpXSk7CisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIGlu
dCB3Znhfc3BpX2NvcHlfdG9faW8odm9pZCAqcHJpdiwgdW5zaWduZWQgaW50IGFkZHIsIGNvbnN0
IHZvaWQgKnNyYywgc2l6ZV90IGNvdW50KQoreworCXN0cnVjdCB3Znhfc3BpX3ByaXYgKmJ1cyA9
IHByaXY7CisJdTE2IHJlZ2FkZHIgPSAoYWRkciA8PCAxMikgfCAoY291bnQgLyAyKTsKKwkvKiBG
SVhNRTogdXNlIGEgYm91bmNlIGJ1ZmZlciAqLworCXUxNiAqc3JjMTYgPSAodm9pZCAqKXNyYzsK
KwlpbnQgcmV0LCBpOworCXN0cnVjdCBzcGlfbWVzc2FnZSAgICAgIG07CisJc3RydWN0IHNwaV90
cmFuc2ZlciAgICAgdF9hZGRyID0geworCQkudHhfYnVmICAgICAgICAgPSAmcmVnYWRkciwKKwkJ
LmxlbiAgICAgICAgICAgID0gc2l6ZW9mKHJlZ2FkZHIpLAorCX07CisJc3RydWN0IHNwaV90cmFu
c2ZlciAgICAgdF9tc2cgPSB7CisJCS50eF9idWYgICAgICAgICA9IHNyYywKKwkJLmxlbiAgICAg
ICAgICAgID0gY291bnQsCisJfTsKKworCVdBUk4oY291bnQgJSAyLCAiYnVmZmVyIHNpemUgbXVz
dCBiZSBhIG11bHRpcGxlIG9mIDIiKTsKKwlXQVJOKHJlZ2FkZHIgJiBTRVRfUkVBRCwgImJhZCBh
ZGRyIG9yIHNpemUgb3ZlcmZsb3ciKTsKKworCWNwdV90b19sZTE2cygmcmVnYWRkcik7CisKKwkv
KiBSZWdpc3RlciBhZGRyZXNzIGFuZCBDT05GSUcgY29udGVudCBhbHdheXMgdXNlIDE2Yml0IGJp
ZyBlbmRpYW4KKwkgKiAoIkJBREMiIG9yZGVyKQorCSAqLworCWlmIChidXMtPm5lZWRfc3dhYikK
KwkJc3dhYjE2cygmcmVnYWRkcik7CisJaWYgKGJ1cy0+bmVlZF9zd2FiICYmIGFkZHIgPT0gV0ZY
X1JFR19DT05GSUcpCisJCWZvciAoaSA9IDA7IGkgPCBjb3VudCAvIDI7IGkrKykKKwkJCXN3YWIx
NnMoJnNyYzE2W2ldKTsKKworCXNwaV9tZXNzYWdlX2luaXQoJm0pOworCXNwaV9tZXNzYWdlX2Fk
ZF90YWlsKCZ0X2FkZHIsICZtKTsKKwlzcGlfbWVzc2FnZV9hZGRfdGFpbCgmdF9tc2csICZtKTsK
KwlyZXQgPSBzcGlfc3luYyhidXMtPmZ1bmMsICZtKTsKKworCWlmIChidXMtPm5lZWRfc3dhYiAm
JiBhZGRyID09IFdGWF9SRUdfQ09ORklHKQorCQlmb3IgKGkgPSAwOyBpIDwgY291bnQgLyAyOyBp
KyspCisJCQlzd2FiMTZzKCZzcmMxNltpXSk7CisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIHZv
aWQgd2Z4X3NwaV9sb2NrKHZvaWQgKnByaXYpCit7Cit9CisKK3N0YXRpYyB2b2lkIHdmeF9zcGlf
dW5sb2NrKHZvaWQgKnByaXYpCit7Cit9CisKK3N0YXRpYyBpcnFyZXR1cm5fdCB3Znhfc3BpX2ly
cV9oYW5kbGVyKGludCBpcnEsIHZvaWQgKnByaXYpCit7CisJc3RydWN0IHdmeF9zcGlfcHJpdiAq
YnVzID0gcHJpdjsKKworCXdmeF9iaF9yZXF1ZXN0X3J4KGJ1cy0+Y29yZSk7CisJcmV0dXJuIElS
UV9IQU5ETEVEOworfQorCitzdGF0aWMgaW50IHdmeF9zcGlfaXJxX3N1YnNjcmliZSh2b2lkICpw
cml2KQoreworCXN0cnVjdCB3Znhfc3BpX3ByaXYgKmJ1cyA9IHByaXY7CisJdTMyIGZsYWdzOwor
CisJZmxhZ3MgPSBpcnFfZ2V0X3RyaWdnZXJfdHlwZShidXMtPmZ1bmMtPmlycSk7CisJaWYgKCFm
bGFncykKKwkJZmxhZ3MgPSBJUlFGX1RSSUdHRVJfSElHSDsKKwlmbGFncyB8PSBJUlFGX09ORVNI
T1Q7CisJcmV0dXJuIGRldm1fcmVxdWVzdF90aHJlYWRlZF9pcnEoJmJ1cy0+ZnVuYy0+ZGV2LCBi
dXMtPmZ1bmMtPmlycSwgTlVMTCwKKwkJCQkJIHdmeF9zcGlfaXJxX2hhbmRsZXIsIElSUUZfT05F
U0hPVCwgIndmeCIsIGJ1cyk7Cit9CisKK3N0YXRpYyBpbnQgd2Z4X3NwaV9pcnFfdW5zdWJzY3Jp
YmUodm9pZCAqcHJpdikKK3sKKwlzdHJ1Y3Qgd2Z4X3NwaV9wcml2ICpidXMgPSBwcml2OworCisJ
ZGV2bV9mcmVlX2lycSgmYnVzLT5mdW5jLT5kZXYsIGJ1cy0+ZnVuYy0+aXJxLCBidXMpOworCXJl
dHVybiAwOworfQorCitzdGF0aWMgc2l6ZV90IHdmeF9zcGlfYWxpZ25fc2l6ZSh2b2lkICpwcml2
LCBzaXplX3Qgc2l6ZSkKK3sKKwkvKiBNb3N0IG9mIFNQSSBjb250cm9sbGVycyBhdm9pZCBETUEg
aWYgYnVmZmVyIHNpemUgaXMgbm90IDMyYml0IGFsaWduZWQgKi8KKwlyZXR1cm4gQUxJR04oc2l6
ZSwgNCk7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgd2Z4X2h3YnVzX29wcyB3Znhfc3BpX2h3
YnVzX29wcyA9IHsKKwkuY29weV9mcm9tX2lvICAgID0gd2Z4X3NwaV9jb3B5X2Zyb21faW8sCisJ
LmNvcHlfdG9faW8gICAgICA9IHdmeF9zcGlfY29weV90b19pbywKKwkuaXJxX3N1YnNjcmliZSAg
ID0gd2Z4X3NwaV9pcnFfc3Vic2NyaWJlLAorCS5pcnFfdW5zdWJzY3JpYmUgPSB3Znhfc3BpX2ly
cV91bnN1YnNjcmliZSwKKwkubG9jayAgICAgICAgICAgID0gd2Z4X3NwaV9sb2NrLAorCS51bmxv
Y2sgICAgICAgICAgPSB3Znhfc3BpX3VubG9jaywKKwkuYWxpZ25fc2l6ZSAgICAgID0gd2Z4X3Nw
aV9hbGlnbl9zaXplLAorfTsKKworc3RhdGljIGludCB3Znhfc3BpX3Byb2JlKHN0cnVjdCBzcGlf
ZGV2aWNlICpmdW5jKQoreworCXN0cnVjdCB3ZnhfcGxhdGZvcm1fZGF0YSAqcGRhdGE7CisJc3Ry
dWN0IHdmeF9zcGlfcHJpdiAqYnVzOworCWludCByZXQ7CisKKwlpZiAoIWZ1bmMtPmJpdHNfcGVy
X3dvcmQpCisJCWZ1bmMtPmJpdHNfcGVyX3dvcmQgPSAxNjsKKwlyZXQgPSBzcGlfc2V0dXAoZnVu
Yyk7CisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsKKwlwZGF0YSA9IChzdHJ1Y3Qgd2Z4X3BsYXRm
b3JtX2RhdGEgKilzcGlfZ2V0X2RldmljZV9pZChmdW5jKS0+ZHJpdmVyX2RhdGE7CisJaWYgKCFw
ZGF0YSkgeworCQlkZXZfZXJyKCZmdW5jLT5kZXYsICJ1bmFibGUgdG8gcmV0cmlldmUgZHJpdmVy
IGRhdGEgKHBsZWFzZSByZXBvcnQpXG4iKTsKKwkJcmV0dXJuIC1FTk9ERVY7CisJfQorCisJLyog
VHJhY2UgYmVsb3cgaXMgYWxzbyBkaXNwbGF5ZWQgYnkgc3BpX3NldHVwKCkgaWYgY29tcGlsZWQg
d2l0aCBERUJVRyAqLworCWRldl9kYmcoJmZ1bmMtPmRldiwgIlNQSSBwYXJhbXM6IENTPSVkLCBt
b2RlPSVkIGJpdHMvd29yZD0lZCBzcGVlZD0lZFxuIiwKKwkJZnVuYy0+Y2hpcF9zZWxlY3QsIGZ1
bmMtPm1vZGUsIGZ1bmMtPmJpdHNfcGVyX3dvcmQsIGZ1bmMtPm1heF9zcGVlZF9oeik7CisJaWYg
KGZ1bmMtPmJpdHNfcGVyX3dvcmQgIT0gMTYgJiYgZnVuYy0+Yml0c19wZXJfd29yZCAhPSA4KQor
CQlkZXZfd2FybigmZnVuYy0+ZGV2LCAidW51c3VhbCBiaXRzL3dvcmQgdmFsdWU6ICVkXG4iLCBm
dW5jLT5iaXRzX3Blcl93b3JkKTsKKwlpZiAoZnVuYy0+bWF4X3NwZWVkX2h6ID4gNTAwMDAwMDAp
CisJCWRldl93YXJuKCZmdW5jLT5kZXYsICIlZEh6IGlzIGEgdmVyeSBoaWdoIHNwZWVkXG4iLCBm
dW5jLT5tYXhfc3BlZWRfaHopOworCisJYnVzID0gZGV2bV9remFsbG9jKCZmdW5jLT5kZXYsIHNp
emVvZigqYnVzKSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFidXMpCisJCXJldHVybiAtRU5PTUVNOwor
CWJ1cy0+ZnVuYyA9IGZ1bmM7CisJaWYgKGZ1bmMtPmJpdHNfcGVyX3dvcmQgPT0gOCB8fCBJU19F
TkFCTEVEKENPTkZJR19DUFVfQklHX0VORElBTikpCisJCWJ1cy0+bmVlZF9zd2FiID0gdHJ1ZTsK
KwlzcGlfc2V0X2RydmRhdGEoZnVuYywgYnVzKTsKKworCWJ1cy0+Z3Bpb19yZXNldCA9IGRldm1f
Z3Bpb2RfZ2V0X29wdGlvbmFsKCZmdW5jLT5kZXYsICJyZXNldCIsIEdQSU9EX09VVF9MT1cpOwor
CWlmIChJU19FUlIoYnVzLT5ncGlvX3Jlc2V0KSkKKwkJcmV0dXJuIFBUUl9FUlIoYnVzLT5ncGlv
X3Jlc2V0KTsKKwlpZiAoIWJ1cy0+Z3Bpb19yZXNldCkgeworCQlkZXZfd2FybigmZnVuYy0+ZGV2
LCAiZ3BpbyByZXNldCBpcyBub3QgZGVmaW5lZCwgdHJ5aW5nIHRvIGxvYWQgZmlybXdhcmUgYW55
d2F5XG4iKTsKKwl9IGVsc2UgeworCQlncGlvZF9zZXRfY29uc3VtZXJfbmFtZShidXMtPmdwaW9f
cmVzZXQsICJ3ZnggcmVzZXQiKTsKKwkJaWYgKHBkYXRhLT5yZXNldF9pbnZlcnRlZCkKKwkJCWdw
aW9kX3RvZ2dsZV9hY3RpdmVfbG93KGJ1cy0+Z3Bpb19yZXNldCk7CisJCWdwaW9kX3NldF92YWx1
ZV9jYW5zbGVlcChidXMtPmdwaW9fcmVzZXQsIDEpOworCQl1c2xlZXBfcmFuZ2UoMTAwLCAxNTAp
OworCQlncGlvZF9zZXRfdmFsdWVfY2Fuc2xlZXAoYnVzLT5ncGlvX3Jlc2V0LCAwKTsKKwkJdXNs
ZWVwX3JhbmdlKDIwMDAsIDI1MDApOworCX0KKworCWJ1cy0+Y29yZSA9IHdmeF9pbml0X2NvbW1v
bigmZnVuYy0+ZGV2LCBwZGF0YSwgJndmeF9zcGlfaHdidXNfb3BzLCBidXMpOworCWlmICghYnVz
LT5jb3JlKQorCQlyZXR1cm4gLUVJTzsKKworCXJldHVybiB3ZnhfcHJvYmUoYnVzLT5jb3JlKTsK
K30KKworc3RhdGljIGludCB3Znhfc3BpX3JlbW92ZShzdHJ1Y3Qgc3BpX2RldmljZSAqZnVuYykK
K3sKKwlzdHJ1Y3Qgd2Z4X3NwaV9wcml2ICpidXMgPSBzcGlfZ2V0X2RydmRhdGEoZnVuYyk7CisK
Kwl3ZnhfcmVsZWFzZShidXMtPmNvcmUpOworCXJldHVybiAwOworfQorCisvKiBGb3IgZHluYW1p
YyBkcml2ZXIgYmluZGluZywga2VybmVsIGRvZXMgbm90IHVzZSBPRiB0byBtYXRjaCBkcml2ZXIu
IEl0IG9ubHkKKyAqIHVzZSBtb2RhbGlhcyBhbmQgbW9kYWxpYXMgaXMgYSBjb3B5IG9mICdjb21w
YXRpYmxlJyBEVCBub2RlIHdpdGggdmVuZG9yCisgKiBzdHJpcHBlZC4KKyAqLworc3RhdGljIGNv
bnN0IHN0cnVjdCBzcGlfZGV2aWNlX2lkIHdmeF9zcGlfaWRbXSA9IHsKKwl7ICJ3ZjIwMCIsICAg
IChrZXJuZWxfdWxvbmdfdCkmcGRhdGFfd2YyMDAgfSwKKwl7ICJicmQ0MDAxYSIsIChrZXJuZWxf
dWxvbmdfdCkmcGRhdGFfYnJkNDAwMWEgfSwKKwl7ICJicmQ4MDIyYSIsIChrZXJuZWxfdWxvbmdf
dCkmcGRhdGFfYnJkODAyMmEgfSwKKwl7ICJicmQ4MDIzYSIsIChrZXJuZWxfdWxvbmdfdCkmcGRh
dGFfYnJkODAyM2EgfSwKKwl7ICJ3Zngtc3BpIiwgIChrZXJuZWxfdWxvbmdfdCkmcGRhdGFfd2Z4
X3NwaSB9LAorCXsgfSwKK307CitNT0RVTEVfREVWSUNFX1RBQkxFKHNwaSwgd2Z4X3NwaV9pZCk7
CisKKyNpZmRlZiBDT05GSUdfT0YKK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lkIHdm
eF9zcGlfb2ZfbWF0Y2hbXSA9IHsKKwl7IC5jb21wYXRpYmxlID0gInNpbGFicyx3ZjIwMCIgfSwK
Kwl7IC5jb21wYXRpYmxlID0gInNpbGFicyxicmQ0MDAxYSIgfSwKKwl7IC5jb21wYXRpYmxlID0g
InNpbGFicyxicmQ4MDIyYSIgfSwKKwl7IC5jb21wYXRpYmxlID0gInNpbGFicyxicmQ4MDIzYSIg
fSwKKwl7IC5jb21wYXRpYmxlID0gInNpbGFicyx3Zngtc3BpIiB9LAorCXsgfSwKK307CitNT0RV
TEVfREVWSUNFX1RBQkxFKG9mLCB3Znhfc3BpX29mX21hdGNoKTsKKyNlbmRpZgorCitzdHJ1Y3Qg
c3BpX2RyaXZlciB3Znhfc3BpX2RyaXZlciA9IHsKKwkuZHJpdmVyID0geworCQkubmFtZSA9ICJ3
Zngtc3BpIiwKKwkJLm9mX21hdGNoX3RhYmxlID0gb2ZfbWF0Y2hfcHRyKHdmeF9zcGlfb2ZfbWF0
Y2gpLAorCX0sCisJLmlkX3RhYmxlID0gd2Z4X3NwaV9pZCwKKwkucHJvYmUgPSB3Znhfc3BpX3By
b2JlLAorCS5yZW1vdmUgPSB3Znhfc3BpX3JlbW92ZSwKK307Ci0tIAoyLjM0LjEKCg==
