Return-Path: <netdev-owner@vger.kernel.org>
X-Original-To: lists+netdev@lfdr.de
Delivered-To: lists+netdev@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 1BDEA3FD79F
	for <lists+netdev@lfdr.de>; Wed,  1 Sep 2021 12:25:31 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S234944AbhIAK0O (ORCPT <rfc822;lists+netdev@lfdr.de>);
        Wed, 1 Sep 2021 06:26:14 -0400
Received: from mail-db8eur05on2049.outbound.protection.outlook.com ([40.107.20.49]:51680
        "EHLO EUR05-DB8-obe.outbound.protection.outlook.com"
        rhost-flags-OK-OK-OK-FAIL) by vger.kernel.org with ESMTP
        id S233202AbhIAK0O (ORCPT <rfc822;netdev@vger.kernel.org>);
        Wed, 1 Sep 2021 06:26:14 -0400
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=gk3byfzfXkCIB2a+rdwkvIj2ipD7tKjf1umtXvUJUHaWG2eiPCI9CydUqLu/h33yScu3Wh5FKqLMhZHTM7QS2FrOKHwG/XAK/iBb1xSoXmCCAqYN9zmSIi7zODuLl78w/EmEp5Xu6UEb4UwHyR1XbjENnYbCqQ44msHTL9GritYD3zJyKJtB+dp5LMaDEDoFi2Y6iqeNljauyTjpBD0x2NfplhPDFSF6obD1/lLqscxNGjaRyZetD428yCS26HpwVuYgZ6Cev/L60vgvmZ7T0n961JFVpvh7KpsJrncpfxf4tNv9ucfh+dMLQWNG0EByO1TB+nYBRSC8US1NTfs8IQ==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com;
 s=arcselector9901; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version;
 bh=KIz2pAawYVmQ2+s/bSyzwFbiAFXu2vDG9NdbuB15A94=;
 b=Ks6sn1omtLjlwpZ4Sj3nibBb67sc1u1wKCeSMtTyzzt2drJIeH2MwExOUVwjkTjCCC6+2WmlXzKfni+BTqb43sIlHzsEGCmrerMl8AnsJlgDcq5hubRd1RJEYUS00L7Sd4GKZTWUxgMV09NQxUwg63OZl7d9pXgkh6EHFRmsjEdxC++VhkY/gLVGjvms5uGuHv2KORsZ83ghtp/LwA6646D+RFFwam1DZTfaPJtC2SqBLzulByPqyBClj7Wy5AsHhO1bYPR2xIJU2G1mAhfUECRNq8xtYsfMT3cPoIjmo2/pzDWY1eYlpmQddtYsE4BR9iC0X5ib0OGCc8FGQAEKGg==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=nxp.com; dmarc=pass action=none header.from=nxp.com; dkim=pass
 header.d=nxp.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=nxp.com; s=selector2;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=KIz2pAawYVmQ2+s/bSyzwFbiAFXu2vDG9NdbuB15A94=;
 b=PVqngzAWW+Ko1V9tQWFL2w1ijLXwz5V9y6Vo/BKgMWaY1b742nQ0PihBiD4Izy2uUaXcvg10pvUOwY2HDcP51omJdLU6iOZZoUY+ipK9bEounqDI/AyQXw+8fUfJCMXqIcLjQeun0TrECXaLNH/aLUhUq2N4EoB/NzUMz0AZ1eE=
Received: from DB8PR04MB6795.eurprd04.prod.outlook.com (2603:10a6:10:fa::15)
 by DB9PR04MB8430.eurprd04.prod.outlook.com (2603:10a6:10:24f::10) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.4478.19; Wed, 1 Sep
 2021 10:25:15 +0000
Received: from DB8PR04MB6795.eurprd04.prod.outlook.com
 ([fe80::5d5a:30b0:2bc2:312f]) by DB8PR04MB6795.eurprd04.prod.outlook.com
 ([fe80::5d5a:30b0:2bc2:312f%9]) with mapi id 15.20.4457.024; Wed, 1 Sep 2021
 10:25:15 +0000
From:   Joakim Zhang <qiangqing.zhang@nxp.com>
To:     Vladimir Oltean <olteanv@gmail.com>
CC:     "peppe.cavallaro@st.com" <peppe.cavallaro@st.com>,
        "alexandre.torgue@foss.st.com" <alexandre.torgue@foss.st.com>,
        "joabreu@synopsys.com" <joabreu@synopsys.com>,
        "davem@davemloft.net" <davem@davemloft.net>,
        "kuba@kernel.org" <kuba@kernel.org>,
        "mcoquelin.stm32@gmail.com" <mcoquelin.stm32@gmail.com>,
        "linux@armlinux.org.uk" <linux@armlinux.org.uk>,
        "netdev@vger.kernel.org" <netdev@vger.kernel.org>,
        "andrew@lunn.ch" <andrew@lunn.ch>,
        "f.fainelli@gmail.com" <f.fainelli@gmail.com>,
        "hkallweit1@gmail.com" <hkallweit1@gmail.com>,
        dl-linux-imx <linux-imx@nxp.com>
Subject: RE: [PATCH] net: stmmac: fix MAC not working when system resume back
 with WoL enabled
Thread-Topic: [PATCH] net: stmmac: fix MAC not working when system resume back
 with WoL enabled
Thread-Index: AQHXnxAXiWCMYvQkY0qCXzBIAPLPn6uO53WAgAAPWNA=
Date:   Wed, 1 Sep 2021 10:25:15 +0000
Message-ID: <DB8PR04MB6795CCAE06AA7CEB5CCEC521E6CD9@DB8PR04MB6795.eurprd04.prod.outlook.com>
References: <20210901090228.11308-1-qiangqing.zhang@nxp.com>
 <20210901092149.fmap4ac7jxf754ao@skbuf>
In-Reply-To: <20210901092149.fmap4ac7jxf754ao@skbuf>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
authentication-results: gmail.com; dkim=none (message not signed)
 header.d=none;gmail.com; dmarc=none action=none header.from=nxp.com;
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: ff88ceda-ed6c-45f5-1a6a-08d96d32c9d5
x-ms-traffictypediagnostic: DB9PR04MB8430:
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <DB9PR04MB8430D468C2585CD1250DFA47E6CD9@DB9PR04MB8430.eurprd04.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:10000;
x-ms-exchange-senderadcheck: 1
x-ms-exchange-antispam-relay: 0
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: NRmHRfidwqP5m8V+Eh4KZ8ayJhwXvZ9/Y1rFGPonWjUWj+M3t9ybH8Jy/HZy2+c1nDvYST4NTXlQh6hfiCnZ9tSuzHmAJeclM0SSfHfNL4dupht0aEyt0mA4+4y/qbFjJh9+mTyfeLSgQPoJRqRadX3xo4/cIYdGGrOtl5O4Hv2Z5/9LsyxY6BTOyHyheh50ZqZ7CbHTDGuJoxxjGtL/clhJSzFjBk1wjii96tF+SdPiLBd3JOFQeE+X8bwStPvNG9JdpxFl+4BTRacYH1Jv1pcb21LHZt+vC+TB0SYj4xnDU24q+3GUHkdfXkgSxY5dWmS8WpL3eAo0hfHd8kKrGeMA0Gis3WoMHnpnNPd9Y/FWRZCYru014nXkjI+2fQ3h1AyJuu/opiTlGXKN5wH98dJj6Y50sabnJ2YXY5IrwOtL2+OeOVofoQyiEGwN9bv1smwzIubM3/LMzHHQSCHpe0eWsMbvAM9TP4/HiqsTiE+cEGZFF4o2weEFmQ2RdmaRaUjvpgG6I3Mdsaok7WgpBGWujzsIZlOAIxniLMdkSjA/odInxRKgHMe7gVDSSE80rYnQ3I0/adb+tB0KMNhqSvZulTpZqokqv0OknJTH7EvVnfOnWgS+ZtLXeDlDvgXPuNhfFqHYgp0IfxprB0efXL/6jeE6naIhhL2+AvCpSzDAwFl15wBFTfUtOzOc0ZaGoJPbei+uuthrCMTrHW8qUUOdohKVP5peHnV/CM8sNylCmaiQPpTnswN6VS4nMzkxiQ4qRj4A+HKaXnXCIJX8w8IeIB0S4qPt19xwTX3fPQ8=
x-forefront-antispam-report: CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:DB8PR04MB6795.eurprd04.prod.outlook.com;PTR:;CAT:NONE;SFS:(4636009)(366004)(38100700002)(83380400001)(6916009)(52536014)(4326008)(38070700005)(8936002)(76116006)(66946007)(5660300002)(54906003)(33656002)(7416002)(316002)(66446008)(64756008)(66556008)(66476007)(8676002)(71200400001)(122000001)(86362001)(2906002)(6506007)(508600001)(9686003)(53546011)(966005)(186003)(26005)(55016002)(7696005);DIR:OUT;SFP:1101;
x-ms-exchange-antispam-messagedata-chunkcount: 1
x-ms-exchange-antispam-messagedata-0: =?gb2312?B?cjZKQ3llSUtpL0Z6d2ZXZUZvNXNXR2k4UEc2VzcvT0IyL2xRNkRjUWNJaHM4?=
 =?gb2312?B?NkUwSG12ZVpVTnl0Qmd1aHNTOW5EWU9CbzFYaml4TG04ZnU4OGtIM0tkOXJy?=
 =?gb2312?B?RXhxK2NaODE5ZjROMlJtTS9pT1pLT2xlK21jTXV3akRuek43aWVoWFIwQzgz?=
 =?gb2312?B?ZENmci8rME9GKzIrcXN6NTgzK0NwOHNjWWxvcFFHVEJXaDlTZlNjcFEva05i?=
 =?gb2312?B?UUxSMXBTaHhHaEMyZy90ME03K2dEckk0aWp4YW1CL1QremhLYmovelo3Zk5D?=
 =?gb2312?B?MGNEaFBjVlJQUE83MEVRcTEzNE5xa1pITkZXVkJLZXFMRmpBRkt5MU9BTHV1?=
 =?gb2312?B?RW02WVQvK1MrVjQvR213QnMreDBXN2t4ZCtJQU9ncExqMkV5dVUyVTlvRXJj?=
 =?gb2312?B?cGxSMGlyMm1oVmJOck1ESFVQWk9lWlU0dnU1aVVBbmkwWEtucW95ekNnR3gy?=
 =?gb2312?B?LytTWElOZk9GTm04WldPclI1dDZ5TlB3NG9VbW9CeFNwUmRzbVBReERTTnhT?=
 =?gb2312?B?MlJlTXVwcTNISmUrRnBXS2dZdnRXSDVPczYxODRsRE83Ym5mbTZGQU14MkVX?=
 =?gb2312?B?cUxHT0tsTjFTYjRnMmFNUnBVd1ErbHpTL2x6cUNHR29aUGVRSytyVjhScldi?=
 =?gb2312?B?ZnBuSmtWMkJGdzJNSVF1YjZJL1R1WUdSVk4yM1A5U0VvYnd6MFZ1ZnNROVFE?=
 =?gb2312?B?UTY0VXJYQ2xCMHhWTE11K0dwNmJQWTBaN3lBSGEyVzY5amsvS0RycytwZDdG?=
 =?gb2312?B?ZWlHc3ZUWnJOM0UyL1pQR3F6aFVZdW1TQWVGNERiZ0ltYTZ1MWZ0VWo0V1pR?=
 =?gb2312?B?blVtYjE4dHBMb3FQSzNTc1hNVW9CVW8vbjZieWVhYWN5MnFBaU5ETUFsVkRI?=
 =?gb2312?B?YnZsUTBTdU5aaEZSdUIrZllYQ05HSkVjalkwVlJxRlEwWElhbVZ0VE5lUWtM?=
 =?gb2312?B?TDJrOFYrSnR1M1YvamU0RWphSVNZMy9oVENnTHZsVzNKVHZPTkRlQ3NGSElG?=
 =?gb2312?B?c3lRR2pXMDNpSzZnTURCWWRwUThoOWY3OTFFSitsUk1udXFnTVZuMkR4OXlC?=
 =?gb2312?B?dTFwbmZteW1sYXFQdWRzT1VOVFJZYjV6U3BIRlhOeW9DdTJxN3I5TmNqSGJN?=
 =?gb2312?B?MGVtR0lOOXZ4bFV0Q2JLYkFsVktEakc4dHVvZGRlcHFBYk9VZDBBUzltbVBS?=
 =?gb2312?B?dkNSTkw5WEgxeDQwbWUzVzl6OHA5ZXpNMHh5SmVnbk9jV0JNWmsyRk5hY3NB?=
 =?gb2312?B?ckRHNE9OSzhyM0FUbUs0anl4a2ROTCtIY05WQlNsMTZ3ZHVNNEZPbE5SQnFt?=
 =?gb2312?B?RkdSZ0d5MWcxNWlFbVl4b3Rqc1prTWZSaDhBUkRVcDlFbmZDYnNRd2sySW9C?=
 =?gb2312?B?NGIydHN4MnN0VGpkUUx1VGlrUUZISkhDSnFlRnJJdGJLT0hOZUZsRS9rZUZQ?=
 =?gb2312?B?Yyt0NUU1VFI1UWxuOHNaalhZUFh1RWpwSllMT3lHRGtQMlBkYmdQeXp2b3ZQ?=
 =?gb2312?B?bVl2V2lSOTlsL08yR2JCZUVkNUU0YjZrTjI5M1V4bnNYL3pvamxyK3FGZjg2?=
 =?gb2312?B?eGxabVd1RHRVVlpGU1hmTWZXWDBSTFdMRjBpSnY3Z1lja1dXckV5Z0xOVWpK?=
 =?gb2312?B?SXNYeWQwWU5SNUk4VUwwalp0NWxPRkZJOTgrUndQRjZYLzRXbFpXWldoUEdS?=
 =?gb2312?B?dW1OSC9TeGl3Y01BK2I4MFY2WWpPSStvMlJPTjJzWlh1QysrL21hRUpNeFNv?=
 =?gb2312?Q?Sq6DELDB+wjbOpdmP5BDarUDhBJoQngDkq97SmF?=
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: nxp.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: DB8PR04MB6795.eurprd04.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: ff88ceda-ed6c-45f5-1a6a-08d96d32c9d5
X-MS-Exchange-CrossTenant-originalarrivaltime: 01 Sep 2021 10:25:15.0579
 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 686ea1d3-bc2b-4c6f-a92c-d99c5c301635
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: C0OhIavPrsFipg7wE4wpOTrYKcqO44RUjicJFx8cYL1L2eR3W8qgZS1boBte495WHmSeaOAJBq6JN5e/rInakQ==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DB9PR04MB8430
Precedence: bulk
List-ID: <netdev.vger.kernel.org>
X-Mailing-List: netdev@vger.kernel.org

DQpIaSBWbGFkaW1pciwNCg0KPiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiBGcm9tOiBW
bGFkaW1pciBPbHRlYW4gPG9sdGVhbnZAZ21haWwuY29tPg0KPiBTZW50OiAyMDIxxOo51MIxyNUg
MTc6MjINCj4gVG86IEpvYWtpbSBaaGFuZyA8cWlhbmdxaW5nLnpoYW5nQG54cC5jb20+DQo+IENj
OiBwZXBwZS5jYXZhbGxhcm9Ac3QuY29tOyBhbGV4YW5kcmUudG9yZ3VlQGZvc3Muc3QuY29tOw0K
PiBqb2FicmV1QHN5bm9wc3lzLmNvbTsgZGF2ZW1AZGF2ZW1sb2Z0Lm5ldDsga3ViYUBrZXJuZWwu
b3JnOw0KPiBtY29xdWVsaW4uc3RtMzJAZ21haWwuY29tOyBsaW51eEBhcm1saW51eC5vcmcudWs7
DQo+IG5ldGRldkB2Z2VyLmtlcm5lbC5vcmc7IGFuZHJld0BsdW5uLmNoOyBmLmZhaW5lbGxpQGdt
YWlsLmNvbTsNCj4gaGthbGx3ZWl0MUBnbWFpbC5jb207IGRsLWxpbnV4LWlteCA8bGludXgtaW14
QG54cC5jb20+DQo+IFN1YmplY3Q6IFJlOiBbUEFUQ0hdIG5ldDogc3RtbWFjOiBmaXggTUFDIG5v
dCB3b3JraW5nIHdoZW4gc3lzdGVtIHJlc3VtZQ0KPiBiYWNrIHdpdGggV29MIGVuYWJsZWQNCj4g
DQo+IE9uIFdlZCwgU2VwIDAxLCAyMDIxIGF0IDA1OjAyOjI4UE0gKzA4MDAsIEpvYWtpbSBaaGFu
ZyB3cm90ZToNCj4gPiBXZSBjYW4gcmVwcm9kdWNlIHRoaXMgaXNzdWUgd2l0aCBiZWxvdyBzdGVw
czoNCj4gPiAxKSBlbmFibGUgV29MIG9uIHRoZSBob3N0DQo+ID4gMikgaG9zdCBzeXN0ZW0gc3Vz
cGVuZGVkDQo+ID4gMykgcmVtb3RlIGNsaWVudCBzZW5kIG91dCB3YWtldXAgcGFja2V0cyBXZSBj
YW4gc2VlIHRoYXQgaG9zdCBzeXN0ZW0NCj4gPiByZXN1bWUgYmFjaywgYnV0IGNhbid0IHdvcmss
IHN1Y2ggYXMgcGluZyBmYWlsZWQuDQo+ID4NCj4gPiBBZnRlciBhIGJpdCBkaWdnaW5nLCB0aGlz
IGlzc3VlIGlzIGludHJvZHVjZWQgYnkgdGhlIGNvbW1pdA0KPiA+IDQ2ZjY5ZGVkOTg4ZA0KPiA+
ICgibmV0OiBzdG1tYWM6IFVzZSByZXNvbHZlZCBsaW5rIGNvbmZpZyBpbiBtYWNfbGlua191cCgp
IiksIHdoaWNoIHVzZQ0KPiA+IHRoZSBmaW5hbGlzZWQgbGluayBwYXJhbWV0ZXJzIGluIG1hY19s
aW5rX3VwKCkgcmF0aGVyIHRoYW4gdGhlDQo+ID4gcGFyYW1ldGVycyBpbiBtYWNfY29uZmlnKCku
DQo+ID4NCj4gPiBUaGVyZSBhcmUgdHdvIHNjZW5hcmlvcyBmb3IgTUFDIHN1c3BlbmQvcmVzdW1l
Og0KPiA+DQo+ID4gMSkgTUFDIHN1c3BlbmQgd2l0aCBXb0wgZGlzYWJsZWQsIHN0bW1hY19zdXNw
ZW5kKCkgY2FsbA0KPiA+IHBoeWxpbmtfbWFjX2NoYW5nZSgpIHRvIG5vdGlmeSBwaHlsaW5rIG1h
Y2hpbmUgdGhhdCBhIGNoYW5nZSBpbiBNQUMNCj4gPiBzdGF0ZSwgdGhlbiAubWFjX2xpbmtfZG93
biBjYWxsYmFjayB3b3VsZCBiZSBpbnZva2VkLiBGdXJ0aGVyLCBpdCB3aWxsDQo+ID4gY2FsbCBw
aHlsaW5rX3N0b3AoKSB0byBzdG9wIHRoZSBwaHlsaW5rIGluc3RhbmNlLiBXaGVuIE1BQyByZXN1
bWUNCj4gPiBiYWNrLCBmaXJzdGx5IHBoeWxpbmtfc3RhcnQoKSBpcyBjYWxsZWQgdG8gc3RhcnQg
dGhlIHBoeWxpbmsgaW5zdGFuY2UsDQo+ID4gdGhlbiBjYWxsIHBoeWxpbmtfbWFjX2NoYW5nZSgp
IHdoaWNoIHdpbGwgZmluYWxseSB0cmlnZ2VyIHBoeWxpbmsNCj4gPiBtYWNoaW5lIHRvIGludm9r
ZSAubWFjX2NvbmZpZyBhbmQgLm1hY19saW5rX3VwIGNhbGxiYWNrLiBBbGwgaXMgZmluZQ0KPiA+
IHNpbmNlIGNvbmZpZ3VyYXRpb24gaW4gdGhlc2UgdHdvIGNhbGxiYWNrcyB3aWxsIGJlIGluaXRp
YWxpemVkLg0KPiA+DQo+ID4gMikgTUFDIHN1c3BlbmQgd2l0aCBXb0wgZW5hYmxlZCwgcGh5bGlu
a19tYWNfY2hhbmdlKCkgd2lsbCBwdXQgbGluaw0KPiA+IGRvd24sIGJ1dCB0aGVyZSBpcyBubyBw
aHlsaW5rX3N0b3AoKSB0byBzdG9wIHRoZSBwaHlsaW5rIGluc3RhbmNlLCBzbw0KPiA+IGl0IHdp
bGwgbGluayB1cCBhZ2FpbiwgdGhhdCBtZWFucyAubWFjX2NvbmZpZyBhbmQgLm1hY19saW5rX3Vw
IHdvdWxkDQo+ID4gYmUgaW52b2tlZCBiZWZvcmUgc3lzdGVtIHN1c3BlbmRlZC4gQWZ0ZXIgc3lz
dGVtIHJlc3VtZSBiYWNrLCBpdCB3aWxsDQo+ID4gZG8gRE1BIGluaXRpYWxpemF0aW9uIGFuZCBT
VyByZXNldCB3aGljaCBsZXQgTUFDIGxvc3QgdGhlIGhhcmR3YXJlDQo+ID4gc2V0dGluZyAoaS5l
IE1BQ19Db25maWd1cmF0aW9uIHJlZ2lzdGVyKG9mZnNldCAweDApIGlzIHJlc2V0KS4gU2luY2UN
Cj4gPiBsaW5rIGlzIHVwIGJlZm9yZSBzeXN0ZW0gc3VzcGVuZGVkLCBzbyAubWFjX2xpbmtfdXAg
d291bGQgbm90IGJlDQo+ID4gaW52b2tlZCBhZnRlciBzeXN0ZW0gcmVzdW1lIGJhY2ssIGxlYWQg
dG8gdGhlcmUgaXMgbm8gY2hhbmNlIHRvDQo+ID4gaW5pdGlhbGl6ZSB0aGUgY29uZmlndXJhdGlv
biBpbiAubWFjX2xpbmtfdXAgY2FsbGJhY2ssIGFzIGEgcmVzdWx0LA0KPiA+IE1BQyBjYW4ndCB3
b3JrIGFueSBsb25nZXIuDQo+IA0KPiBIYXZlIHlvdSB0cmllZCBwdXR0aW5nIHBoeWxpbmtfc3Rv
cCBpbiAuc3VzcGVuZCwgYW5kIHBoeWxpbmtfc3RhcnQgaW4gLnJlc3VtZT8NCg0KWWVzLCBJIHRy
aWVkLCBidXQgdGhlIHN5c3RlbSBjYW4ndCBiZSB3YWtldXAgd2l0aCByZW1vdGUgcGFja2V0cy4N
ClBsZWFzZSBzZWUgdGhlIGNvZGUgY2hhbmdlLg0KDQpAQCAtNTM3NCw3ICs1Mzc0LDYgQEAgaW50
IHN0bW1hY19zdXNwZW5kKHN0cnVjdCBkZXZpY2UgKmRldikNCiAgICAgICAgICAgICAgICBydG5s
X2xvY2soKTsNCiAgICAgICAgICAgICAgICBpZiAoZGV2aWNlX21heV93YWtldXAocHJpdi0+ZGV2
aWNlKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHBoeWxpbmtfc3BlZWRfZG93bihwcml2LT5w
aHlsaW5rLCBmYWxzZSk7DQotICAgICAgICAgICAgICAgcGh5bGlua19zdG9wKHByaXYtPnBoeWxp
bmspOw0KICAgICAgICAgICAgICAgIHJ0bmxfdW5sb2NrKCk7DQogICAgICAgICAgICAgICAgbXV0
ZXhfbG9jaygmcHJpdi0+bG9jayk7DQoNCkBAIC01Mzg1LDYgKzUzODQsMTAgQEAgaW50IHN0bW1h
Y19zdXNwZW5kKHN0cnVjdCBkZXZpY2UgKmRldikNCiAgICAgICAgfQ0KICAgICAgICBtdXRleF91
bmxvY2soJnByaXYtPmxvY2spOw0KDQorICAgICAgIHJ0bmxfbG9jaygpOw0KKyAgICAgICBwaHls
aW5rX3N0b3AocHJpdi0+cGh5bGluayk7DQorICAgICAgIHJ0bmxfdW5sb2NrKCk7DQorDQogICAg
ICAgIHByaXYtPnNwZWVkID0gU1BFRURfVU5LTk9XTjsNCiAgICAgICAgcmV0dXJuIDA7DQogfQ0K
QEAgLTU0NDgsNiArNTQ1MSwxMiBAQCBpbnQgc3RtbWFjX3Jlc3VtZShzdHJ1Y3QgZGV2aWNlICpk
ZXYpDQogICAgICAgICAgICAgICAgcGluY3RybF9wbV9zZWxlY3RfZGVmYXVsdF9zdGF0ZShwcml2
LT5kZXZpY2UpOw0KICAgICAgICAgICAgICAgIGlmIChwcml2LT5wbGF0LT5jbGtfcHRwX3JlZikN
CiAgICAgICAgICAgICAgICAgICAgICAgIGNsa19wcmVwYXJlX2VuYWJsZShwcml2LT5wbGF0LT5j
bGtfcHRwX3JlZik7DQorDQorICAgICAgICAgICAgICAgcnRubF9sb2NrKCk7DQorICAgICAgICAg
ICAgICAgLyogV2UgbWF5IGhhdmUgY2FsbGVkIHBoeWxpbmtfc3BlZWRfZG93biBiZWZvcmUgKi8N
CisgICAgICAgICAgICAgICBwaHlsaW5rX3NwZWVkX3VwKHByaXYtPnBoeWxpbmspOw0KKyAgICAg
ICAgICAgICAgIHJ0bmxfdW5sb2NrKCk7DQorDQogICAgICAgICAgICAgICAgLyogcmVzZXQgdGhl
IHBoeSBzbyB0aGF0IGl0J3MgcmVhZHkgKi8NCiAgICAgICAgICAgICAgICBpZiAocHJpdi0+bWlp
ICYmIHByaXYtPm1kaW9fcnN0X2FmdGVyX3Jlc3VtZSkNCiAgICAgICAgICAgICAgICAgICAgICAg
IHN0bW1hY19tZGlvX3Jlc2V0KHByaXYtPm1paSk7DQpAQCAtNTQ2MSwxMyArNTQ3MCw5IEBAIGlu
dCBzdG1tYWNfcmVzdW1lKHN0cnVjdCBkZXZpY2UgKmRldikNCiAgICAgICAgICAgICAgICAgICAg
ICAgIHJldHVybiByZXQ7DQogICAgICAgIH0NCg0KLSAgICAgICBpZiAoIWRldmljZV9tYXlfd2Fr
ZXVwKHByaXYtPmRldmljZSkgfHwgIXByaXYtPnBsYXQtPnBtdCkgew0KLSAgICAgICAgICAgICAg
IHJ0bmxfbG9jaygpOw0KLSAgICAgICAgICAgICAgIHBoeWxpbmtfc3RhcnQocHJpdi0+cGh5bGlu
ayk7DQotICAgICAgICAgICAgICAgLyogV2UgbWF5IGhhdmUgY2FsbGVkIHBoeWxpbmtfc3BlZWRf
ZG93biBiZWZvcmUgKi8NCi0gICAgICAgICAgICAgICBwaHlsaW5rX3NwZWVkX3VwKHByaXYtPnBo
eWxpbmspOw0KLSAgICAgICAgICAgICAgIHJ0bmxfdW5sb2NrKCk7DQotICAgICAgIH0NCisgICAg
ICAgcnRubF9sb2NrKCk7DQorICAgICAgIHBoeWxpbmtfc3RhcnQocHJpdi0+cGh5bGluayk7DQor
ICAgICAgIHJ0bmxfdW5sb2NrKCk7DQoNCiAgICAgICAgcnRubF9sb2NrKCk7DQogICAgICAgIG11
dGV4X2xvY2soJnByaXYtPmxvY2spOw0KDQo+ID4NCj4gPiBBYm92ZSBkZXNjcmlwdGlvbiBpcyB3
aGF0IEkgZm91bmQgd2hlbiBkZWJ1ZyB0aGlzIGlzc3VlLCB0aGlzIHBhdGNoIGlzDQo+ID4ganVz
dCByZXZlcnQgYnJva2VuIHBhdGNoIHRvIHdvcmthcm91bmQgaXQsIGF0IGxlYXN0IG1ha2UgTUFD
IHdvcmsgd2hlbg0KPiA+IHN5c3RlbSByZXN1bWUgYmFjayB3aXRoIFdvTCBlbmFibGVkLg0KPiA+
DQo+ID4gU2FpZCB0aGlzIGlzIGEgd29ya2Fyb3VuZCwgc2luY2UgaXQgaGFzIG5vdCByZXNvbHZl
IHRoZSBpc3N1ZSBjb21wbGV0ZWx5Lg0KPiA+IEkganVzdCBtb3ZlIHRoZSBzcGVlZC9kdXBsZXgv
cGF1c2UgZXRjIGludG8gLm1hY19jb25maWcgY2FsbGJhY2ssDQo+ID4gdGhlcmUgYXJlIG90aGVy
IGNvbmZpZ3VyYXRpb25zIGluIC5tYWNfbGlua191cCBjYWxsYmFjayB3aGljaCBhbHNvDQo+ID4g
bmVlZCB0byBiZSBpbml0aWFsaXplZCB0byB3b3JrIGZvciBzcGVjaWZpYyBmdW5jdGlvbnMuDQo+
ID4NCj4gPiBGaXhlczogNDZmNjlkZWQ5ODhkICgibmV0OiBzdG1tYWM6IFVzZSByZXNvbHZlZCBs
aW5rIGNvbmZpZyBpbg0KPiA+IG1hY19saW5rX3VwKCkiKQ0KPiA+IFNpZ25lZC1vZmYtYnk6IEpv
YWtpbSBaaGFuZyA8cWlhbmdxaW5nLnpoYW5nQG54cC5jb20+DQo+ID4gLS0tDQo+ID4NCj4gPiBC
cm9rZW4gcGF0Y2ggY2Fubm90IGJlIHJldmVydGVkIGRpcmVjdGx5LCBzbyBtYW51YWxseSBtb2Rp
ZmllZCBpdC4NCj4gPg0KPiA+IEkgYWxzbyB0cmllZCB0byBmaXggaW4gb3RoZXIgd2F5cywgYnV0
IGZhaWxlZCB0byBmaW5kIGEgYmV0dGVyDQo+ID4gc29sdXRpb24sIGFueSBzdWdnZXN0aW9ucyB3
b3VsZCBiZSBhcHByZWNpYXRlZC4gVGhhbmtzLg0KPiA+DQo+ID4gSm9ha2ltDQo+IA0KPiBEbyB5
b3Uga25vdyBleGFjdGx5IHdoeSBpdCB1c2VkIHRvIHdvcmsgcHJpb3IgdG8gdGhpcyBwYXRjaD8N
Cg0KWWVzLCBzaW5jZSBpdCBjb25maWd1cmVzIHRoZSBNQUNfQ1RSTF9SRUcgcmVnaXN0ZXIgaW4g
Lm1hY19jb25maWcgY2FsbGJhY2ssDQppdCB3aWxsIGJlIGNhbGxlZCB3aGVuIHN5c3RlbSByZXN1
bWUgYmFjayB3aXRoIFdvTCBlbmFibGVkLiANCmh0dHBzOi8vZWxpeGlyLmJvb3RsaW4uY29tL2xp
bnV4L3Y1LjQuMTQzL3NvdXJjZS9kcml2ZXJzL25ldC9ldGhlcm5ldC9zdG1pY3JvL3N0bW1hYy9z
dG1tYWNfbWFpbi5jI0w4NTIgDQoNCklmIGNvbmZpZ3VyZSB0aGUgTUFDX0NUUkxfUkVHIHJlZ2lz
dGVyIGluIC5tYWNfbGlua191cCBjYWxsYmFjaywgd2hlbiBzeXN0ZW0gcmVzdW1lIGJhY2sgd2l0
aCBXb0wgYWN0aXZlLA0KLm1hY19saW5rX3VwIHdvdWxkIG5vdCBiZSBjYWxsZWQsIHNvIE1BQyBj
YW4ndCB3b3JrIGFueSBsb25nZXIuDQpodHRwczovL2VsaXhpci5ib290bGluLmNvbS9saW51eC92
NS4xNC1yYzcvc291cmNlL2RyaXZlcnMvbmV0L2V0aGVybmV0L3N0bWljcm8vc3RtbWFjL3N0bW1h
Y19tYWluLmMjTDEwNDQNCg0KVGhhbmtzLg0KIA0KQmVzdCBSZWdhcmRzLA0KSm9ha2ltIFpoYW5n
DQo=
