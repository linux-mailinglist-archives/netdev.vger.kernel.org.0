Return-Path: <netdev-owner@vger.kernel.org>
X-Original-To: lists+netdev@lfdr.de
Delivered-To: lists+netdev@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id 27765EA467
	for <lists+netdev@lfdr.de>; Wed, 30 Oct 2019 20:49:30 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726336AbfJ3Tt2 (ORCPT <rfc822;lists+netdev@lfdr.de>);
        Wed, 30 Oct 2019 15:49:28 -0400
Received: from mail-yw1-f45.google.com ([209.85.161.45]:42067 "EHLO
        mail-yw1-f45.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1726261AbfJ3Tt2 (ORCPT
        <rfc822;netdev@vger.kernel.org>); Wed, 30 Oct 2019 15:49:28 -0400
Received: by mail-yw1-f45.google.com with SMTP id d5so1269297ywk.9
        for <netdev@vger.kernel.org>; Wed, 30 Oct 2019 12:49:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20161025;
        h=mime-version:references:in-reply-to:from:date:message-id:subject:to
         :cc;
        bh=YbsVUtdfVdddWGn/AfMXCUP5v6AfOlPA0ZYDWJkQUQw=;
        b=Jt0TnlAdyCeM3wr8t1Oqm96FBJCVhm7BAAg5RCsPOrksE2PXLp1G1TrPlVTCjJPtlB
         Tjmw0+A3V0y1E3dYTQioQzEp3sJXdOoYJOE3d9juS02uLneg2pZk2J3C2TYdYfnzp1ah
         D6ylhoygTVz/fZiZ32e1M4Rvg8Z2KnCm34s8IcGXfznHOXeJ/B72Sz8i5HhUngJLtlHd
         vnoDIp2C/s50k+XlV4CBYHm/CSIsHESR+A5LLFeEPprmgwFZcyybh4Un4Hy0G1OcBthD
         HujmdMWtqRl6GHxF9uoWz7mznU0SG5A0GJkoav3oqewDdsNhuD5Sb1Hc1kKLmUN8NQyA
         vvkQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-gm-message-state:mime-version:references:in-reply-to:from:date
         :message-id:subject:to:cc;
        bh=YbsVUtdfVdddWGn/AfMXCUP5v6AfOlPA0ZYDWJkQUQw=;
        b=Y+9cp7LtUOC76MAhcUh+iPEInQ/OGU+iNirIsL2VT87xjwv6PUoPMbchBf3k9JXDFq
         rzNcbRnxHLTpA6+IACs6feoZjK5UMAc6lS9x9JU0vXNC82gDFz35wSCxAitv+F09dmVb
         qF215CJsEMfWSWtL9JoWVXf5YcuhMCKo6M1/6ErZi8oQLSpqeYrcZpRgBIRQDhYcQNPv
         +NalGRyB8DnALnxHY4Jd6znx9ZiYSSlQa4LbWkevWjkzJg6U2wiTrbV0KvfsDNSFxZjM
         meZGLVxWL0GPqVsvSIo9VLv0AXUyQTq/ksQFsDakY6eknGKMiFbsXJ1JG4pCo3ajU19l
         cPjw==
X-Gm-Message-State: APjAAAUz1uV64+JYMncdU5t+38UA9ujuYzAr+HIkCnDWNJToAuyb0F/p
        pNQ6fQsfmhVk6fJdO9ck6cWNrpuvuvY=
X-Google-Smtp-Source: APXvYqw877RsBS2N+CMfId0SF5mqIPehzm1bTxf3Ee+jUFdzBgOcHcQN9iqikic2BhNxxWh696hQJg==
X-Received: by 2002:a81:844f:: with SMTP id u76mr1071795ywf.16.1572464966622;
        Wed, 30 Oct 2019 12:49:26 -0700 (PDT)
Received: from mail-yw1-f43.google.com (mail-yw1-f43.google.com. [209.85.161.43])
        by smtp.gmail.com with ESMTPSA id l76sm1176994ywl.24.2019.10.30.12.49.25
        for <netdev@vger.kernel.org>
        (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
        Wed, 30 Oct 2019 12:49:25 -0700 (PDT)
Received: by mail-yw1-f43.google.com with SMTP id v5so1292992ywd.0
        for <netdev@vger.kernel.org>; Wed, 30 Oct 2019 12:49:25 -0700 (PDT)
X-Received: by 2002:a81:2f12:: with SMTP id v18mr1069770ywv.269.1572464964870;
 Wed, 30 Oct 2019 12:49:24 -0700 (PDT)
MIME-Version: 1.0
References: <BN8PR12MB326699DDA44E0EABB5C422E4D3600@BN8PR12MB3266.namprd12.prod.outlook.com>
In-Reply-To: <BN8PR12MB326699DDA44E0EABB5C422E4D3600@BN8PR12MB3266.namprd12.prod.outlook.com>
From:   Willem de Bruijn <willemdebruijn.kernel@gmail.com>
Date:   Wed, 30 Oct 2019 20:48:47 +0100
X-Gmail-Original-Message-ID: <CA+FuTSdVsTgcpB9=CEb=O369qUR58d-zEz5vmv+9nR+-DJFM6Q@mail.gmail.com>
Message-ID: <CA+FuTSdVsTgcpB9=CEb=O369qUR58d-zEz5vmv+9nR+-DJFM6Q@mail.gmail.com>
Subject: Re: USO / UFO status ?
To:     Jose Abreu <Jose.Abreu@synopsys.com>
Cc:     "netdev@vger.kernel.org" <netdev@vger.kernel.org>,
        Joao Pinto <Joao.Pinto@synopsys.com>
Content-Type: text/plain; charset="UTF-8"
Sender: netdev-owner@vger.kernel.org
Precedence: bulk
List-ID: <netdev.vger.kernel.org>
X-Mailing-List: netdev@vger.kernel.org

On Wed, Oct 30, 2019 at 3:16 PM Jose Abreu <Jose.Abreu@synopsys.com> wrote:
>
> Hi netdev,
>
> What's the status of UDP Segmentation Offload (USO) and UDP
> Fragmentation Offloading (UFO) on current mainline ?
>
> I see that NETIF_F_GSO_UDP_L4 is only supported by Mellanox NIC's but I
> also saw some patches from Intel submitting the support. Is there any
> tool to test this (besides the -net selftests) ?

UDP segmentation offload with UDP_SEGMENT is always available with
software segmentation. The only driver with hardware offload (USO)
merged so far is indeed mlx5. Patches for various Intel NICs are in
review.

UFO is no longer generated by the protocol stack. It is still accepted
as input from legacy userspace with VIRTIO_NET_HDR_GSO_UDP.
