Return-Path: <netdev-owner@vger.kernel.org>
X-Original-To: lists+netdev@lfdr.de
Delivered-To: lists+netdev@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id 99E0C44DA0
	for <lists+netdev@lfdr.de>; Thu, 13 Jun 2019 22:40:07 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1729981AbfFMUjz (ORCPT <rfc822;lists+netdev@lfdr.de>);
        Thu, 13 Jun 2019 16:39:55 -0400
Received: from mail-eopbgr80082.outbound.protection.outlook.com ([40.107.8.82]:2635
        "EHLO EUR04-VI1-obe.outbound.protection.outlook.com"
        rhost-flags-OK-OK-OK-FAIL) by vger.kernel.org with ESMTP
        id S1729241AbfFMUjy (ORCPT <rfc822;netdev@vger.kernel.org>);
        Thu, 13 Jun 2019 16:39:54 -0400
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=Mellanox.com;
 s=selector2;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=phIz3igdiKGKHO4x/Zb+k6OSw5BSc8Ak/BkaPHCnVUc=;
 b=hdc6kPBsrhbm3FO/fO5ZnhzGOI9JOjMBqzgIQYC85t6dkJGz0VaUhnhxojO4CY3PqrsLS+NWlc5sSYqHK37lOdV3kH+clYRJHxsATOCm0tL3WsIRerww8hRjlMzSaN/Ztx+91t014/fwTr0TbUrLDslXYzLwWqECtTs7oyck8dI=
Received: from DB6PR0501MB2759.eurprd05.prod.outlook.com (10.172.227.7) by
 DB6PR0501MB2629.eurprd05.prod.outlook.com (10.172.225.11) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.1965.15; Thu, 13 Jun 2019 20:39:30 +0000
Received: from DB6PR0501MB2759.eurprd05.prod.outlook.com
 ([fe80::a901:6951:59de:3278]) by DB6PR0501MB2759.eurprd05.prod.outlook.com
 ([fe80::a901:6951:59de:3278%2]) with mapi id 15.20.1987.012; Thu, 13 Jun 2019
 20:39:30 +0000
From:   Saeed Mahameed <saeedm@mellanox.com>
To:     "David S. Miller" <davem@davemloft.net>
CC:     "netdev@vger.kernel.org" <netdev@vger.kernel.org>,
        Jiri Pirko <jiri@mellanox.com>,
        Feras Daoud <ferasda@mellanox.com>,
        Alex Vesker <valex@mellanox.com>,
        Moshe Shemesh <moshe@mellanox.com>,
        Daniel Jurgens <danielj@mellanox.com>,
        Saeed Mahameed <saeedm@mellanox.com>
Subject: [net-next v2 08/15] net/mlx5: Issue SW reset on FW assert
Thread-Topic: [net-next v2 08/15] net/mlx5: Issue SW reset on FW assert
Thread-Index: AQHVIigZfzjSG8o6F0+YUFEilM8wMQ==
Date:   Thu, 13 Jun 2019 20:39:30 +0000
Message-ID: <20190613203825.31049-9-saeedm@mellanox.com>
References: <20190613203825.31049-1-saeedm@mellanox.com>
In-Reply-To: <20190613203825.31049-1-saeedm@mellanox.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-mailer: git-send-email 2.21.0
x-originating-ip: [209.116.155.178]
x-clientproxiedby: BYAPR02CA0020.namprd02.prod.outlook.com
 (2603:10b6:a02:ee::33) To DB6PR0501MB2759.eurprd05.prod.outlook.com
 (2603:10a6:4:84::7)
authentication-results: spf=none (sender IP is )
 smtp.mailfrom=saeedm@mellanox.com; 
x-ms-exchange-messagesentrepresentingtype: 1
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 7e12932d-3a0f-4d39-3ffe-08d6f03f3bc5
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0;PCL:0;RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(4618075)(2017052603328)(7193020);SRVR:DB6PR0501MB2629;
x-ms-traffictypediagnostic: DB6PR0501MB2629:
x-microsoft-antispam-prvs: <DB6PR0501MB2629A9F45B52154D6A185A6FBEEF0@DB6PR0501MB2629.eurprd05.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:3968;
x-forefront-prvs: 0067A8BA2A
x-forefront-antispam-report: SFV:NSPM;SFS:(10009020)(396003)(136003)(366004)(39860400002)(376002)(346002)(199004)(189003)(8676002)(6916009)(81156014)(81166006)(2616005)(316002)(11346002)(25786009)(4326008)(6512007)(86362001)(476003)(486006)(8936002)(6436002)(446003)(50226002)(6486002)(66066001)(36756003)(26005)(305945005)(7736002)(186003)(73956011)(66946007)(64756008)(66446008)(66556008)(66476007)(53936002)(6116002)(256004)(14444005)(3846002)(1076003)(71190400001)(71200400001)(2906002)(478600001)(99286004)(52116002)(14454004)(30864003)(102836004)(54906003)(76176011)(5660300002)(6506007)(107886003)(386003)(68736007);DIR:OUT;SFP:1101;SCL:1;SRVR:DB6PR0501MB2629;H:DB6PR0501MB2759.eurprd05.prod.outlook.com;FPR:;SPF:None;LANG:en;PTR:InfoNoRecords;A:1;MX:1;
received-spf: None (protection.outlook.com: mellanox.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: CMijv8xivhsDmCSoW0kJv9fDg+DaDhxjLcGX39VPX48Qu52KGy39aRR3id1dOtWVAado3WLq7rnjjWrQ10IBT8gVUCdtbc8DRP9GDojOjYOM4NLCCm6t+5XFPZSgzVZhO7zEvEU2xRY1M9F0Nckp40YDnu4uxIhElTo0/FG0x9l1YzvzF7Tt5FgFqebu5iBms3rbSwtU3iRbbzg17p8qaX6X4PUa5YHwWLYk0847wqbxM001A34/QwpdGmHL8Z4689Ny2HQbq5DFJG11LAFdPZFnnE6rG2gUXKNJUN9KQq8dldGwnYgxcyH/Ah5t3QIjyTja5dhyLA3VSNBRCjazMiA1RO44xt9PUyftTlTUKee1zYVByxbg/ESty3X7dRDF1ZC03tpLVMozbWDHHwiDWi1ZnLpS40aMlTpc5ecKv70=
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: Mellanox.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 7e12932d-3a0f-4d39-3ffe-08d6f03f3bc5
X-MS-Exchange-CrossTenant-originalarrivaltime: 13 Jun 2019 20:39:30.1336
 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: a652971c-7d2e-4d9b-a6a4-d149256f461b
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: saeedm@mellanox.com
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DB6PR0501MB2629
Sender: netdev-owner@vger.kernel.org
Precedence: bulk
List-ID: <netdev.vger.kernel.org>
X-Mailing-List: netdev@vger.kernel.org

RnJvbTogRmVyYXMgRGFvdWQgPGZlcmFzZGFAbWVsbGFub3guY29tPg0KDQpJZiBhIEZXIGFzc2Vy
dCBpcyBjb25zaWRlcmVkIGZhdGFsLCBpbmRpY2F0ZWQgYnkgYSBuZXcgYml0IGluIHRoZSBoZWFs
dGgNCmJ1ZmZlciwgcmVzZXQgdGhlIEZXLiBBZnRlciB0aGUgcmVzZXQgZ28gdGhyb3VnaCB0aGUg
bm9ybWFsIHJlY292ZXJ5DQpmbG93LiBPbmx5IG9uZSBQRiBuZWVkcyB0byBpc3N1ZSB0aGUgcmVz
ZXQsIHNvIGFuIGF0dGVtcHQgaXMgbWFkZSB0bw0KcHJldmVudCB0aGUgMm5kIGZ1bmN0aW9uIGZy
b20gYWxzbyBpc3N1aW5nIHRoZSByZXNldC4NCkl0J3Mgbm90IGFuIGVycm9yIGlmIHRoYXQgaGFw
cGVucywgaXQganVzdCBzbG93cyByZWNvdmVyeS4NCg0KU2lnbmVkLW9mZi1ieTogRmVyYXMgRGFv
dWQgPGZlcmFzZGFAbWVsbGFub3guY29tPg0KU2lnbmVkLW9mZi1ieTogQWxleCBWZXNrZXIgPHZh
bGV4QG1lbGxhbm94LmNvbT4NClNpZ25lZC1vZmYtYnk6IE1vc2hlIFNoZW1lc2ggPG1vc2hlQG1l
bGxhbm94LmNvbT4NClNpZ25lZC1vZmYtYnk6IERhbmllbCBKdXJnZW5zIDxkYW5pZWxqQG1lbGxh
bm94LmNvbT4NClNpZ25lZC1vZmYtYnk6IFNhZWVkIE1haGFtZWVkIDxzYWVlZG1AbWVsbGFub3gu
Y29tPg0KLS0tDQogLi4uL2V0aGVybmV0L21lbGxhbm94L21seDUvY29yZS9kaWFnL2NyZHVtcC5j
IHwgIDEzICstDQogLi4uL25ldC9ldGhlcm5ldC9tZWxsYW5veC9tbHg1L2NvcmUvaGVhbHRoLmMg
IHwgMTU3ICsrKysrKysrKysrKysrKysrLQ0KIC4uLi9uZXQvZXRoZXJuZXQvbWVsbGFub3gvbWx4
NS9jb3JlL21haW4uYyAgICB8ICAgMSArDQogLi4uL2V0aGVybmV0L21lbGxhbm94L21seDUvY29y
ZS9tbHg1X2NvcmUuaCAgIHwgICAyICsNCiBpbmNsdWRlL2xpbnV4L21seDUvZGV2aWNlLmggICAg
ICAgICAgICAgICAgICAgfCAgMTAgKy0NCiBpbmNsdWRlL2xpbnV4L21seDUvZHJpdmVyLmggICAg
ICAgICAgICAgICAgICAgfCAgIDEgKw0KIDYgZmlsZXMgY2hhbmdlZCwgMTc2IGluc2VydGlvbnMo
KyksIDggZGVsZXRpb25zKC0pDQoNCmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9t
ZWxsYW5veC9tbHg1L2NvcmUvZGlhZy9jcmR1bXAuYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L21l
bGxhbm94L21seDUvY29yZS9kaWFnL2NyZHVtcC5jDQppbmRleCBkZmIzNDE3MmM2OWIuLjI4ZDAy
NzQ5ZDNjNCAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L21lbGxhbm94L21seDUv
Y29yZS9kaWFnL2NyZHVtcC5jDQorKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9tZWxsYW5veC9t
bHg1L2NvcmUvZGlhZy9jcmR1bXAuYw0KQEAgLTUxLDE0ICs1MSwyMyBAQCBpbnQgbWx4NV9jcmR1
bXBfY29sbGVjdChzdHJ1Y3QgbWx4NV9jb3JlX2RldiAqZGV2LCB1MzIgKmNyX2RhdGEpDQogCQkJ
ICAgICAgIHJldCk7DQogCQlyZXR1cm4gcmV0Ow0KIAl9DQorCS8qIFZlcmlmeSBubyBvdGhlciBQ
RiBpcyBydW5uaW5nIGNyLWR1bXAgb3Igc3cgcmVzZXQgKi8NCisJcmV0ID0gbWx4NV92c2Nfc2Vt
X3NldF9zcGFjZShkZXYsIE1MWDVfU0VNQVBIT1JFX1NXX1JFU0VULA0KKwkJCQkgICAgIE1MWDVf
VlNDX0xPQ0spOw0KKwlpZiAocmV0KSB7DQorCQltbHg1X2NvcmVfd2FybihkZXYsICJGYWlsZWQg
dG8gbG9jayBTVyByZXNldCBzZW1hcGhvcmVcbiIpOw0KKwkJZ290byB1bmxvY2tfZ3c7DQorCX0N
CiANCiAJcmV0ID0gbWx4NV92c2NfZ3dfc2V0X3NwYWNlKGRldiwgTUxYNV9WU0NfU1BBQ0VfU0NB
Tl9DUlNQQUNFLCBOVUxMKTsNCiAJaWYgKHJldCkNCi0JCWdvdG8gdW5sb2NrOw0KKwkJZ290byB1
bmxvY2tfc2VtOw0KIA0KIAlyZXQgPSBtbHg1X2NyZHVtcF9maWxsKGRldiwgY3JfZGF0YSk7DQog
DQotdW5sb2NrOg0KK3VubG9ja19zZW06DQorCW1seDVfdnNjX3NlbV9zZXRfc3BhY2UoZGV2LCBN
TFg1X1NFTUFQSE9SRV9TV19SRVNFVCwgTUxYNV9WU0NfVU5MT0NLKTsNCit1bmxvY2tfZ3c6DQog
CW1seDVfdnNjX2d3X3VubG9jayhkZXYpOw0KIAlyZXR1cm4gcmV0Ow0KIH0NCmRpZmYgLS1naXQg
YS9kcml2ZXJzL25ldC9ldGhlcm5ldC9tZWxsYW5veC9tbHg1L2NvcmUvaGVhbHRoLmMgYi9kcml2
ZXJzL25ldC9ldGhlcm5ldC9tZWxsYW5veC9tbHg1L2NvcmUvaGVhbHRoLmMNCmluZGV4IDczN2U2
ZDU1MDc3NS4uY2FmNTRiZDdkNTM4IDEwMDY0NA0KLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQv
bWVsbGFub3gvbWx4NS9jb3JlL2hlYWx0aC5jDQorKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9t
ZWxsYW5veC9tbHg1L2NvcmUvaGVhbHRoLmMNCkBAIC00MCw2ICs0MCw3IEBADQogI2luY2x1ZGUg
Im1seDVfY29yZS5oIg0KICNpbmNsdWRlICJsaWIvZXEuaCINCiAjaW5jbHVkZSAibGliL21seDUu
aCINCisjaW5jbHVkZSAibGliL3BjaV92c2MuaCINCiANCiBlbnVtIHsNCiAJTUxYNV9IRUFMVEhf
UE9MTF9JTlRFUlZBTAk9IDIgKiBIWiwNCkBAIC02Nyw4ICs2OCwxMCBAQCBlbnVtIHsNCiBlbnVt
ICB7DQogCU1MWDVfU0VOU09SX05PX0VSUgkJPSAwLA0KIAlNTFg1X1NFTlNPUl9QQ0lfQ09NTV9F
UlIJPSAxLA0KLQlNTFg1X1NFTlNPUl9OSUNfRElTQUJMRUQJPSAyLA0KLQlNTFg1X1NFTlNPUl9O
SUNfU1dfUkVTRVQJPSAzLA0KKwlNTFg1X1NFTlNPUl9QQ0lfRVJSCQk9IDIsDQorCU1MWDVfU0VO
U09SX05JQ19ESVNBQkxFRAk9IDMsDQorCU1MWDVfU0VOU09SX05JQ19TV19SRVNFVAk9IDQsDQor
CU1MWDVfU0VOU09SX0ZXX1NZTkRfUkZSCQk9IDUsDQogfTsNCiANCiB1OCBtbHg1X2dldF9uaWNf
c3RhdGUoc3RydWN0IG1seDVfY29yZV9kZXYgKmRldikNCkBAIC05NSwzMiArOTgsMTYyIEBAIHN0
YXRpYyBib29sIHNlbnNvcl9wY2lfbm90X3dvcmtpbmcoc3RydWN0IG1seDVfY29yZV9kZXYgKmRl
dikNCiAJcmV0dXJuIChpb3JlYWQzMmJlKCZoLT5md192ZXIpID09IDB4ZmZmZmZmZmYpOw0KIH0N
CiANCitzdGF0aWMgYm9vbCBzZW5zb3JfZndfc3luZF9yZnIoc3RydWN0IG1seDVfY29yZV9kZXYg
KmRldikNCit7DQorCXN0cnVjdCBtbHg1X2NvcmVfaGVhbHRoICpoZWFsdGggPSAmZGV2LT5wcml2
LmhlYWx0aDsNCisJc3RydWN0IGhlYWx0aF9idWZmZXIgX19pb21lbSAqaCA9IGhlYWx0aC0+aGVh
bHRoOw0KKwl1MzIgcmZyID0gaW9yZWFkMzJiZSgmaC0+cmZyKSA+PiBNTFg1X1JGUl9PRkZTRVQ7
DQorCXU4IHN5bmQgPSBpb3JlYWQ4KCZoLT5zeW5kKTsNCisNCisJaWYgKHJmciAmJiBzeW5kKQ0K
KwkJbWx4NV9jb3JlX2RiZyhkZXYsICJGVyByZXF1ZXN0cyByZXNldCwgc3luZDogJWRcbiIsIHN5
bmQpOw0KKwlyZXR1cm4gcmZyICYmIHN5bmQ7DQorfQ0KKw0KIHN0YXRpYyB1MzIgY2hlY2tfZmF0
YWxfc2Vuc29ycyhzdHJ1Y3QgbWx4NV9jb3JlX2RldiAqZGV2KQ0KIHsNCiAJaWYgKHNlbnNvcl9w
Y2lfbm90X3dvcmtpbmcoZGV2KSkNCiAJCXJldHVybiBNTFg1X1NFTlNPUl9QQ0lfQ09NTV9FUlI7
DQorCWlmIChwY2lfY2hhbm5lbF9vZmZsaW5lKGRldi0+cGRldikpDQorCQlyZXR1cm4gTUxYNV9T
RU5TT1JfUENJX0VSUjsNCiAJaWYgKG1seDVfZ2V0X25pY19zdGF0ZShkZXYpID09IE1MWDVfTklD
X0lGQ19ESVNBQkxFRCkNCiAJCXJldHVybiBNTFg1X1NFTlNPUl9OSUNfRElTQUJMRUQ7DQogCWlm
IChtbHg1X2dldF9uaWNfc3RhdGUoZGV2KSA9PSBNTFg1X05JQ19JRkNfU1dfUkVTRVQpDQogCQly
ZXR1cm4gTUxYNV9TRU5TT1JfTklDX1NXX1JFU0VUOw0KKwlpZiAoc2Vuc29yX2Z3X3N5bmRfcmZy
KGRldikpDQorCQlyZXR1cm4gTUxYNV9TRU5TT1JfRldfU1lORF9SRlI7DQogDQogCXJldHVybiBN
TFg1X1NFTlNPUl9OT19FUlI7DQogfQ0KIA0KK3N0YXRpYyBpbnQgbG9ja19zZW1fc3dfcmVzZXQo
c3RydWN0IG1seDVfY29yZV9kZXYgKmRldiwgYm9vbCBsb2NrKQ0KK3sNCisJZW51bSBtbHg1X3Zz
Y19zdGF0ZSBzdGF0ZTsNCisJaW50IHJldDsNCisNCisJaWYgKCFtbHg1X2NvcmVfaXNfcGYoZGV2
KSkNCisJCXJldHVybiAtRUJVU1k7DQorDQorCS8qIFRyeSB0byBsb2NrIEdXIGFjY2VzcywgdGhp
cyBzdGFnZSBkb2Vzbid0IHJldHVybg0KKwkgKiBFQlVTWSBiZWNhdXNlIGxvY2tlZCBHVyBkb2Vz
IG5vdCBtZWFuIHRoYXQgb3RoZXIgUEYNCisJICogYWxyZWFkeSBzdGFydGVkIHRoZSByZXNldC4N
CisJICovDQorCXJldCA9IG1seDVfdnNjX2d3X2xvY2soZGV2KTsNCisJaWYgKHJldCA9PSAtRUJV
U1kpDQorCQlyZXR1cm4gLUVJTlZBTDsNCisJaWYgKHJldCkNCisJCXJldHVybiByZXQ7DQorDQor
CXN0YXRlID0gbG9jayA/IE1MWDVfVlNDX0xPQ0sgOiBNTFg1X1ZTQ19VTkxPQ0s7DQorCS8qIEF0
IHRoaXMgc3RhZ2UsIGlmIHRoZSByZXR1cm4gc3RhdHVzID09IEVCVVNZLCB0aGVuIHdlIGtub3cN
CisJICogZm9yIHN1cmUgdGhhdCBhbm90aGVyIFBGIHN0YXJ0ZWQgdGhlIHJlc2V0LCBzbyBkb24n
dCBhbGxvdw0KKwkgKiBhbm90aGVyIHJlc2V0Lg0KKwkgKi8NCisJcmV0ID0gbWx4NV92c2Nfc2Vt
X3NldF9zcGFjZShkZXYsIE1MWDVfU0VNQVBIT1JFX1NXX1JFU0VULCBzdGF0ZSk7DQorCWlmIChy
ZXQpDQorCQltbHg1X2NvcmVfd2FybihkZXYsICJGYWlsZWQgdG8gbG9jayBTVyByZXNldCBzZW1h
cGhvcmVcbiIpOw0KKw0KKwkvKiBVbmxvY2sgR1cgYWNjZXNzICovDQorCW1seDVfdnNjX2d3X3Vu
bG9jayhkZXYpOw0KKw0KKwlyZXR1cm4gcmV0Ow0KK30NCisNCitzdGF0aWMgYm9vbCByZXNldF9m
d19pZl9uZWVkZWQoc3RydWN0IG1seDVfY29yZV9kZXYgKmRldikNCit7DQorCWJvb2wgc3VwcG9y
dGVkID0gKGlvcmVhZDMyYmUoJmRldi0+aXNlZy0+aW5pdGlhbGl6aW5nKSA+Pg0KKwkJCSAgTUxY
NV9GV19SRVNFVF9TVVBQT1JURURfT0ZGU0VUKSAmIDE7DQorCXUzMiBmYXRhbF9lcnJvcjsNCisN
CisJaWYgKCFzdXBwb3J0ZWQpDQorCQlyZXR1cm4gZmFsc2U7DQorDQorCS8qIFRoZSByZXNldCBv
bmx5IG5lZWRzIHRvIGJlIGlzc3VlZCBieSBvbmUgUEYuIFRoZSBoZWFsdGggYnVmZmVyIGlzDQor
CSAqIHNoYXJlZCBiZXR3ZWVuIGFsbCBmdW5jdGlvbnMsIGFuZCB3aWxsIGJlIGNsZWFyZWQgZHVy
aW5nIGEgcmVzZXQuDQorCSAqIENoZWNrIGFnYWluIHRvIGF2b2lkIGEgcmVkdW5kYW50IDJuZCBy
ZXNldC4gSWYgdGhlIGZhdGFsIGVycm9zIHdhcw0KKwkgKiBQQ0kgcmVsYXRlZCBhIHJlc2V0IHdv
bid0IGhlbHAuDQorCSAqLw0KKwlmYXRhbF9lcnJvciA9IGNoZWNrX2ZhdGFsX3NlbnNvcnMoZGV2
KTsNCisJaWYgKGZhdGFsX2Vycm9yID09IE1MWDVfU0VOU09SX1BDSV9DT01NX0VSUiB8fA0KKwkg
ICAgZmF0YWxfZXJyb3IgPT0gTUxYNV9TRU5TT1JfTklDX0RJU0FCTEVEIHx8DQorCSAgICBmYXRh
bF9lcnJvciA9PSBNTFg1X1NFTlNPUl9OSUNfU1dfUkVTRVQpIHsNCisJCW1seDVfY29yZV93YXJu
KGRldiwgIk5vdCBpc3N1aW5nIEZXIHJlc2V0LiBFaXRoZXIgaXQncyBhbHJlYWR5IGRvbmUgb3Ig
d29uJ3QgaGVscC4iKTsNCisJCXJldHVybiBmYWxzZTsNCisJfQ0KKw0KKwltbHg1X2NvcmVfd2Fy
bihkZXYsICJJc3N1aW5nIEZXIFJlc2V0XG4iKTsNCisJLyogV3JpdGUgdGhlIE5JQyBpbnRlcmZh
Y2UgZmllbGQgdG8gaW5pdGlhdGUgdGhlIHJlc2V0LCB0aGUgY29tbWFuZA0KKwkgKiBpbnRlcmZh
Y2UgYWRkcmVzcyBhbHNvIHJlc2lkZXMgaGVyZSwgZG9uJ3Qgb3ZlcndyaXRlIGl0Lg0KKwkgKi8N
CisJbWx4NV9zZXRfbmljX3N0YXRlKGRldiwgTUxYNV9OSUNfSUZDX1NXX1JFU0VUKTsNCisNCisJ
cmV0dXJuIHRydWU7DQorfQ0KKw0KIHZvaWQgbWx4NV9lbnRlcl9lcnJvcl9zdGF0ZShzdHJ1Y3Qg
bWx4NV9jb3JlX2RldiAqZGV2LCBib29sIGZvcmNlKQ0KIHsNCiAJbXV0ZXhfbG9jaygmZGV2LT5p
bnRmX3N0YXRlX211dGV4KTsNCiAJaWYgKGRldi0+c3RhdGUgPT0gTUxYNV9ERVZJQ0VfU1RBVEVf
SU5URVJOQUxfRVJST1IpDQogCQlnb3RvIHVubG9jazsNCisJaWYgKGRldi0+c3RhdGUgPT0gTUxY
NV9ERVZJQ0VfU1RBVEVfVU5JTklUSUFMSVpFRCkgew0KKwkJZGV2LT5zdGF0ZSA9IE1MWDVfREVW
SUNFX1NUQVRFX0lOVEVSTkFMX0VSUk9SOw0KKwkJZ290byB1bmxvY2s7DQorCX0NCiANCi0JbWx4
NV9jb3JlX2VycihkZXYsICJzdGFydFxuIik7DQotCWlmIChwY2lfY2hhbm5lbF9vZmZsaW5lKGRl
di0+cGRldikgfHwNCi0JICAgIGRldi0+cHJpdi5oZWFsdGguZmF0YWxfZXJyb3IgIT0gTUxYNV9T
RU5TT1JfTk9fRVJSIHx8IGZvcmNlKSB7DQorCWlmIChjaGVja19mYXRhbF9zZW5zb3JzKGRldikg
fHwgZm9yY2UpIHsNCiAJCWRldi0+c3RhdGUgPSBNTFg1X0RFVklDRV9TVEFURV9JTlRFUk5BTF9F
UlJPUjsNCiAJCW1seDVfY21kX2ZsdXNoKGRldik7DQogCX0NCiANCiAJbWx4NV9ub3RpZmllcl9j
YWxsX2NoYWluKGRldi0+cHJpdi5ldmVudHMsIE1MWDVfREVWX0VWRU5UX1NZU19FUlJPUiwgKHZv
aWQgKikxKTsNCit1bmxvY2s6DQorCW11dGV4X3VubG9jaygmZGV2LT5pbnRmX3N0YXRlX211dGV4
KTsNCit9DQorDQorI2RlZmluZSBNTFg1X0NSRFVNUF9XQUlUX01TCTYwMDAwDQorI2RlZmluZSBN
TFg1X0ZXX1JFU0VUX1dBSVRfTVMJMTAwMA0KK3ZvaWQgbWx4NV9lcnJvcl9zd19yZXNldChzdHJ1
Y3QgbWx4NV9jb3JlX2RldiAqZGV2KQ0KK3sNCisJdW5zaWduZWQgbG9uZyBlbmQsIGRlbGF5X21z
ID0gTUxYNV9GV19SRVNFVF9XQUlUX01TOw0KKwlpbnQgbG9jayA9IC1FQlVTWTsNCisNCisJbXV0
ZXhfbG9jaygmZGV2LT5pbnRmX3N0YXRlX211dGV4KTsNCisJaWYgKGRldi0+c3RhdGUgIT0gTUxY
NV9ERVZJQ0VfU1RBVEVfSU5URVJOQUxfRVJST1IpDQorCQlnb3RvIHVubG9jazsNCisNCisJbWx4
NV9jb3JlX2VycihkZXYsICJzdGFydFxuIik7DQorDQorCWlmIChjaGVja19mYXRhbF9zZW5zb3Jz
KGRldikgPT0gTUxYNV9TRU5TT1JfRldfU1lORF9SRlIpIHsNCisJCS8qIEdldCBjci1kdW1wIGFu
ZCByZXNldCBGVyBzZW1hcGhvcmUgKi8NCisJCWxvY2sgPSBsb2NrX3NlbV9zd19yZXNldChkZXYs
IHRydWUpOw0KKw0KKwkJaWYgKGxvY2sgPT0gLUVCVVNZKSB7DQorCQkJZGVsYXlfbXMgPSBNTFg1
X0NSRFVNUF9XQUlUX01TOw0KKwkJCWdvdG8gcmVjb3Zlcl9mcm9tX3N3X3Jlc2V0Ow0KKwkJfQ0K
KwkJLyogRXhlY3V0ZSBTVyByZXNldCAqLw0KKwkJcmVzZXRfZndfaWZfbmVlZGVkKGRldik7DQor
CX0NCisNCityZWNvdmVyX2Zyb21fc3dfcmVzZXQ6DQorCS8qIFJlY292ZXIgZnJvbSBTVyByZXNl
dCAqLw0KKwllbmQgPSBqaWZmaWVzICsgbXNlY3NfdG9famlmZmllcyhkZWxheV9tcyk7DQorCWRv
IHsNCisJCWlmIChtbHg1X2dldF9uaWNfc3RhdGUoZGV2KSA9PSBNTFg1X05JQ19JRkNfRElTQUJM
RUQpDQorCQkJYnJlYWs7DQorDQorCQljb25kX3Jlc2NoZWQoKTsNCisJfSB3aGlsZSAoIXRpbWVf
YWZ0ZXIoamlmZmllcywgZW5kKSk7DQorDQorCWlmIChtbHg1X2dldF9uaWNfc3RhdGUoZGV2KSAh
PSBNTFg1X05JQ19JRkNfRElTQUJMRUQpIHsNCisJCWRldl9lcnIoJmRldi0+cGRldi0+ZGV2LCAi
TklDIElGQyBzdGlsbCAlZCBhZnRlciAlbHVtcy5cbiIsDQorCQkJbWx4NV9nZXRfbmljX3N0YXRl
KGRldiksIGRlbGF5X21zKTsNCisJfQ0KKw0KKwkvKiBSZWxlYXNlIEZXIHNlbWFwaG9yZSBpZiB5
b3UgYXJlIHRoZSBsb2NrIG93bmVyICovDQorCWlmICghbG9jaykNCisJCWxvY2tfc2VtX3N3X3Jl
c2V0KGRldiwgZmFsc2UpOw0KKw0KIAltbHg1X2NvcmVfZXJyKGRldiwgImVuZFxuIik7DQogDQog
dW5sb2NrOg0KQEAgLTE0Myw2ICsyNzYsMjAgQEAgc3RhdGljIHZvaWQgbWx4NV9oYW5kbGVfYmFk
X3N0YXRlKHN0cnVjdCBtbHg1X2NvcmVfZGV2ICpkZXYpDQogCWNhc2UgTUxYNV9OSUNfSUZDX05P
X0RSQU1fTklDOg0KIAkJbWx4NV9jb3JlX3dhcm4oZGV2LCAiRXhwZWN0ZWQgdG8gc2VlIGRpc2Fi
bGVkIE5JQyBidXQgaXQgaXMgbm8gZHJhbSBuaWNcbiIpOw0KIAkJYnJlYWs7DQorDQorCWNhc2Ug
TUxYNV9OSUNfSUZDX1NXX1JFU0VUOg0KKwkJLyogVGhlIElGQyBtb2RlIGZpZWxkIGlzIDMgYml0
cywgc28gaXQgd2lsbCByZWFkIDB4NyBpbiAyIGNhc2VzOg0KKwkJICogMS4gUENJIGhhcyBiZWVu
IGRpc2FibGVkIChpZS4gUENJLUFFUiwgUEYgZHJpdmVyIHVubG9hZGVkDQorCQkgKiAgICBhbmQg
dGhpcyBpcyBhIFZGKSwgdGhpcyBpcyBub3QgcmVjb3ZlcmFibGUgYnkgU1cgcmVzZXQuDQorCQkg
KiAgICBMb2dnaW5nIG9mIHRoaXMgaXMgaGFuZGxlZCBlbHNld2hlcmUuDQorCQkgKiAyLiBGVyBy
ZXNldCBoYXMgYmVlbiBpc3N1ZWQgYnkgYW5vdGhlciBmdW5jdGlvbiwgZHJpdmVyIGNhbg0KKwkJ
ICogICAgYmUgcmVsb2FkZWQgdG8gcmVjb3ZlciBhZnRlciB0aGUgbW9kZSBzd2l0Y2hlcyB0bw0K
KwkJICogICAgTUxYNV9OSUNfSUZDX0RJU0FCTEVELg0KKwkJICovDQorCQlpZiAoZGV2LT5wcml2
LmhlYWx0aC5mYXRhbF9lcnJvciAhPSBNTFg1X1NFTlNPUl9QQ0lfQ09NTV9FUlIpDQorCQkJbWx4
NV9jb3JlX3dhcm4oZGV2LCAiTklDIFNXIHJlc2V0IGluIHByb2dyZXNzXG4iKTsNCisJCWJyZWFr
Ow0KKw0KIAlkZWZhdWx0Og0KIAkJbWx4NV9jb3JlX3dhcm4oZGV2LCAiRXhwZWN0ZWQgdG8gc2Vl
IGRpc2FibGVkIE5JQyBidXQgaXQgaXMgaGFzIGludmFsaWQgdmFsdWUgJWRcbiIsDQogCQkJICAg
ICAgIG5pY19pbnRlcmZhY2UpOw0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L21l
bGxhbm94L21seDUvY29yZS9tYWluLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9tZWxsYW5veC9t
bHg1L2NvcmUvbWFpbi5jDQppbmRleCBmZDBlMjk0OWM0ZjIuLmVjNTI4N2M1MTgyNSAxMDA2NDQN
Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L21lbGxhbm94L21seDUvY29yZS9tYWluLmMNCisr
KyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L21lbGxhbm94L21seDUvY29yZS9tYWluLmMNCkBAIC0x
MzYxLDYgKzEzNjEsNyBAQCBzdGF0aWMgcGNpX2Vyc19yZXN1bHRfdCBtbHg1X3BjaV9lcnJfZGV0
ZWN0ZWQoc3RydWN0IHBjaV9kZXYgKnBkZXYsDQogCW1seDVfY29yZV9pbmZvKGRldiwgIiVzIHdh
cyBjYWxsZWRcbiIsIF9fZnVuY19fKTsNCiANCiAJbWx4NV9lbnRlcl9lcnJvcl9zdGF0ZShkZXYs
IGZhbHNlKTsNCisJbWx4NV9lcnJvcl9zd19yZXNldChkZXYpOw0KIAltbHg1X3VubG9hZF9vbmUo
ZGV2LCBmYWxzZSk7DQogCS8qIEluIGNhc2Ugb2Yga2VybmVsIGNhbGwgZHJhaW4gdGhlIGhlYWx0
aCB3cSAqLw0KIAlpZiAoc3RhdGUpIHsNCmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5l
dC9tZWxsYW5veC9tbHg1L2NvcmUvbWx4NV9jb3JlLmggYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9t
ZWxsYW5veC9tbHg1L2NvcmUvbWx4NV9jb3JlLmgNCmluZGV4IDg1OTNjODE4M2Q4Ny4uMjliYjYx
YTEwMjg5IDEwMDY0NA0KLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWVsbGFub3gvbWx4NS9j
b3JlL21seDVfY29yZS5oDQorKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9tZWxsYW5veC9tbHg1
L2NvcmUvbWx4NV9jb3JlLmgNCkBAIC0xMTMsNiArMTEzLDcgQEAgZW51bSB7DQogDQogZW51bSBt
bHg1X3NlbWFwaG9yZV9zcGFjZV9hZGRyZXNzIHsNCiAJTUxYNV9TRU1BUEhPUkVfU1BBQ0VfRE9N
QUlOICAgICA9IDB4QSwNCisJTUxYNV9TRU1BUEhPUkVfU1dfUkVTRVQgICAgICAgICA9IDB4MjAs
DQogfTsNCiANCiBpbnQgbWx4NV9xdWVyeV9oY2FfY2FwcyhzdHJ1Y3QgbWx4NV9jb3JlX2RldiAq
ZGV2KTsNCkBAIC0xMjIsNiArMTIzLDcgQEAgaW50IG1seDVfY21kX3RlYXJkb3duX2hjYShzdHJ1
Y3QgbWx4NV9jb3JlX2RldiAqZGV2KTsNCiBpbnQgbWx4NV9jbWRfZm9yY2VfdGVhcmRvd25faGNh
KHN0cnVjdCBtbHg1X2NvcmVfZGV2ICpkZXYpOw0KIGludCBtbHg1X2NtZF9mYXN0X3RlYXJkb3du
X2hjYShzdHJ1Y3QgbWx4NV9jb3JlX2RldiAqZGV2KTsNCiB2b2lkIG1seDVfZW50ZXJfZXJyb3Jf
c3RhdGUoc3RydWN0IG1seDVfY29yZV9kZXYgKmRldiwgYm9vbCBmb3JjZSk7DQordm9pZCBtbHg1
X2Vycm9yX3N3X3Jlc2V0KHN0cnVjdCBtbHg1X2NvcmVfZGV2ICpkZXYpOw0KIHZvaWQgbWx4NV9k
aXNhYmxlX2RldmljZShzdHJ1Y3QgbWx4NV9jb3JlX2RldiAqZGV2KTsNCiB2b2lkIG1seDVfcmVj
b3Zlcl9kZXZpY2Uoc3RydWN0IG1seDVfY29yZV9kZXYgKmRldik7DQogaW50IG1seDVfc3Jpb3Zf
aW5pdChzdHJ1Y3QgbWx4NV9jb3JlX2RldiAqZGV2KTsNCmRpZmYgLS1naXQgYS9pbmNsdWRlL2xp
bnV4L21seDUvZGV2aWNlLmggYi9pbmNsdWRlL2xpbnV4L21seDUvZGV2aWNlLmgNCmluZGV4IDVl
NzYwMDY3YWM0MS4uMzVlZDM4YzJhZTZjIDEwMDY0NA0KLS0tIGEvaW5jbHVkZS9saW51eC9tbHg1
L2RldmljZS5oDQorKysgYi9pbmNsdWRlL2xpbnV4L21seDUvZGV2aWNlLmgNCkBAIC01MTAsNiAr
NTEwLDEwIEBAIHN0cnVjdCBtbHg1X2NtZF9sYXlvdXQgew0KIAl1OAkJc3RhdHVzX293bjsNCiB9
Ow0KIA0KK2VudW0gbWx4NV9mYXRhbF9hc3NlcnRfYml0X29mZnNldHMgew0KKwlNTFg1X1JGUl9P
RkZTRVQgPSAzMSwNCit9Ow0KKw0KIHN0cnVjdCBoZWFsdGhfYnVmZmVyIHsNCiAJX19iZTMyCQlh
c3NlcnRfdmFyWzVdOw0KIAlfX2JlMzIJCXJzdmQwWzNdOw0KQEAgLTUxOCwxMiArNTIyLDE2IEBA
IHN0cnVjdCBoZWFsdGhfYnVmZmVyIHsNCiAJX19iZTMyCQlyc3ZkMVsyXTsNCiAJX19iZTMyCQlm
d192ZXI7DQogCV9fYmUzMgkJaHdfaWQ7DQotCV9fYmUzMgkJcnN2ZDI7DQorCV9fYmUzMgkJcmZy
Ow0KIAl1OAkJaXJpc2NfaW5kZXg7DQogCXU4CQlzeW5kOw0KIAlfX2JlMTYJCWV4dF9zeW5kOw0K
IH07DQogDQorZW51bSBtbHg1X2luaXRpYWxpemluZ19iaXRfb2Zmc2V0cyB7DQorCU1MWDVfRldf
UkVTRVRfU1VQUE9SVEVEX09GRlNFVCA9IDMwLA0KK307DQorDQogZW51bSBtbHg1X2NtZF9hZGRy
X2xfc3pfb2Zmc2V0IHsNCiAJTUxYNV9OSUNfSUZDX09GRlNFVCA9IDgsDQogfTsNCmRpZmYgLS1n
aXQgYS9pbmNsdWRlL2xpbnV4L21seDUvZHJpdmVyLmggYi9pbmNsdWRlL2xpbnV4L21seDUvZHJp
dmVyLmgNCmluZGV4IGNjN2ZkOGU2Mjg0NC4uODkyMDViNmNjN2VmIDEwMDY0NA0KLS0tIGEvaW5j
bHVkZS9saW51eC9tbHg1L2RyaXZlci5oDQorKysgYi9pbmNsdWRlL2xpbnV4L21seDUvZHJpdmVy
LmgNCkBAIC01ODMsNiArNTgzLDcgQEAgc3RydWN0IG1seDVfcHJpdiB7DQogfTsNCiANCiBlbnVt
IG1seDVfZGV2aWNlX3N0YXRlIHsNCisJTUxYNV9ERVZJQ0VfU1RBVEVfVU5JTklUSUFMSVpFRCwN
CiAJTUxYNV9ERVZJQ0VfU1RBVEVfVVAsDQogCU1MWDVfREVWSUNFX1NUQVRFX0lOVEVSTkFMX0VS
Uk9SLA0KIH07DQotLSANCjIuMjEuMA0KDQo=
